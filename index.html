<!DOCTYPE html>
<!-- saved from url=(0086)file:///C:/Users/AvshiSapir/Dropbox/My%20PC%20(DESKTOP-J9JO5C6)/Downloads/index_9.html -->
<html lang="he" dir="rtl"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CM Clinical Assistant - Complete Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        body { margin: 0; padding: 0; height: 100vh; overflow: hidden; }
        
        /* Left Panel - Scrollable CSV list */
        .left-panel {
            width: 280px;
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Right Panel - Scrollable questions */
        .right-panel {
            width: 320px;
            height: 100vh;
            overflow-y: auto;
        }
        
        .csv-box {
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            word-wrap: break-word;
        }
        .csv-box.active {
            animation: glow 1.5s ease-in-out infinite;
            transform: scale(1.02);
            border-color: #22c55e;
            background: #f0fdf4;
            font-weight: bold;
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 8px rgba(34, 197, 94, 0.6); }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.9); }
        }
        .csv-box.bible {
            border-color: #fbbf24;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            font-weight: bold;
        }
        
        /* Golden Clock Styling */
        .golden-clock {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            padding: 8px 16px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
            min-width: 200px;
        }
        
        .clock-icon {
            animation: tick 1s infinite;
            font-size: 18px;
        }
        
        .clock-time {
            font-weight: bold;
            color: #1a1a1a;
            font-size: 14px;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }
        
        @keyframes tick {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
        }
        
        .metrics-box {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 10px 16px;
            font-size: 13px;
        }
        
        .query-box {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            background: white;
            direction: rtl;
        }
        .query-box.filled {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .quick-question {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            text-align: right;
            font-size: 14px;
        }
        .quick-question:hover {
            border-color: #3b82f6;
            background: #eff6ff;
            transform: translateX(-2px);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        
        .cost-display {
            font-size: 14px;
            font-weight: bold;
            color: #10b981;
        }
        
        /* Animated Run Query Button */
        .run-query-button {
            transition: all 0.3s ease;
        }
        
        .run-query-button.pulse-attention {
            animation: pulseGlow 1s ease-in-out 3;
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 20px 10px rgba(59, 130, 246, 0.3);
            }
        }
        
        /* Pause/Continue Button Styles */
        .pause-button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pause-button:hover {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
        }
        
        .paused-state {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        /* Clinical Modules Dropdown Items */
        .clinical-item {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 6px;
            padding: 8px 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            color: #1e293b;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .clinical-item:hover {
            background: white;
            transform: translateX(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        .clinical-item.selected {
            background: #fef3c7;
            border-color: #fbbf24;
            font-weight: bold;
        }
        
        /* NEW: Search Control Buttons */
        .search-control-btn {
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .search-control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .search-control-btn:active {
            transform: translateY(0);
        }
    
/* YIN-YANG CSS */

        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Heebo', sans-serif; 
        }
        .section-card { 
            transition: all 0.3s ease; 
            border-right: 4px solid transparent; 
        }
        .section-card.active { 
            border-color: #667eea; 
            background: #f0f4ff; 
        }
        .section-card.completed {
            border-color: #10b981;
            background: #f0fdf4;
        }
        .option-card { 
            transition: all 0.2s ease; 
            cursor: pointer; 
            border: 2px solid #e5e7eb; 
        }
        .option-card:hover { 
            border-color: #667eea; 
            background: #f9fafb; 
            transform: translateX(-2px);
        }
        .option-card.selected { 
            border-color: #667eea; 
            background: #eff6ff; 
            box-shadow: 0 4px 6px -1px rgba(102, 126, 234, 0.1);
        }
        .progress-bar { 
            transition: width 0.5s ease; 
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .pattern-badge { 
            padding: 10px 20px; 
            border-radius: 25px; 
            font-weight: 600; 
            display: inline-block; 
            margin: 6px; 
            font-size: 1rem;
        }
        .yin-def { background: #fecaca; color: #991b1b; }
        .yang-def { background: #dbeafe; color: #1e40af; }
        .balanced { background: #d1fae5; color: #065f46; }
        .yin-yang-excess { background: #fed7aa; color: #9a3412; }
        .yang-yin-excess { background: #e0e7ff; color: #3730a3; }
        .result-card { 
            animation: fadeIn 0.6s ease; 
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .yin-yang-symbol {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(to right, #4A79A8 50%, #E5733F 50%);
            position: relative;
            margin: 0 auto;
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            animation: rotate-yin-yang 20s linear infinite;
        }
        @keyframes rotate-yin-yang {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .yin-yang-symbol::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 50%;
            height: 50%;
            background: #4A79A8;
            border-radius: 0 0 100% 100%;
            transform-origin: top right;
        }
        .yin-yang-symbol::after {
            content: '';
            position: absolute;
            top: 25%;
            left: 25%;
            width: 25%;
            height: 25%;
            background: #E5733F;
            border-radius: 50%;
            box-shadow: 0 50% 0 0 #4A79A8;
        }
        .yin-yang-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        .yin-yang-container::before {
            content: 'â˜¯';
            font-size: 180px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4A79A8 50%, #E5733F 50%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .dimension-bar {
            height: 28px;
            border-radius: 14px;
            background: #e5e7eb;
            overflow: hidden;
            position: relative;
        }
        .dimension-fill {
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
        }
        .yin-color { background: linear-gradient(90deg, #1e40af, #3b82f6); }
        .yang-color { background: linear-gradient(90deg, #dc2626, #ef4444); }
        .qi-color { background: linear-gradient(90deg, #059669, #10b981); }
        .heat-color { background: linear-gradient(90deg, #ea580c, #f97316); }
        
        /* Print Styles - Fixed for multi-page reports */
        @media print {
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               HIDE EVERYTHING EXCEPT THE REPORT
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            /* Hide ALL app elements */
            body > *:not(#yinyang-module):not(.print-container) {
                display: none !important;
            }
            
            /* Hide specific elements */
            .no-print, 
            .left-panel, 
            .right-panel,
            .center-panel,
            nav,
            .sidebar,
            header,
            footer,
            button,
            .export-buttons,
            #export-modal,
            #questionnaire,
            #live-scores,
            .golden-clock,
            .metrics-box {
                display: none !important;
            }
            
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               SHOW ONLY THE RESULTS
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            /* Show print elements */
            .print-only { 
                display: block !important; 
            }
            
            /* Make yinyang module visible and static */
            #yinyang-module {
                display: block !important;
                position: static !important;
                overflow: visible !important;
                height: auto !important;
                background: white !important;
            }
            
            /* Show results properly */
            #results {
                display: block !important;
                position: static !important;
                overflow: visible !important;
                height: auto !important;
                max-height: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            /* Hide header within yinyang (the purple gradient header) */
            #yinyang-module > div:first-child {
                display: none !important;
            }
            
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               PAGE LAYOUT & OVERFLOW FIX
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            html, body {
                overflow: visible !important;
                height: auto !important;
                width: auto !important;
                margin: 0 !important;
                padding: 0 !important;
                background: white !important;
                font-size: 12pt !important;
            }
            
            /* All containers should be static and visible */
            .report-container,
            .main-content,
            [class*="container"] {
                position: static !important;
                overflow: visible !important;
                height: auto !important;
                max-height: none !important;
                width: 100% !important;
                transform: none !important;
                float: none !important;
            }
            
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               PAGE BREAKS - NO OVERLAPPING
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            /* Force page break before these */
            .page-break { 
                page-break-before: always !important; 
            }
            
            /* Never break inside these */
            .no-page-break,
            section,
            .card,
            .box,
            [class*="section"],
            [class*="border-r-4"],
            .bg-red-50,
            .bg-pink-50,
            .bg-blue-50,
            .bg-green-50,
            .bg-yellow-50,
            .bg-purple-50 {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin-bottom: 15px !important;
            }
            
            /* Allow break after heading */
            h1, h2, h3, h4, h5, h6 {
                page-break-after: avoid !important;
            }
            
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               COLORS & TYPOGRAPHY
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            /* Ensure text is readable */
            p, li, span, div {
                color: #333 !important;
            }
            
            /* Keep colored backgrounds */
            [class*="bg-red"],
            [class*="bg-pink"],
            [class*="bg-blue"],
            [class*="bg-green"],
            [class*="bg-yellow"],
            [class*="bg-purple"],
            [class*="bg-gray"] {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            /* Images */
            img {
                max-width: 100% !important;
                page-break-inside: avoid !important;
            }
            
            /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               PAGE SETTINGS
               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
            
            @page {
                size: A4;
                margin: 12mm;
            }
            
            @page :first {
                margin-top: 10mm;
            }
            
            /* Print header/footer */
            .print-header {
                display: block !important;
                text-align: center;
                font-size: 18pt;
                font-weight: bold;
                margin-bottom: 20px;
                padding-bottom: 10px;
                border-bottom: 2px solid #333;
            }
            
            .print-footer {
                display: block !important;
                text-align: center;
                font-size: 9pt;
                margin-top: 20px;
                padding-top: 10px;
                border-top: 1px solid #ccc;
                color: #666 !important;
            }
        }
        
        .print-only { display: none; }
        
        /* Print container for custom print content */
        .print-container {
            display: none;
        }
        @media print {
            .print-container {
                display: block !important;
            }
        }
        .safety-flag {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 12px;
            margin-top: 8px;
            border-radius: 4px;
        }
        
        /* Training Syllabus Styles */
        .training-syllabus-box {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 12px;
            box-shadow: 0 8px 20px rgba(156, 39, 176, 0.3);
        }
        .training-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            margin-bottom: 15px;
        }
        .training-title {
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .training-toggle-icon {
            cursor: pointer;
            font-size: 20px;
            transition: transform 0.3s;
        }
        .training-toggle-icon.open {
            transform: rotate(180deg);
        }
        .training-stats {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 10px;
            color: white;
            font-size: 13px;
            text-align: center;
            margin-bottom: 15px;
        }
        .training-button {
            width: 100%;
            padding: 12px;
            background: white;
            color: #9C27B0;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .training-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .training-content {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            display: none;
            max-height: 500px;
            overflow-y: auto;
        }
        .training-content.active {
            display: block;
        }
        .training-filters {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
            direction: rtl;
        }
        .training-filter-btn {
            padding: 6px 12px;
            border-radius: 15px;
            border: 2px solid #9C27B0;
            background: white;
            color: #9C27B0;
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
            transition: all 0.3s;
        }
        .training-filter-btn:hover {
            transform: scale(1.05);
        }
        .training-filter-btn.active {
            background: #9C27B0;
            color: white;
        }
        .training-search-box {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 13px;
            margin-bottom: 12px;
            direction: rtl;
        }
        .training-search-box:focus {
            outline: none;
            border-color: #9C27B0;
        }
        .training-item {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-right: 4px solid #9C27B0;
            direction: rtl;
            font-size: 13px;
        }
        .training-item.pulse-type {
            border-right-color: #e74c3c;
        }
        .training-item.tongue-type {
            border-right-color: #e91e63;
        }
        .training-item.element-type {
            border-right-color: #9C27B0;
        }
        .training-item-name {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        .training-item-desc {
            font-size: 12px;
            color: #555;
            line-height: 1.4;
            margin-bottom: 8px;
        }
        .training-item-points {
            background: #fff3cd;
            padding: 8px;
            border-radius: 6px;
            font-size: 11px;
            color: #856404;
            margin-bottom: 6px;
        }
        .training-item-treatment {
            background: #d1ecf1;
            padding: 8px;
            border-radius: 6px;
            font-size: 11px;
            color: #0c5460;
        }
        .training-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 6px;
        }
        .badge-intermediate {
            background: #3498db;
            color: white;
        }
        .badge-advanced {
            background: #e74c3c;
            color: white;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ğŸ¤ VOICE SEARCH ANIMATIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        /* Microphone button listening state */
        #voiceSearchBtn.listening {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
            animation: listening-pulse 1s infinite;
        }
        
        @keyframes listening-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }
        }
        
        /* Input field listening state */
        #smartSearchInput.listening {
            border-color: #ef4444 !important;
            animation: pulse-border 1.5s infinite;
        }
        
        @keyframes pulse-border {
            0%, 100% { 
                box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
            }
            50% { 
                box-shadow: 0 0 0 6px rgba(239, 68, 68, 0.4);
            }
        }
    
</style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.left-2{left:0.5rem}.top-0{top:0px}.top-2{top:0.5rem}.z-10{z-index:10}.m-3{margin:0.75rem}.my-2{margin-top:0.5rem;margin-bottom:0.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-6{margin-bottom:1.5rem}.ml-2{margin-left:0.5rem}.mr-1{margin-right:0.25rem}.mr-2{margin-right:0.5rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.hidden{display:none}.h-10{height:2.5rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-screen{height:100vh}.h-6{height:1.5rem}.h-8{height:2rem}.max-h-48{max-height:12rem}.max-h-96{max-height:24rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.w-full{width:100%}.w-6{width:1.5rem}.w-8{width:2rem}.max-w-6xl{max-width:72rem}.flex-1{flex:1 1 0%}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.space-x-6 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1.5rem * var(--tw-space-x-reverse));margin-left:calc(1.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-x-reverse > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:1}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.rounded{border-radius:0.25rem}.border{border-width:1px}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t-4{border-top-width:4px}.border-r-4{border-right-width:4px}.border-blue-300{--tw-border-opacity:1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity:1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-indigo-300{--tw-border-opacity:1;border-color:rgb(165 180 252 / var(--tw-border-opacity, 1))}.border-orange-300{--tw-border-opacity:1;border-color:rgb(253 186 116 / var(--tw-border-opacity, 1))}.border-pink-300{--tw-border-opacity:1;border-color:rgb(249 168 212 / var(--tw-border-opacity, 1))}.border-purple-300{--tw-border-opacity:1;border-color:rgb(216 180 254 / var(--tw-border-opacity, 1))}.border-purple-400{--tw-border-opacity:1;border-color:rgb(192 132 252 / var(--tw-border-opacity, 1))}.border-yellow-300{--tw-border-opacity:1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity:1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-pink-500{--tw-border-opacity:1;border-color:rgb(236 72 153 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity:1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.border-purple-500{--tw-border-opacity:1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.border-red-500{--tw-border-opacity:1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity:1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-900\/30{background-color:rgb(30 58 138 / 0.3)}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-900\/30{background-color:rgb(20 83 45 / 0.3)}.bg-orange-600{--tw-bg-opacity:1;background-color:rgb(234 88 12 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity:1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-purple-900\/30{background-color:rgb(88 28 135 / 0.3)}.bg-red-600{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/10{background-color:rgb(255 255 255 / 0.1)}.bg-white\/20{background-color:rgb(255 255 255 / 0.2)}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-pink-50{--tw-bg-opacity:1;background-color:rgb(253 242 248 / var(--tw-bg-opacity, 1))}.bg-pink-500{--tw-bg-opacity:1;background-color:rgb(236 72 153 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity:1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-blue-50{--tw-gradient-from:#eff6ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(59 130 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-cyan-500{--tw-gradient-from:#06b6d4 var(--tw-gradient-from-position);--tw-gradient-to:rgb(6 182 212 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-500{--tw-gradient-from:#22c55e var(--tw-gradient-from-position);--tw-gradient-to:rgb(34 197 94 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-50{--tw-gradient-from:#faf5ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(250 245 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-500{--tw-gradient-from:#a855f7 var(--tw-gradient-from-position);--tw-gradient-to:rgb(168 85 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-600{--tw-gradient-from:#9333ea var(--tw-gradient-from-position);--tw-gradient-to:rgb(147 51 234 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-500{--tw-gradient-from:#ef4444 var(--tw-gradient-from-position);--tw-gradient-to:rgb(239 68 68 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-blue-600{--tw-gradient-to:#2563eb var(--tw-gradient-to-position)}.to-indigo-600{--tw-gradient-to:#4f46e5 var(--tw-gradient-to-position)}.to-indigo-700{--tw-gradient-to:#4338ca var(--tw-gradient-to-position)}.to-pink-50{--tw-gradient-to:#fdf2f8 var(--tw-gradient-to-position)}.to-pink-600{--tw-gradient-to:#db2777 var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to:#faf5ff var(--tw-gradient-to-position)}.to-teal-600{--tw-gradient-to:#0d9488 var(--tw-gradient-to-position)}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pr-12{padding-right:3rem}.pb-3{padding-bottom:0.75rem}.text-center{text-align:center}.text-right{text-align:right}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}.text-blue-300{--tw-text-opacity:1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity:1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity:1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity:1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-indigo-700{--tw-text-opacity:1;color:rgb(67 56 202 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-orange-800{--tw-text-opacity:1;color:rgb(154 52 18 / var(--tw-text-opacity, 1))}.text-pink-600{--tw-text-opacity:1;color:rgb(219 39 119 / var(--tw-text-opacity, 1))}.text-pink-700{--tw-text-opacity:1;color:rgb(190 24 93 / var(--tw-text-opacity, 1))}.text-purple-300{--tw-text-opacity:1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity:1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity:1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-emerald-700{--tw-text-opacity:1;color:rgb(4 120 87 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-purple-100{--tw-text-opacity:1;color:rgb(243 232 255 / var(--tw-text-opacity, 1))}.text-purple-200{--tw-text-opacity:1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity:1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.opacity-80{opacity:0.8}.opacity-90{opacity:0.9}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:border-purple-500:hover{--tw-border-opacity:1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.hover\:bg-blue-100:hover{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-green-100:hover{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.hover\:bg-green-50:hover{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-100:hover{--tw-bg-opacity:1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-50:hover{--tw-bg-opacity:1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.hover\:bg-orange-100:hover{--tw-bg-opacity:1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.hover\:bg-orange-700:hover{--tw-bg-opacity:1;background-color:rgb(194 65 12 / var(--tw-bg-opacity, 1))}.hover\:bg-pink-100:hover{--tw-bg-opacity:1;background-color:rgb(252 231 243 / var(--tw-bg-opacity, 1))}.hover\:bg-pink-50:hover{--tw-bg-opacity:1;background-color:rgb(253 242 248 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-100:hover{--tw-bg-opacity:1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-50:hover{--tw-bg-opacity:1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-600:hover{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-700:hover{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity:1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/30:hover{background-color:rgb(255 255 255 / 0.3)}.hover\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-pink-600:hover{--tw-bg-opacity:1;background-color:rgb(219 39 119 / var(--tw-bg-opacity, 1))}.hover\:from-blue-700:hover{--tw-gradient-from:#1d4ed8 var(--tw-gradient-from-position);--tw-gradient-to:rgb(29 78 216 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:from-purple-700:hover{--tw-gradient-from:#7e22ce var(--tw-gradient-from-position);--tw-gradient-to:rgb(126 34 206 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-indigo-700:hover{--tw-gradient-to:#4338ca var(--tw-gradient-to-position)}.hover\:to-pink-700:hover{--tw-gradient-to:#be185d var(--tw-gradient-to-position)}.hover\:opacity-90:hover{opacity:0.9}.focus\:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:border-purple-600:focus{--tw-border-opacity:1;border-color:rgb(147 51 234 / var(--tw-border-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}</style><style id="export-print-styles">
            @media print {
                /* Hide non-printable elements */
                .no-print, 
                .export-buttons,
                button:not(.print-include),
                nav, 
                header:not(.print-header),
                footer:not(.print-footer),
                .sidebar,
                .left-panel,
                .right-panel,
                #export-modal {
                    display: none !important;
                }
                
                /* Show print-only elements */
                .print-only {
                    display: block !important;
                }
                
                /* Reset page layout */
                body {
                    margin: 0 !important;
                    padding: 15px !important;
                    background: white !important;
                    overflow: visible !important;
                    height: auto !important;
                }
                
                html {
                    overflow: visible !important;
                    height: auto !important;
                }
                
                /* Allow content to flow */
                .print-content,
                #results,
                #yinyang-module,
                .report-container {
                    position: relative !important;
                    overflow: visible !important;
                    height: auto !important;
                    max-height: none !important;
                    page-break-inside: auto;
                }
                
                /* Page break controls */
                .page-break {
                    page-break-before: always;
                }
                
                .no-page-break {
                    page-break-inside: avoid;
                }
                
                /* Sections */
                section, .section, .card, .box {
                    page-break-inside: avoid;
                    margin-bottom: 15px;
                }
                
                /* Typography */
                * {
                    color: black !important;
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                }
                
                /* Keep backgrounds for important elements */
                .bg-red-50, .bg-pink-50, .bg-blue-50, .bg-green-50, .bg-yellow-50, .bg-purple-50 {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                }
                
                /* Page settings */
                @page {
                    size: A4;
                    margin: 15mm;
                }
                
                /* Header/Footer for print */
                .print-header {
                    display: block !important;
                    text-align: center;
                    margin-bottom: 20px;
                    padding-bottom: 10px;
                    border-bottom: 2px solid #333;
                }
                
                .print-footer {
                    display: block !important;
                    text-align: center;
                    margin-top: 20px;
                    padding-top: 10px;
                    border-top: 1px solid #ccc;
                    font-size: 10px;
                }
                
                /* Images */
                img {
                    max-width: 100% !important;
                    page-break-inside: avoid;
                }
            }
            
            /* Export modal styles */
            #export-modal {
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.8);
                z-index: 999999;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            #export-modal .modal-content {
                background: white;
                border-radius: 16px;
                padding: 30px;
                max-width: 400px;
                width: 90%;
                direction: rtl;
                text-align: center;
            }
            
            #export-modal h3 {
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 20px;
                color: #333;
            }
            
            #export-modal .export-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
                width: 100%;
                padding: 15px 20px;
                margin: 10px 0;
                border: none;
                border-radius: 10px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                transition: transform 0.2s, box-shadow 0.2s;
            }
            
            #export-modal .export-btn:hover {
                transform: scale(1.02);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
            
            #export-modal .btn-print {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }
            
            #export-modal .btn-pdf {
                background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
                color: white;
            }
            
            #export-modal .btn-email {
                background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
                color: white;
            }
            
            #export-modal .btn-whatsapp {
                background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
                color: white;
            }
            
            #export-modal .btn-close {
                background: #e0e0e0;
                color: #333;
                margin-top: 15px;
            }
        </style><style id="styles-smart-search-module">/* Microphone button listening state */
#voiceSearchBtn.listening {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    animation: listening-pulse 1s infinite;
}

@keyframes listening-pulse {
    0%, 100% { 
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }
    50% { 
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
    }
}

/* Input field listening state */
#smartSearchInput.listening {
    border-color: #ef4444 !important;
    animation: pulse-border 1.5s infinite;
}

@keyframes pulse-border {
    0%, 100% { 
        border-color: #ef4444;
    }
    50% { 
        border-color: #fca5a5;
    }
}</style></head><body>
    <!-- 3-PANEL LAYOUT -->
    <div class="flex h-screen">
        <!-- LEFT PANEL: 450 Questions (appears on LEFT side of screen) -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             âš ï¸ LEFT PANEL - 450 QUESTIONS (APPEARS ON SCREEN RIGHT) âš ï¸
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             
             ğŸ”’ PROTECTED SECTION - DO NOT MODIFY WITHOUT PERMISSION
             
             Contains:
             - Category dropdown (30 categories Ã— 15 questions)
             - 450 pre-made Hebrew questions
             - Clickable questions that populate query boxes
             
             Current status: WORKING PERFECTLY âœ…
             Last modified: [BASELINE - DO NOT TOUCH]
             
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="left-panel bg-gray-50 border-r">
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 ğŸ“š 411 QUESTIONS MODULE - PRIMARY TOOL (TOP PRIORITY)
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            
            <div class="p-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white cursor-pointer hover:from-blue-700 hover:to-indigo-700 transition-all sticky top-0 z-10" onclick="toggleModule1Panel()">
                <div class="flex items-center justify-between">
                    <h3 class="font-bold text-sm">ğŸ“š 411 ×©××œ×•×ª ××•×›× ×•×ª</h3>
                    <span id="module1Arrow" class="text-xl transition-transform">â–¼</span>
                </div>
                <p class="text-xs opacity-80 mt-1">×œ×—×¥ ×œ×”×¦×’×ª/×”×¡×ª×¨×ª ×©××œ×•×ª</p>
            </div>
            
            <!-- Collapsible Questions Section -->
            <div id="module1Content" style="display: none;">
                <!-- Category Filter -->
                <div class="p-3">
                    <select id="categoryFilter" onchange="filterQuestions()" class="w-full p-2 border-2 border-gray-300 rounded-lg text-right text-sm">
        <option value="all">×›×œ ×”×§×˜×’×•×¨×™×•×ª (411 ×©××œ×•×ª)</option>
        <option value="××‘×—×•×Ÿ ×“×•×¤×§ ×•×œ×©×•×Ÿ">××‘×—×•×Ÿ ×“×•×¤×§ ×•×œ×©×•×Ÿ (15)</option>
        <option value="××¨×™×›×•×ª ×™××™× ×•××™×›×•×ª ×—×™×™×">××¨×™×›×•×ª ×™××™× ×•××™×›×•×ª ×—×™×™× (15)</option>
        <option value="××™×–×•×Ÿ ×•×—×™×–×•×§ (××‘×•×’×¨×™×)">××™×–×•×Ÿ ×•×—×™×–×•×§ (××‘×•×’×¨×™×) (15)</option>
        <option value="×©×™×§×•× ×•×˜×™×¤×•×œ ×‘×›××‘">×©×™×§×•× ×•×˜×™×¤×•×œ ×‘×›××‘ (15)</option>
        <option value="×‘×”×™×¨×•×ª ×•×—×•×¡×Ÿ ×× ×˜×œ×™">×‘×”×™×¨×•×ª ×•×—×•×¡×Ÿ ×× ×˜×œ×™ (15)</option>
        <option value="×‘×§×¨×ª ××§×œ×™× ×¤× ×™××™×ª">×‘×§×¨×ª ××§×œ×™× ×¤× ×™××™×ª (15)</option>
        <option value="×—×™×•× ×™×•×ª ×•××¨×™×›×•×ª ×™××™×">×—×™×•× ×™×•×ª ×•××¨×™×›×•×ª ×™××™× (15)</option>
        <option value="×—×•×¡×Ÿ ×—×™×¡×•× ×™ ×•×”×ª××•×©×©×•×ª">×—×•×¡×Ÿ ×—×™×¡×•× ×™ ×•×”×ª××•×©×©×•×ª (15)</option>
        <option value="×”×–× ×ª ×”×—×™×™× (×ª×–×•× ×”)">×”×–× ×ª ×”×—×™×™× (×ª×–×•× ×”) (15)</option>
        <option value="×ª×¡××•× ×•×ª ×–×× ×’-×¤×•">×ª×¡××•× ×•×ª ×–×× ×’-×¤×• (15)</option>
        <option value="× ×§×•×“×•×ª ×“×™×§×•×¨">× ×§×•×“×•×ª ×“×™×§×•×¨ (15)</option>
        <option value="××¨×‘×¢ ×”×‘×“×™×§×•×ª">××¨×‘×¢ ×”×‘×“×™×§×•×ª (15)</option>
        <option value="×‘×¨×™××•×ª ×”××™×©×”">×‘×¨×™××•×ª ×”××™×©×” (15)</option>
        <option value="×¨×¤×•××” ×¡×™× ×™×ª ×œ×™×œ×“×™×">×¨×¤×•××” ×¡×™× ×™×ª ×œ×™×œ×“×™× (15)</option>
        <option value="×¨×¤×•××” ×¡×™× ×™×ª ×œ×§×©×™×©×™×">×¨×¤×•××” ×¡×™× ×™×ª ×œ×§×©×™×©×™× (15)</option>
        <option value="×‘×¨×™××•×ª ×¨×’×©×™×ª">×‘×¨×™××•×ª ×¨×’×©×™×ª (15)</option>
        <option value="×”×¤×¨×¢×•×ª ×©×™× ×”">×”×¤×¨×¢×•×ª ×©×™× ×” (15)</option>
        <option value="×‘×¨×™××•×ª ××¢×¨×›×ª ×”×¢×™×›×•×œ">×‘×¨×™××•×ª ××¢×¨×›×ª ×”×¢×™×›×•×œ (15)</option>
        <option value="×‘×¨×™××•×ª ××¢×¨×›×ª ×”× ×©×™××”">×‘×¨×™××•×ª ××¢×¨×›×ª ×”× ×©×™××” (15)</option>
        <option value="××¢×¨×›×ª ×”×©×œ×“ ×•×”×©×¨×™×¨×™×">××¢×¨×›×ª ×”×©×œ×“ ×•×”×©×¨×™×¨×™× (15)</option>
        <option value="×›××‘×™ ×¨××© ×•××™×’×¨× ×•×ª">×›××‘×™ ×¨××© ×•××™×’×¨× ×•×ª (15)</option>
        <option value="××—×œ×•×ª ×¢×•×¨">××—×œ×•×ª ×¢×•×¨ (15)</option>
        <option value="××¢×¨×›×ª ×”×œ×‘ ×•×›×œ×™ ×”×“×">××¢×¨×›×ª ×”×œ×‘ ×•×›×œ×™ ×”×“× (15)</option>
        <option value="× ×•×¡×—××•×ª ×¦××—×™×">× ×•×¡×—××•×ª ×¦××—×™× (15)</option>
        <option value="××•×§×¡×” ×•×›×•×¡×•×ª ×¨×•×—">××•×§×¡×” ×•×›×•×¡×•×ª ×¨×•×— (15)</option>
        <option value="×›×œ×™ ×”×“× ×”××™×•×—×“×™×">×›×œ×™ ×”×“× ×”××™×•×—×“×™× (15)</option>
        <option value="×“×™×§×•×¨ ××•×–×Ÿ">×“×™×§×•×¨ ××•×–×Ÿ (15)</option>
        <option value="×˜×™×¤×•×œ ×œ×¤×™ ×¢×•× ×•×ª">×˜×™×¤×•×œ ×œ×¤×™ ×¢×•× ×•×ª (15)</option>
        <option value="×—××©×ª ×”×™×¡×•×“×•×ª">×—××©×ª ×”×™×¡×•×“×•×ª (15)</option>
        <option value="×™×™×Ÿ ×•×™×× ×’">×™×™×Ÿ ×•×™×× ×’ (15)</option>
                    </select>
                </div>
                
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     QUESTIONS DISPLAY AREA
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="quickQuestions" class="p-3 space-y-2"><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ×•×¨×™×“×™× ×ª×ª-×œ×©×•× ×™×™× (Sublingual) ×›×”×™× ××•×–×›×¨×™×, ×•××” ××©××¢×•×ª×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××‘×—×•×Ÿ ×“×•×¤×§ ×•×œ×©×•×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××ª×‘×˜× ×—×•×¡×¨ ×™×™×Ÿ (Yin Def) ×‘××¨××” ×”×œ×©×•×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××‘×—×•×Ÿ ×“×•×¤×§ ×•×œ×©×•×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">××” ×”×”×‘×“×œ ×‘××‘×—× ×” ×‘×™×Ÿ ×œ×©×•×Ÿ ×¡×’×•×œ×” (Purple) ×œ×‘×™×Ÿ ×œ×©×•×Ÿ ××“×•××” ×›×”×” (Crimson)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××‘×—×•×Ÿ ×“×•×¤×§ ×•×œ×©×•×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">(×œ× ×©×™×) ×”×× ×”××—×–×•×¨ ×”×—×•×“×©×™ ×©×œ×š ×¡×“×™×¨? ×”×× ××ª ×¡×•×‘×œ×ª ××›××‘×™× ×—×–×§×™× ××• PMS?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××™×–×•×Ÿ ×•×—×™×–×•×§ (××‘×•×’×¨×™×)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×× ×”×˜×™×¤×•×œ ×™×¦×œ×™×— ××¢×‘×¨ ×œ××¦×•×¤×”, ××™×š ×™×™×¨××• ×”×—×™×™× ×©×œ×š ×‘×¢×•×“ 3 ×—×•×“×©×™× ××”×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××™×–×•×Ÿ ×•×—×™×–×•×§ (××‘×•×’×¨×™×)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×‘××©×¤×˜ ××—×“, ××”×• ×”××ª×’×¨ ×”×‘×¨×™××•×ª×™ ×”××¨×›×–×™ ×©××•× ×¢ ×××š ×œ×”×¨×’×™×© ×‘××™×˜×‘×š ×›×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××™×–×•×Ÿ ×•×—×™×–×•×§ (××‘×•×’×¨×™×)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×œ×¤×™ ×”×§×•×œ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×‘×¢ ×”×‘×“×™×§×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×œ×¤×™ ××™×©×•×© ×”×‘×˜×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×‘×¢ ×”×‘×“×™×§×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××–×”×™× ×“×¤×•×¡×™ ×¢×•×“×£ ×œ×¢×•××ª ×—×•×¡×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×‘×¢ ×”×‘×“×™×§×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×‘××©×¤×˜ ××—×“, ××”×• ×”×§×•×©×™ ×”×‘×¨×™××•×ª×™ ×”×¢×™×§×¨×™ ×©××¤×¨×™×¢ ×œ××™×›×•×ª ×”×—×™×™× ×©×œ×š ×›×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×™×›×•×ª ×™××™× ×•××™×›×•×ª ×—×™×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××• ×”×§×¨×•×‘×™× ××œ×™×š ××‘×—×™× ×™× ×‘×©×™× ×•×™×™× ×‘×–×™×›×¨×•×Ÿ, ×‘×œ×‘×•×œ, ××• ×§×•×©×™ ×‘×¨×™×›×•×– ×œ××—×¨×•× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×™×›×•×ª ×™××™× ×•××™×›×•×ª ×—×™×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×—×•×•×” ×§×•×¦×¨ × ×©×™××” ××• ×”×ª×¢×™×™×¤×•×ª ××”×™×¨×” ×’× ×‘××××¥ ×§×œ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¨×™×›×•×ª ×™××™× ×•××™×›×•×ª ×—×™×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××™× ×˜×¨××§×¦×™×” ×—×‘×¨×ª×™×ª ×××•×©×›×ª ××¨×•×§× ×ª ××•×ª×š ××× ×¨×’×™×” ×× ×˜×œ×™×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×”×™×¨×•×ª ×•×—×•×¡×Ÿ ×× ×˜×œ×™</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×××‘×“/×ª ×¡×‘×œ× ×•×ª ××”×¨ ××• ××ª×¨×’×–/×ª ×‘×§×œ×•×ª ×›×©×“×‘×¨×™× ×œ× ××¡×ª×“×¨×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×”×™×¨×•×ª ×•×—×•×¡×Ÿ ×× ×˜×œ×™</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×¨×’×™×©/×” ×××•×“ ×œ×¨×¢×©×™× ×—×–×§×™×, ×”××•× ×™×, ××• ×œ××¦×‘×™ ×¨×•×— ×©×œ ×× ×©×™× ××—×¨×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×”×™×¨×•×ª ×•×—×•×¡×Ÿ ×× ×˜×œ×™</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×× ×”×˜×™×¤×•×œ ×™×›×•×œ ×œ×¢×–×•×¨ ×œ×š ×œ×”×ª××•×“×“ ×¢× ×¢×•× ×” ××—×ª ×‘×œ×‘×“ ×‘×¦×•×¨×” ××•×©×œ××ª â€“ ××™×–×• ×¢×•× ×” ×”×›×™ ×§×©×” ×œ×š ×›×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×§×¨×ª ××§×œ×™× ×¤× ×™××™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×—×•×•×” ×§×©×™×™ × ×©×™××” ××• ×”×—××¨×” ×‘××œ×¨×’×™×•×ª ×‘×¢×•× ×•×ª ××¢×‘×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×§×¨×ª ××§×œ×™× ×¤× ×™××™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××¨×’×™×©/×” ××™×•×‘×©/×ª ×‘××•×¤×Ÿ ×›×¨×•× ×™ ×œ××¨×•×ª ×©×ª×™×™×” ××¨×•×‘×”, ××• ×©××ª/×” ×¦×•×‘×¨/×ª × ×•×–×œ×™× ×‘×§×œ×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×§×¨×ª ××§×œ×™× ×¤× ×™××™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×“×¤×•×¡×™ ××™-×¤×•×¨×™×•×ª ×‘-TCM?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×”××™×©×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘-PMS?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×”××™×©×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×‘×—×™×œ×•×ª ×”×¨×™×•×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×”××™×©×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×œ×™×—×” ×‘×¨×™××•×ª ××©×¤×™×¢×” ×¢×œ ×”× ×©×™××”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”× ×©×™××”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××—×–×§×™× ××ª Wei Qi ×œ×× ×™×¢×ª ×”×¦×˜× × ×•×™×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”× ×©×™××”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×¡×™× ×•×¡×™×˜×™×¡ ×›×¨×•× ×™?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”× ×©×™××”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×—×•×œ×©×ª ×˜×—×•×œ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”×¢×™×›×•×œ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××–×•× ×•×ª ×§×¨×™× ×•× ××™× ×¤×•×’×¢×™× ×‘×¢×™×›×•×œ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”×¢×™×›×•×œ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘-IBS (×ª×¡××•× ×ª ×”××¢×™ ×”×¨×’×™×–)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ××¢×¨×›×ª ×”×¢×™×›×•×œ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××‘×œ ×•×¦×¢×¨ ××©×¤×™×¢×™× ×¢×œ ×”×¨×™××•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×¨×’×©×™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×˜×¨××•××” ×¨×’×©×™×ª × ×©××¨×ª ×‘×’×•×£ ×œ×¤×™ TCM?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×¨×’×©×™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×›×¢×¡ ×•×ª×¡×›×•×œ ×¤×•×’×¢×™× ×‘×›×‘×“?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×‘×¨×™××•×ª ×¨×’×©×™×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×“×™×§×•×¨ ××•×–×Ÿ ××¡×™×™×¢ ×‘×”×¤×¡×§×ª ×¢×™×©×•×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×“×™×§×•×¨ ××•×–×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×“×™×§×•×¨ ××•×–×Ÿ ××¡×™×™×¢ ×‘×”×¨×–×™×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×“×™×§×•×¨ ××•×–×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××ª×¨×™× × ×§×•×“×•×ª ×¨×’×™×©×•×ª ×‘××•×–×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×“×™×§×•×¨ ××•×–×Ÿ</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×× ×”×™×™×ª ×™×›×•×œ/×” ×œ×©× ×•×ª ×”×¨×’×œ ×ª×–×•× ×ª×™ ××—×“ ×‘×œ×‘×“ ×©×™×©×¤×¨ ××ª ×‘×¨×™××•×ª×š, ××” ×”×•× ×”×™×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×–× ×ª ×”×—×™×™× (×ª×–×•× ×”)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×‘××©×¤×˜ ××—×“, ××”×• ×”××ª×’×¨ ×”×ª×–×•× ×ª×™ ×”×’×“×•×œ ×‘×™×•×ª×¨ ×©×œ×š ×›×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×–× ×ª ×”×—×™×™× (×ª×–×•× ×”)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××›×™×œ×ª ×¡×œ×˜ ×’×“×•×œ ××• ×™×¨×§×•×ª ×—×™×™× ×’×•×¨××ª ×œ×š ×œ×›××‘×™ ×‘×˜×Ÿ ××• ×œ×™×¦×™××•×ª ×¨×›×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×–× ×ª ×”×—×™×™× (×ª×–×•× ×”)</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×“××’×” ×™×ª×¨×” ×¤×•×’×¢×ª ×‘×©×™× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×¤×¨×¢×•×ª ×©×™× ×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×”×ª×–×•× ×” ××©×¤×™×¢×” ×¢×œ ××™×›×•×ª ×”×©×™× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×¤×¨×¢×•×ª ×©×™× ×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×—×•×¡×¨ ×“× ×‘×œ×‘ ××©×¤×™×¢ ×¢×œ ×”×©×™× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×”×¤×¨×¢×•×ª ×©×™× ×”</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×—×•×œ×” ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×“×•×•×§× ×‘×¡×•×¤×™ ×©×‘×•×¢ ××• ×‘×—×•×¤×©×•×ª (×›×©××¤×œ×¡ ×”×œ×—×¥ ×™×•×¨×“)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×•×¡×Ÿ ×—×™×¡×•× ×™ ×•×”×ª××•×©×©×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ×—×©×•×£/×” ×‘××•×¤×Ÿ ×§×‘×•×¢ ×œ×× ×©×™× ×—×•×œ×™× (×¢×‘×•×“×” ×‘×‘×™×ª ×¡×¤×¨, ×‘×™×ª ×—×•×œ×™×)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×•×¡×Ÿ ×—×™×¡×•× ×™ ×•×”×ª××•×©×©×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××§×¤×™×“/×” ×¢×œ ×©×ª×™×™×” ××¡×¤×§×ª ×‘××”×œ×š ×”×™×•×, ××• ×©××ª/×” × ×•×˜×” ×œ×©×›×•×— ×œ×©×ª×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×•×¡×Ÿ ×—×™×¡×•× ×™ ×•×”×ª××•×©×©×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××•×¦×/×ª ××ª ×¢×¦××š ×—×¡×¨/×ª ×¡×‘×œ× ×•×ª ××• × ×•×˜×” ×œ××¦×‘×™ ×¨×•×— ×“×›×“×•×›×™×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×™×•× ×™×•×ª ×•××¨×™×›×•×ª ×™××™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××¨×’×™×©/×” ×™×¨×™×“×” ×‘×—×“×•×ª ×”×–×™×›×¨×•×Ÿ ×œ×˜×•×•×— ×§×¦×¨, ××• ×§×•×©×™ ×œ×©×œ×•×£ ××™×œ×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×™×•× ×™×•×ª ×•××¨×™×›×•×ª ×™××™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ××ª/×” ××¨×’×™×©/×” × ×™××•×œ ××• ×”×™×¨×“××•×ª ×©×œ ×”×’×¤×™×™× ×‘×–××Ÿ ×× ×•×—×” ××• ×‘×©×™× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—×™×•× ×™×•×ª ×•××¨×™×›×•×ª ×™××™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×™×¡×•×“ ×”××© ××©×¤×™×¢ ×¢×œ ×”×œ×‘ ×•×”××¢×™ ×”×“×§?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—××©×ª ×”×™×¡×•×“×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×™×¡×•×“ ×”××ª×›×ª ×§×©×•×¨ ×œ×¨×™××•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—××©×ª ×”×™×¡×•×“×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××–× ×™× ×™×¡×•×“ ×—×œ×© ×‘×××¦×¢×•×ª ×™×¡×•×“ ××—×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×—××©×ª ×”×™×¡×•×“×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×”×ª×–×•× ×” ××©×ª× ×” ×œ×¤×™ ×”×¢×•× ×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×˜×™×¤×•×œ ×œ×¤×™ ×¢×•× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××•× ×¢×™× ×”×¦×˜× × ×•×™×•×ª ×‘×ª×—×™×œ×ª ×”×¡×ª×™×•?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×˜×™×¤×•×œ ×œ×¤×™ ×¢×•× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘××œ×¨×’×™×•×ª ×¢×•× ×ª×™×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×˜×™×¤×•×œ ×œ×¤×™ ×¢×•× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×™×™×Ÿ ×•×™×× ×’ ××ª×‘×˜××™× ×‘×’×•×£?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×™×™×Ÿ ×•×™×× ×’</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×™×™×Ÿ ×•×™×× ×’ ××ª×§×™×™××™× ×™×—×“ ×•×‘××™×–×•×Ÿ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×™×™×Ÿ ×•×™×× ×’</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×™×™×Ÿ-×™×× ×’ ××©×¤×™×¢×™× ×¢×œ ×”×¨×’×©×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×™×™×Ÿ ×•×™×× ×’</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××‘×—×™× ×™× ×‘×™×Ÿ ××™×’×¨× ×” ×œ×›××‘ ×¨××© ××ª×—?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›××‘×™ ×¨××© ×•××™×’×¨× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××–×•×Ÿ ×•×©×ª×™×™×” ××©×¤×™×¢×™× ×¢×œ ×›××‘×™ ×¨××©?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›××‘×™ ×¨××© ×•××™×’×¨× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×›××‘ ×¨××© ×”××—××™×¨ ×¢× ××–×’ ××•×•×™×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›××‘×™ ×¨××© ×•××™×’×¨× ×•×ª</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ Dai Mai (×›×œ×™ ×”×—×’×•×¨×”) ×§×©×•×¨ ×œ×‘×¢×™×•×ª ×‘××•×ª× ×™×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›×œ×™ ×”×“× ×”××™×•×—×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ Yang Qiao Mai ××©×¤×™×¢ ×¢×œ ×”×©×™× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›×œ×™ ×”×“× ×”××™×•×—×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×”-Ren Mai (×›×œ×™ ×”×ª×¤×™×¡×”) ××©×¤×™×¢ ×¢×œ ×”×¤×•×¨×™×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×›×œ×™ ×”×“× ×”××™×•×—×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××‘×¦×¢×™× ×˜×›× ×™×§×ª ××•×§×¡×” ×™×©×™×¨×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××•×§×¡×” ×•×›×•×¡×•×ª ×¨×•×—</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××•×§×¡×” ××—×××ª ××ª ×”×’×•×£ ×•××’×¨×©×ª ×§×•×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××•×§×¡×” ×•×›×•×¡×•×ª ×¨×•×—</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×¦×™× ×•×Ÿ ×¢× ××•×§×¡×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××•×§×¡×” ×•×›×•×¡×•×ª ×¨×•×—</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×—×•×¡×¨ ×“× ××ª×‘×˜× ×‘×¢×•×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××—×œ×•×ª ×¢×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×œ×—×•×ª ×•×¨×¢×™×œ×•×ª ××©×¤×™×¢×™× ×¢×œ ×”×¢×•×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××—×œ×•×ª ×¢×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×“×¤×•×¡×™× ×©×•× ×™× ×©×œ ××§× ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××—×œ×•×ª ×¢×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×œ×™×—×” ×—×•×¡××ª ××ª ×¤×ª×—×™ ×”×œ×‘?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×œ×‘ ×•×›×œ×™ ×”×“×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××•× ×¢×™× ××—×œ×•×ª ×œ×‘ ×œ×¤×™ TCM?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×œ×‘ ×•×›×œ×™ ×”×“×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×—×¨×“×” ×¢× ×“×¤×™×§×•×ª ×œ×‘?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×œ×‘ ×•×›×œ×™ ×”×“×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×“× ×•×¦\'×™ ××©×¤×™×¢×™× ×¢×œ ×ª×¤×§×•×“ ×”×©×¨×™×¨×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×©×œ×“ ×•×”×©×¨×™×¨×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××‘×—×™× ×™× ×‘×™×Ÿ ×›××‘ ××¢×•×“×£ ×œ×›××‘ ××—×•×¡×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×©×œ×“ ×•×”×©×¨×™×¨×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×’×™×“ ××›×™×œ×¡ ×“×œ×§×ª×™?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">××¢×¨×›×ª ×”×©×œ×“ ×•×”×©×¨×™×¨×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××—×œ×™×˜×™× ×¢×œ ××™× ×•×Ÿ ×•×ª×“×™×¨×•×ª × ×˜×™×œ×”?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×•×¡×—××•×ª ×¦××—×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×¦×™× ×•×Ÿ ×¢× Ma Huang Tang?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×•×¡×—××•×ª ×¦××—×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××¢×¨×™×›×™× ××ª ××™×›×•×ª ×”×¦××—×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×•×¡×—××•×ª ×¦××—×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×‘×•×—×¨×™× × ×§×•×“×•×ª ×œ×¤×™ ×©×¢×•×Ÿ ×”××™×‘×¨×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×§×•×“×•×ª ×“×™×§×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××©×œ×‘×™× × ×§×•×“×•×ª ××§×•××™×•×ª ×¢× × ×§×•×“×•×ª ××¨×•×—×§×•×ª?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×§×•×“×•×ª ×“×™×§×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××©×ª××©×™× ×‘× ×§×•×“×•×ª Luo (××—×‘×¨×•×ª)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">× ×§×•×“×•×ª ×“×™×§×•×¨</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ Tuina (×¢×™×¡×•×™ ×¡×™× ×™) ××ª××™× ×œ×™×œ×“×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×™×œ×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××‘×—× ×™× ×™×œ×“×™× ×©×œ× ×™×›×•×œ×™× ×œ×ª××¨ ×ª×¡××™× ×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×™×œ×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××–×”×™× ×—×•×œ×©×ª ×˜×—×•×œ ××¦×œ ×™×œ×“×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×™×œ×“×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ×××–× ×™× ×˜×™×¤×•×œ ×‘×ª×¨×•×¤×•×ª ××¨×•×‘×•×ª (×¤×•×œ×™×¤××¨××§×•×œ×•×’×™×”)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×§×©×™×©×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××—×–×§×™× ××ª ×”×›×œ×™×•×ª ×œ××¨×™×›×•×ª ×™××™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×§×©×™×©×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×›×™×¦×“ ××˜×¤×œ×™× ×‘×“×™×›××•×Ÿ ×•×—×¨×“×” ×‘×’×™×œ ××‘×•×’×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×¨×¤×•××” ×¡×™× ×™×ª ×œ×§×©×™×©×™×</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">××™×œ×• ×˜×™×¤×•×œ×™× × ×™×¡×™×ª ×‘×¢×‘×¨ ×œ×‘×¢×™×” ×–×• (×¤×™×–×™×•×ª×¨×¤×™×”, ×›×™×¨×•×¤×¨×§×˜×™×§×”, ×”×–×¨×§×•×ª)?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×©×™×§×•× ×•×˜×™×¤×•×œ ×‘×›××‘</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">××™×œ×• ×ª×¨×•×¤×•×ª ××• ××©×›×›×™ ×›××‘×™× ××ª/×” × ×•×˜×œ/×ª ×‘××•×¤×Ÿ ×§×‘×•×¢, ×•××” ×¨××ª ×”×”×§×œ×” ×©×”× ××¡×¤×§×™×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×©×™×§×•× ×•×˜×™×¤×•×œ ×‘×›××‘</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×‘××©×¤×˜ ××—×“, ××”×™ ×”×¤×¦×™×¢×” ××• ×”×˜×¨××•××” ×”×¢×™×§×¨×™×ª ×©××‘×™××” ××•×ª×š ×œ×˜×™×¤×•×œ ×”×™×•×?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×©×™×§×•× ×•×˜×™×¤×•×œ ×‘×›××‘</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">××™×œ×• ×¡×™××¤×˜×•××™× ××‘×“×™×œ×™× ×‘×™×Ÿ ×—×•×¡×¨ ×¦\'×™ ×‘×˜×—×•×œ ×œ×‘×™×Ÿ ×—×•×¡×¨ ×™×× ×’ ×‘×˜×—×•×œ?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×ª×¡××•× ×•×ª ×–×× ×’-×¤×•</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">×”×× ×˜×™× ×™×˜×•×¡ ×”××•×¤×™×¢ ×‘×§×•×‘×¥ ×©×™×™×š ×œ×¡×™× ×“×¨×•× ×¢×•×“×£ ××• ×—×•×¡×¨?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×ª×¡××•× ×•×ª ×–×× ×’-×¤×•</div>
            </div><div class="quick-question" style="background: white; border: 2px solid rgb(229, 231, 235); border-radius: 8px; padding: 10px; margin: 8px 0px; cursor: pointer; transition: 0.2s;">
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">××” ×”×”×‘×“×œ ×‘××‘×—× ×” ×‘×™×Ÿ ×œ×™×—×”-××œ-×—×•××¨×™×ª ×œ×‘×™×Ÿ ×œ×™×—×”-××© ×‘×œ×‘?</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">×ª×¡××•× ×•×ª ×–×× ×’-×¤×•</div>
            </div></div>
                <div id="dynamicComponents" class="p-3 space-y-2"><div id="component-smart-search-module" class="component-wrapper"><!-- Separator Line -->
<div class="border-t-4 border-gray-300 my-2"></div>

<!-- Voice Search Header -->
<div class="p-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white">
    <h3 class="font-bold text-sm text-center">ğŸ¤ ×—×™×¤×•×© ×—×›×</h3>
    <p class="text-xs text-center opacity-90 mt-1">×—×™×¤×•×© × ×•×¡×£ ×‘××™×“×ª ×”×¦×•×¨×š</p>
</div>

<!-- Voice + Text Search Input -->
<div class="p-3 bg-white border-b-2 border-gray-200">
    <div class="relative">
        <input type="text" id="smartSearchInput" placeholder="ğŸ” ×”×§×œ×“ ××• ×œ×—×¥ ×¢×œ ×”××™×§×¨×•×¤×•×Ÿ..." class="w-full p-3 pr-12 border-2 border-purple-400 rounded-lg text-right text-sm focus:outline-none focus:border-purple-600 transition-all" dir="rtl" onkeypress="if(event.key===&#39;Enter&#39;) searchSmartInput()">
        <!-- Voice Button -->
        <button id="voiceSearchBtn" onclick="toggleVoiceSearch()" class="absolute left-2 top-2 w-10 h-10 bg-purple-500 hover:bg-purple-600 rounded-lg flex items-center justify-center transition-all" title="×œ×—×¥ ×œ×”×§×œ×˜×” ×§×•×œ×™×ª">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
            </svg>
        </button>
    </div>
    <!-- Voice Status Message -->
    <div id="voiceStatus" class="text-xs text-center mt-2 h-4 text-gray-500"></div>
</div>

<!-- Popular Keywords -->
<div class="p-3 bg-gradient-to-br from-blue-50 to-purple-50 border-b-2 border-gray-200">
    <div class="text-xs font-bold text-gray-600 mb-2 text-center">ğŸ’¡ ××™×œ×•×ª ××¤×ª×—</div>
    <div class="flex flex-wrap gap-2 justify-center">
        <span onclick="searchKeyword(&#39;×›××‘&#39;)" class="px-3 py-1 bg-white border-2 border-blue-300 text-blue-700 rounded-full text-xs font-bold cursor-pointer hover:bg-blue-100 transition-all">×›××‘</span>
        <span onclick="searchKeyword(&#39;×—×¨×“×”&#39;)" class="px-3 py-1 bg-white border-2 border-purple-300 text-purple-700 rounded-full text-xs font-bold cursor-pointer hover:bg-purple-100 transition-all">×—×¨×“×”</span>
        <span onclick="searchKeyword(&#39;×¢×™×™×¤×•×ª&#39;)" class="px-3 py-1 bg-white border-2 border-green-300 text-green-700 rounded-full text-xs font-bold cursor-pointer hover:bg-green-100 transition-all">×¢×™×™×¤×•×ª</span>
        <span onclick="searchKeyword(&#39;×©×™× ×”&#39;)" class="px-3 py-1 bg-white border-2 border-indigo-300 text-indigo-700 rounded-full text-xs font-bold cursor-pointer hover:bg-indigo-100 transition-all">×©×™× ×”</span>
        <span onclick="searchKeyword(&#39;×¢×™×›×•×œ&#39;)" class="px-3 py-1 bg-white border-2 border-orange-300 text-orange-700 rounded-full text-xs font-bold cursor-pointer hover:bg-orange-100 transition-all">×¢×™×›×•×œ</span>
        <span onclick="searchKeyword(&#39;×¢×•×¨&#39;)" class="px-3 py-1 bg-white border-2 border-pink-300 text-pink-700 rounded-full text-xs font-bold cursor-pointer hover:bg-pink-100 transition-all">×¢×•×¨</span>
    </div>
</div>

<!-- Alphabet Navigation -->
<div class="p-3 bg-gradient-to-br from-purple-50 to-pink-50 border-b-2 border-gray-200">
    <div class="text-xs font-bold text-gray-600 mb-2 text-center">ğŸ”¤ ×§×¤×•×¥ ×œ××•×ª</div>
    <div class="flex flex-wrap gap-1 justify-center" id="alphabetNav">
        <!-- Hebrew alphabet buttons generated by JavaScript -->
    <button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×">×</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×‘">×‘</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×’">×’</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×“">×“</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×”">×”</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×•">×•</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×–">×–</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×—">×—</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×˜">×˜</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×™">×™</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×›">×›</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×œ">×œ</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×">×</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: × ">× </button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×¡">×¡</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×¢">×¢</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×¤">×¤</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×¦">×¦</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×§">×§</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×¨">×¨</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×©">×©</button><button class="w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer" title="×—×™×¤×•×©: ×ª">×ª</button></div>
</div></div></div>
            </div>
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 ğŸ“š MODULE 2: 2,665 CLINICAL QUESTIONS
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            
            <div class="p-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white cursor-pointer hover:from-purple-700 hover:to-pink-700 transition-all" onclick="toggleModule2Panel()">
                <div class="flex items-center justify-between">
                    <h3 class="font-bold text-sm">ğŸ“š 589 ×©××œ×•×ª ×§×œ×™× ×™×•×ª - 32 ×§×˜×’×•×¨×™×•×ª ×§×œ×™× ×™×•×ª</h3>
                    <span id="module2Arrow" class="text-xl transition-transform">â–¼</span>
                </div>
                <p class="text-xs opacity-80 mt-1"><span style="font-weight: bold;">×œ×—×¥ ×œ×”×¦×’×ª ×©××œ×•×ª</span></p>
            </div>
            
            <!-- Collapsible Module 2 Questions Section -->
            <div id="module2Content" style="display: none;">
                <!-- Category Filter for Module 2 -->
                <div class="p-3">
                    <select id="module2CategoryFilter" onchange="filterModule2Questions()" class="w-full p-2 border-2 border-purple-300 rounded-lg text-right text-sm">
                        <option value="all">×›×œ ×”×§×˜×’×•×¨×™×•×ª (589 ×©××œ×•×ª)</option>
                        <!-- Categories will be loaded dynamically -->
                    </select>
                </div>
                
                <!-- Module 2 Questions Display Area (scrollable for infinite scroll) -->
                <div id="module2Questions" class="p-3 space-y-2 max-h-96 overflow-y-auto"></div>
            </div>
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 ğŸ› ï¸ SHARED UTILITIES - REMOVED DUPLICATE (now loaded from database)
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             ğŸ“‹ CENTER PANEL - MAIN QUERY & RESULTS AREA
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             
             âš ï¸ MODIFIABLE SECTION - Changes allowed with testing
             
             Contains:
             - Metrics bar (cost, timer, tokens)
             - Blue header (thin version)
             - 4 query boxes (3 regular + 1 voice)
             - Search results display area
             - Share buttons (PDF, Email, WhatsApp, Print)
             
             Current status: STABLE âœ…
             Future enhancements: Body diagrams, 50/50 split
             
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- CENTER PANEL: Main Dashboard -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Metrics Bar - REDESIGNED with Search Controls & Query Timer -->
            <div class="metrics-box flex justify-between items-center">
                <!-- LEFT: Metrics -->
                <div class="flex items-center space-x-reverse space-x-6">
                    <!-- Running Cost Counter -->
                    <div class="flex items-center bg-green-900/30 px-3 py-1 rounded-lg">
                        <span class="ml-2 text-green-400">ğŸ’°</span>
                        <span class="cost-display font-bold" id="totalCost">$0.0000</span>
                    </div>
                    
                    <!-- Query Execution Timer (NEW!) -->
                    <div class="flex items-center bg-blue-900/30 px-3 py-1 rounded-lg">
                        <span class="ml-2 text-blue-400">âš¡</span>
                        <span class="font-bold text-blue-300" id="queryTimer">0.00s</span>
                    </div>
                    
                    <!-- Token Count -->
                    <div class="flex items-center bg-purple-900/30 px-3 py-1 rounded-lg">
                        <span class="ml-2 text-purple-400">ğŸ”¢</span>
                        <span class="font-bold text-purple-300" id="tokenCount">0</span>
                        <span class="text-xs text-purple-400 mr-1">tokens</span>
                    </div>
                </div>
                
                <!-- CENTER: Golden Clock + Search Control Buttons -->
                <div class="flex items-center gap-3">
                    <!-- Golden Clock with Date/Time (Always Visible) -->
                    <div class="flex items-center golden-clock">
                        <span class="mr-2 clock-icon">ğŸ•</span>
                        <span id="sessionTimer" class="clock-time">12:39:28 â€¢ 05.02.2026</span>
                    </div>
                    
                    <!-- Search Control Buttons (Show during search) -->
                    <button id="pauseSearchBtn" onclick="pauseSearch()" class="search-control-btn bg-orange-600 hover:bg-orange-700 px-3 py-1.5 rounded-lg font-bold text-white text-sm transition hidden">
                        ğŸŸ¡ ×”×©×”×”
                    </button>
                    <button id="continueSearchBtn" onclick="continueSearch()" class="search-control-btn bg-green-600 hover:bg-green-700 px-3 py-1.5 rounded-lg font-bold text-white text-sm transition hidden">
                        ğŸŸ¢ ×”××©×š
                    </button>
                    <button id="stopSearchBtn" onclick="stopSearch()" class="search-control-btn bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-lg font-bold text-white text-sm transition hidden">
                        ğŸ”´ ×¢×¦×•×¨
                    </button>
                </div>
                
                <!-- RIGHT: Reset Button Only -->
                <div class="flex items-center">
                    <button onclick="resetSession()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition text-sm font-bold">
                        ğŸ”„ ×”×ª×—×œ ××—×“×©
                    </button>
                </div>
            </div>

            <!-- Header -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6">
                <h1 class="text-lg font-bold text-right">×§×œ×™× ×™×§×” ×œ××˜×¤×œ ×‘×“×™×§×•×¨ ×‘×¨×¤×•××” ×¡×™× ×™×ª ×‘×¡×™×•×¢ ×‘×™× ×” ××œ××›×•×ª×™×ª-×“"×¨ ×¨×•× ×™ ×¡×¤×™×¨ ××•××—×” ×œ×¨×¤×•××” ××©×œ×™××”</h1>
            </div>

            <!-- Main Content Area -->
            <div class="flex-1 overflow-y-auto p-6">
                <!-- Multi-Query System -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-sm text-gray-600">×¢×“ 3 ×©××œ×•×ª ×‘×‘×ª ××—×ª</span>
                        <label class="block text-lg font-bold">ğŸ” ×—×™×¤×•×© ×¨×‘-×©××œ×•×ª</label>
                    </div>

                    <div class="space-y-3">
                        <div class="query-box" id="queryBox1">
                            <label class="block text-sm font-semibold text-gray-700 mb-2 text-right">×©××œ×” 1 (×—×•×‘×”)</label>
                            <input type="text" id="searchInput1" placeholder="×ª×¡××™×Ÿ ××• ××¦×‘ ×¢×™×§×¨×™..." class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-right" dir="rtl" oninput="updateQueryBox(1)">
                        </div>

                        <div class="query-box" id="queryBox2">
                            <label class="block text-sm font-semibold text-gray-700 mb-2 text-right">×©××œ×” 2 (××•×¤×¦×™×•× ×œ×™)</label>
                            <input type="text" id="searchInput2" placeholder="×ª×¡××™×Ÿ × ×•×¡×£ ××• ××¦×‘ ×§×©×•×¨..." class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-right" dir="rtl" oninput="updateQueryBox(2)">
                        </div>

                        <div class="query-box" id="queryBox3">
                            <label class="block text-sm font-semibold text-gray-700 mb-2 text-right">×©××œ×” 3 (××•×¤×¦×™×•× ×œ×™)</label>
                            <input type="text" id="searchInput3" placeholder="×ª×¡××™×Ÿ ×©×œ×™×©×™ ××• × ×§×•×“×ª ×“×™×§×•×¨..." class="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-right" dir="rtl" oninput="updateQueryBox(3)">
                        </div>

                        <div class="query-box" id="queryBox4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2 text-right">ğŸ¤ ×©××œ×” ×—×•×¤×©×™×ª (×˜×§×¡×˜ ××• ×§×•×œ)</label>
                            <div class="flex gap-2">
                                <input type="text" id="searchInput4" placeholder="×”×§×œ×“ ×©××œ×” ×—×•×¤×©×™×ª ××• ×œ×—×¥ ×¢×œ ×”××™×§×¨×•×¤×•×Ÿ..." class="flex-1 p-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-right" dir="rtl" oninput="updateQueryBox(4)">
                                <button onclick="startVoiceInput(4)" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition">
                                    ğŸ¤
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-4">
                        <button onclick="clearAllQueries()" class="px-6 py-4 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-bold transition">
                            × ×§×” ×”×›×œ
                        </button>
                        <button onclick="performMultiQuery()" class="run-query-button flex-1 px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-black hover:from-blue-700 hover:to-indigo-700 transition text-xl shadow-lg">
                            ğŸ” ×”×¨×¥ ×—×™×¤×•×©
                        </button>
                        <button id="pauseButton" onclick="togglePause()" class="pause-button hidden px-6 py-4 rounded-xl transition">
                            â¸ï¸ ×”×©×”×”
                        </button>
                    </div>
                </div>

                <!-- Active Queries Display -->
                <div id="activeQueries" class="mb-6"></div>

                <!-- Report Options -->
                <div id="reportOptions" class="mb-6 hidden">
                    <div class="p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                        <h4 class="font-bold mb-3 text-right">ğŸ“Š ×¨××ª ×¤×™×¨×•×˜ ×”×“×•×—:</h4>
                        <div class="flex gap-4 justify-end">
                            <label class="flex items-center cursor-pointer">
                                <span class="ml-2">ğŸ“„ ×“×•×— ××¤×•×¨×˜ ××œ×</span>
                                <input type="radio" name="reportDetail" value="full" checked="" onchange="toggleReportDetail()" class="ml-2">
                            </label>
                            <label class="flex items-center cursor-pointer">
                                <span class="ml-2">ğŸ“ × ×•×©××™× ×§×¦×¨×™×</span>
                                <input type="radio" name="reportDetail" value="short" onchange="toggleReportDetail()" class="ml-2">
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Search Results -->
                <div id="searchResults" class="mt-6"></div>

                <!-- Share Buttons -->
                <div id="shareButtons" class="mt-6 hidden">
                    <div class="flex flex-wrap gap-3">
                        <button onclick="ExportModule.show({title: &#39;×™×™×¦×•× ×“×•×´×— AI&#39;, subject: &#39;×“×•×´×— ××‘×—×•×Ÿ TCM&#39;})" class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:opacity-90 text-white px-6 py-3 rounded-lg font-semibold transition">
                            ğŸ“¤ ×™×™×¦×•× ×“×•"×—
                        </button>
                        <button onclick="ExportModule.print()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition">
                            ğŸ–¨ï¸ ×”×“×¤×¡
                        </button>
                        <button onclick="ExportModule.whatsapp(&#39;×“×•×´×— ××‘×—×•×Ÿ TCM&#39;)" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition">
                            ğŸ’¬ ×•×•××˜×¡××¤
                        </button>
                    </div>
                </div>

                <!-- Fallback -->
                <div id="fallbackBrowser" class="hidden mt-6 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl">
                    <div class="flex items-start mb-3">
                        <div class="text-right flex-1">
                            <h4 class="font-bold text-orange-800">âš ï¸ ×—×™×¤×•×© ×—×™×¦×•× ×™ ×‘×¨×©×ª</h4>
                            <p class="text-sm text-orange-700">×œ× × ××¦××• ×ª×•×¦××•×ª ×‘×××’×¨ ×”×™×“×¢ ×”×××•××ª ×©×œ×š. ××—×¤×© ×‘××§×•×¨×•×ª ×¦×™×‘×•×¨×™×™×...</p>
                            <p class="text-xs text-orange-600 mt-1">
                                <strong>××–×”×¨×”:</strong> ×ª×•×¦××•×ª ×××§×•×¨×•×ª ××™× ×˜×¨× ×˜ ×—×™×™×‘×•×ª ×œ×”×™×‘×“×§ ×‘×§×¤×™×“×” ×¢×œ ×™×“×™ ×”××˜×¤×œ. ×œ× ××××’×¨ ×”×™×“×¢ ×”×××•××ª ×©×œ×š.
                            </p>
                        </div>
                    </div>
                    <div id="fallbackResults" class="bg-white p-4 rounded-lg border border-orange-300 mt-3 text-right"></div>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL: 3 Modules ONLY (appears on RIGHT side of screen) -->

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             ğŸ¯ RIGHT PANEL - CLINICAL MODULES (APPEARS ON SCREEN LEFT) âš ï¸
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             
             ğŸ”’ PROTECTED SECTION - DO NOT MODIFY WITHOUT PERMISSION
             
             Contains:
             - DR Roni Points (341 acupuncture points)
             - Zang-Fu Syndromes (11 syndromes)
             - Clinical Diagnosis (52 symptom questions)
             - Pulse & Tongue Gallery
             - Yin-Yang Assessment
             - Training Syllabus
             
             Current status: WORKING PERFECTLY âœ…
             Last modified: [BASELINE - DO NOT TOUCH]
             
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="right-panel bg-gray-50 border-l">
            <div class="p-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white sticky top-0 z-10">
                <h3 class="font-bold text-sm text-right">ğŸ¯ ××•×“×•×œ×™× ×§×œ×™× ×™×™×</h3>
            </div>
            
            <!-- Module 1: DR Roni Points Database (341 Points) -->
            <div class="p-4 bg-gradient-to-br from-blue-500 to-indigo-600 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>ğŸ“</span>
                    <span>× ×§×•×“×•×ª ×“×™×§×•×¨</span>
                </h4>
                <p class="text-white text-xs text-center mb-3 opacity-90">341 × ×§×•×“×•×ª â€¢ 14 ××¨×™×“×™×× ×™×</p>
                <button onclick="toggleDrRoniPoints()" class="block w-full bg-white text-blue-600 font-bold py-2 px-3 rounded-lg hover:bg-blue-50 transition text-center text-sm">
                    <span id="drRoniToggle">ğŸ”½</span> ×¤×ª×— ×××’×¨
                </button>
                <div id="drRoniDropdown" class="mt-3 space-y-1 max-h-48 overflow-y-auto hidden">
                    <div class="text-white text-center text-xs py-3">×˜×•×¢×Ÿ × ×§×•×“×•×ª...</div>
                </div>
            </div>

            <!-- NEW: Body Images Gallery (17 Anatomical Images) -->
            <div class="p-4 bg-gradient-to-br from-green-500 to-teal-600 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>ğŸ“·</span>
                    <span>×’×œ×¨×™×™×ª ×ª××•× ×•×ª</span>
                </h4>
                <p class="text-white text-xs text-center mb-1 opacity-90">×—×œ×§×™ ×’×•×£ ×¢× × ×§×•×“×•×ª ×“×™×§×•×¨</p>
                <p class="text-white text-xs text-center mb-3 opacity-90">17 ×ª××•× ×•×ª ×× ×˜×•××™×•×ª</p>
                <button onclick="BodyImages.show()" class="block w-full bg-white text-green-600 font-bold py-2 px-3 rounded-lg hover:bg-green-50 transition text-center text-sm">
                    ğŸ”½ ×¤×ª×— ×’×œ×¨×™×”
                </button>
            </div>

            <!-- Module 2: Zang-Fu Syndromes (11 Syndromes) -->
            <div class="p-4 bg-gradient-to-br from-purple-500 to-pink-600 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>ğŸ¥</span>
                    <span>×ª×¡××•× ×•×ª ×–×× ×’-×¤×•</span>
                </h4>
                <p class="text-white text-xs text-center mb-3 opacity-90">11 ×ª×¡××•× ×•×ª â€¢ ××‘×—×•×Ÿ AI</p>
                <button onclick="toggleZangFuSyndromes()" class="block w-full bg-white text-purple-600 font-bold py-2 px-3 rounded-lg hover:bg-purple-50 transition text-center text-sm">
                    <span id="zangfuToggle">ğŸ”½</span> ×¤×ª×— ×ª×¡××•× ×•×ª
                </button>
                <div id="zangfuDropdown" class="mt-3 space-y-1 max-h-48 overflow-y-auto hidden">
                    <div class="text-white text-center text-xs py-3">×˜×•×¢×Ÿ ×ª×¡××•× ×•×ª...</div>
                </div>
            </div>

            <!-- COMBINED: Yin-Yang Comprehensive Module -->
            <div class="p-4 bg-gradient-to-br from-purple-600 to-indigo-700 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>â˜¯ï¸</span>
                    <span>×™×™×Ÿ-×™×× ×’ ××§×™×£</span>
                </h4>
                <p class="text-white text-xs text-center mb-3 opacity-90">××‘×—×•×Ÿ â€¢ ×”×¢×¨×›×” â€¢ × ×™×ª×•×—</p>
                <div class="flex flex-col gap-2">
                    <button onclick="toggleClinicalSymptoms()" class="w-full bg-white text-purple-600 font-bold py-2 rounded-lg hover:bg-purple-50 transition text-center text-sm">
                        <span id="clinicalToggle">ğŸ”½</span> ××‘×—×•×Ÿ ×§×œ×™× ×™ (52 ×©××œ×•×ª)
                    </button>
                    <div id="clinicalDropdown" class="mt-2 space-y-1 max-h-48 overflow-y-auto hidden bg-white/10 rounded-lg p-2">
                        <div class="text-white text-center text-xs py-3">×˜×•×¢×Ÿ ×©××œ×•×ª...</div>
                    </div>
                    <button onclick="showYinYang()" class="w-full bg-white text-indigo-600 font-bold py-2 rounded-lg hover:bg-indigo-50 transition text-center text-sm">
                        â˜¯ï¸ ×”×¢×¨×›×ª ×™×™×Ÿ-×™×× ×’ (11 ×©××œ×•×ª)
                    </button>
                    <button onclick="showYinYangResults()" class="w-full bg-white text-pink-600 font-bold py-2 rounded-lg hover:bg-pink-50 transition text-center text-sm">
                        ğŸ“Š × ×™×ª×•×— ×ª×•×¦××•×ª
                    </button>
                </div>
            </div>

            <!-- Module: Pulse & Tongue Gallery -->
            <div class="p-4 bg-gradient-to-br from-red-500 to-pink-600 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>ğŸ«€</span>
                    <span>×’×œ×¨×™×™×ª ×“×•×¤×§ ×•×œ×©×•×Ÿ</span>
                </h4>
                <p class="text-white text-xs text-center mb-3 opacity-90">×“×•×¤×§ â€¢ ×œ×©×•×Ÿ â€¢ ×ª××•× ×•×ª ×’×•×£</p>
                <div class="flex flex-col gap-2">
                    <button onclick="showPulseGallery()" class="w-full bg-white text-red-600 font-bold py-2 rounded-lg hover:bg-red-50 transition text-center text-sm">
                        ğŸ’— ×“×¤×•×¡×™ ×“×•×¤×§
                    </button>
                    <button onclick="showTongueGallery()" class="w-full bg-white text-pink-600 font-bold py-2 rounded-lg hover:bg-pink-50 transition text-center text-sm">
                        ğŸ‘… ×××¦××™ ×œ×©×•×Ÿ
                    </button>
                    <button onclick="BodyImages.showTongue();" class="w-full bg-white text-green-600 font-bold py-2 rounded-lg hover:bg-green-50 transition text-center text-sm">
                        ğŸ“· ×ª××•× ×ª ×œ×©×•×Ÿ
                    </button>
                </div>
            </div>

            <!-- Module TCM: Visual Tools (Meridian, Ear, Anatomy) -->
            <div class="p-4 bg-gradient-to-br from-cyan-500 to-blue-600 m-3 rounded-xl shadow-lg">
                <h4 class="text-white font-bold text-center mb-2 text-lg flex items-center justify-center gap-2">
                    <span>ğŸ¯</span>
                    <span>×›×œ×™ ×”×“××™×” TCM</span>
                </h4>
                <p class="text-white text-xs text-center mb-3 opacity-90">××¨×™×“×™×× ×™× â€¢ ××•×–×Ÿ â€¢ ×× ×˜×•××™×” â€¢ ×’×•×£</p>
                <div class="flex flex-col gap-2">
                    <button onclick="TCMVisuals.showMeridian()" class="w-full bg-white text-blue-600 font-bold py-2 rounded-lg hover:bg-blue-50 transition text-center text-sm">
                        ğŸŒŠ ××¤×ª ××¨×™×“×™×× ×™×
                    </button>
                    <button onclick="TCMVisuals.showEar()" class="w-full bg-white text-purple-600 font-bold py-2 rounded-lg hover:bg-purple-50 transition text-center text-sm">
                        ğŸ‘‚ ××¤×ª ××•×–×Ÿ
                    </button>
                    <button onclick="TCMVisuals.showAnatomy()" class="w-full bg-white text-red-600 font-bold py-2 rounded-lg hover:bg-red-50 transition text-center text-sm">
                        ğŸ¦´ ×©×›×‘×•×ª ×× ×˜×•××™×”
                    </button>
                    <button onclick="BodyImages.show()" class="w-full bg-white text-green-600 font-bold py-2 rounded-lg hover:bg-green-50 transition text-center text-sm">
                        ğŸ“· ×ª××•× ×•×ª ×’×•×£
                    </button>
                </div>
            </div>

            <!-- Module 4: Training Syllabus -->
            <div class="training-syllabus-box">
                <div class="training-header">
                    <div class="training-title" dir="rtl">
                        <span>ğŸ“</span>
                        <span>×¡×™×œ×‘×•×¡ ××§×¦×•×¢×™</span>
                    </div>
                    <span class="training-toggle-icon" onclick="toggleTrainingSyllabus()">
                        ğŸ”½
                    </span>
                </div>
                
                <div class="training-stats" dir="rtl">
                    <div style="font-weight: bold;">ğŸ“š 48 × ×•×©××™ ×œ×™××•×“</div>
                    <div style="font-size: 11px; opacity: 0.9; margin-top: 5px;">
                        23 ×“×•×¤×§ â€¢ 20 ×œ×©×•×Ÿ â€¢ 5 ××œ×× ×˜×™×
                    </div>
                </div>
                
                <button class="training-button" onclick="openTrainingFullView()">
                    ×¤×ª×— ××“×¨×™×š ××œ×
                </button>
                
                <div class="training-content" id="trainingContent">
                    <!-- Filters -->
                    <div class="training-filters">
                        <button class="training-filter-btn active" onclick="filterTraining(&#39;all&#39;)">
                            ×”×›×œ
                        </button>
                        <button class="training-filter-btn" onclick="filterTraining(&#39;pulse&#39;)">
                            ×“×•×¤×§
                        </button>
                        <button class="training-filter-btn" onclick="filterTraining(&#39;tongue&#39;)">
                            ×œ×©×•×Ÿ
                        </button>
                        <button class="training-filter-btn" onclick="filterTraining(&#39;elements&#39;)">
                            ××œ×× ×˜×™× â­
                        </button>
                    </div>
                    
                    <!-- Search -->
                    <input type="text" class="training-search-box" id="trainingSearchBox" placeholder="×—×¤×© ×‘××“×¨×™×š..." oninput="searchTraining()">
                    
                    <!-- Loading -->
                    <div id="trainingLoading" style="text-align: center; padding: 20px; color: #666;">
                        <div style="font-size: 28px;">ğŸ”„</div>
                        <div style="margin-top: 10px; font-size: 12px;">×˜×•×¢×Ÿ...</div>
                    </div>
                    
                    <!-- Results -->
                    <div id="trainingResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script>

        const SUPABASE_URL = 'https://iqfglrwjemogoycbzltt.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlxZmdscndqZW1vZ295Y2J6bHR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1NTM4ODMsImV4cCI6MjA4NDEyOTg4M30.DTREv3efs86_HzESyWm-7480ImfEVgC6T-xBdS6A2F8';
        
        // ğŸ”’ SECURE: AI calls go through Supabase Edge Function (API key stored in Supabase Secrets)
        const EDGE_FUNCTION_URL = 'https://iqfglrwjemogoycbzltt.supabase.co/functions/v1/claude-ai';
        
        // Claude 3.5 Sonnet Pricing (February 2026)
        const INPUT_TOKEN_COST = 0.000003;    // $3.00 per 1M tokens
        const OUTPUT_TOKEN_COST = 0.000015;   // $15.00 per 1M tokens
        
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // =====================================================
        // MODULAR COMPONENT LOADER SYSTEM
        // =====================================================
        class ComponentLoader {
            constructor(supabaseClient) {
                this.supabase = supabaseClient;
                this.loadedComponents = new Map();
            }

            async loadPanelComponents(panelLocation, targetElementId) {
                try {
                    console.log(`ğŸ”„ Loading components for ${panelLocation}...`);
                    
                    const { data: components, error } = await this.supabase
                        .from('page_components')
                        .select('*')
                        .eq('panel_location', panelLocation)
                        .eq('is_active', true)
                        .order('display_order', { ascending: true });

                    if (error) throw error;
                    if (!components || components.length === 0) {
                        console.log(`â„¹ï¸ No active components for ${panelLocation}`);
                        return;
                    }

                    const targetElement = document.getElementById(targetElementId);
                    if (!targetElement) {
                        console.error(`âŒ Target element #${targetElementId} not found`);
                        return;
                    }

                    for (const component of components) {
                        await this.loadComponent(component, targetElement);
                    }

                    console.log(`âœ… Loaded ${components.length} components for ${panelLocation}`);
                    
                } catch (error) {
                    console.error('âŒ Error loading components:', error);
                }
            }

            async loadComponent(component, targetElement) {
                try {
                    console.log(`ğŸ“¦ Loading component: ${component.component_name}`);

                    const wrapper = document.createElement('div');
                    wrapper.id = `component-${component.component_name}`;
                    wrapper.className = 'component-wrapper';
                    wrapper.innerHTML = component.html_structure;

                    if (component.css_styles) {
                        const styleElement = document.createElement('style');
                        styleElement.id = `styles-${component.component_name}`;
                        styleElement.textContent = component.css_styles;
                        document.head.appendChild(styleElement);
                    }

                    targetElement.appendChild(wrapper);

                    if (component.javascript_code) {
                        const executeJS = new Function('supabaseClient', component.javascript_code);
                        await executeJS(this.supabase);
                    }

                    this.loadedComponents.set(component.component_name, component);
                    console.log(`âœ… Component loaded: ${component.component_name}`);

                } catch (error) {
                    console.error(`âŒ Error loading component ${component.component_name}:`, error);
                }
            }
        }

        console.log('âœ… ComponentLoader class initialized');
        
        // ============================================================================
        // ============================================================================
        
        const queryCache = new Map();
        const MAX_CACHE_SIZE = 50; // Store last 50 unique queries
        
        const auditLog = [];
        
        /**
         * Check if we've answered this query before (exact match)
         */
        function getCachedResponse(queries) {
            const cacheKey = queries.sort().join('|').toLowerCase();
            const cached = queryCache.get(cacheKey);
            
            if (cached) {
                cached.hits = (cached.hits || 0) + 1;
                cached.lastAccessed = new Date();
                return cached.response;
            }
            
            return null;
        }
        
        /**
         * Save response to cache for future use
         */
        function cacheResponse(queries, response, results) {
            const cacheKey = queries.sort().join('|').toLowerCase();
            
            if (queryCache.size >= MAX_CACHE_SIZE) {
                const oldestKey = Array.from(queryCache.keys())[0];
                queryCache.delete(oldestKey);
            }
            
            queryCache.set(cacheKey, {
                response: response,
                results: results,
                timestamp: new Date(),
                hits: 0,
                queries: queries
            });
            
        }
        
        /**
         * Categorize search results by safety priority
         */
        function categorizeResults(allResults) {
            const categories = {
                warnings: [],       // âš ï¸ Safety warnings - HIGHEST PRIORITY
                treatments: [],     // ğŸ¯ Treatment recommendations
                diagnostics: [],    // ğŸ” Diagnostic information
                education: [],      // ğŸ“š Educational content
                conflicts: []       // âš ï¸ Detected conflicts
            };
            
            allResults.forEach(result => {
                const table = result._source_table;
                
                if (table === 'acupuncture_point_warnings') {
                    categories.warnings.push(result);
                }
                else if (table.includes('acupuncture') || table.includes('protocol')) {
                    categories.treatments.push(result);
                }
                else if (table.includes('pulse') || table.includes('tongue') || table.includes('syndrome')) {
                    categories.diagnostics.push(result);
                }
                else if (table === 'qa_knowledge_base' || table === 'bible_rag_training_syllabus_20260129') {
                    categories.education.push(result);
                }
            });
            
            return categories;
        }
        
        /**
         * Detect conflicts between treatments and warnings
         */
        function detectConflicts(categories) {
            const conflicts = [];
            
            categories.treatments.forEach(treatment => {
                const treatmentPoints = extractPointCodes(treatment);
                
                categories.warnings.forEach(warning => {
                    const warningPoints = extractPointCodes(warning);
                    
                    const overlap = treatmentPoints.filter(p => warningPoints.includes(p));
                    
                    if (overlap.length > 0) {
                        conflicts.push({
                            type: 'point_warning_conflict',
                            points: overlap,
                            treatment: treatment,
                            warning: warning,
                            severity: 'CRITICAL',
                            message: `× ×§×•×“×ª ×”×˜×™×¤×•×œ ${overlap.join(', ')} ××•×¤×™×¢×” ×’× ×‘××–×”×¨×•×ª ×‘×˜×™×—×•×ª!`
                        });
                    }
                });
            });
            
            categories.conflicts = conflicts;
            return conflicts;
        }
        
        /**
         * Extract point codes from result (e.g., "LI4", "ST36", "GB20")
         */
        function extractPointCodes(result) {
            const points = [];
            const text = JSON.stringify(result).toUpperCase();
            
            const pointRegex = /\b[A-Z]{2,3}\d{1,2}\b/g;
            const matches = text.match(pointRegex);
            
            if (matches) {
                points.push(...matches);
            }
            
            if (result.point_code && typeof result.point_code === 'string') {
                points.push(result.point_code.toUpperCase());
            }
            if (result.point_number && typeof result.point_number === 'string') {
                points.push(result.point_number.toUpperCase());
            }
            if (result.acupoint_code && typeof result.acupoint_code === 'string') {
                points.push(result.acupoint_code.toUpperCase());
            }
            
            if (result.acupoint_codes && Array.isArray(result.acupoint_codes)) {
                points.push(...result.acupoint_codes.map(code => String(code).toUpperCase()));
            }
            
            return [...new Set(points)]; // Remove duplicates
        }
        
        /**
         * Add entry to audit log (for legal compliance)
         */
        function addToAuditLog(entry) {
            entry.timestamp = new Date().toISOString();
            entry.sessionId = sessionStorage.getItem('sessionId') || 'anonymous';
            auditLog.push(entry);
            
            if (auditLog.length > 100) {
                auditLog.shift();
            }
            
        }
        
        let formulasData = [];
        let acupointsData = [];
        let imagesData = [];
        let currentQueries = [];
        let lastSearchResults = '';
        let usedCSVs = new Set();
        
        let sessionStartTime = Date.now();
        let totalInputTokens = 0;
        let totalOutputTokens = 0;
        let totalCost = 0;
        let totalAssets = 0;
        let successfulQueries = 0;
        let totalQueries = 0;
        // TIMER VARIABLES (NOW DECLARED IN timer-metrics.js)
        // let timerInterval;
        // let queryStartTime = 0;
        // let queryEndTime = 0;
        // let queryTimerInterval = null;
        let isSearching = false;
        
        let isPaused = false;
        let searchAbortController = null;

        // ===== LOAD QUESTIONS FROM SUPABASE WITH PAGINATION =====
        let hebrewQuestions = [];
        let questionsPerCategory = 3; // Show only 3 per category
        let currentCategory = 'all';
        let currentOffset = 0;
        
        // Module 1 specific variables (global for toggle function)
        let module1CurrentCategory = 'all';
        let module1CurrentOffset = 0;
        let module1IsExpanded = false;
        let module1QuestionsLoaded = false;

        // MODULE 2 STATE VARIABLES (global for toggle function)
        let module2CurrentCategory = 'all';
        let module2CurrentOffset = 0;
        let module2IsExpanded = false;
        let module2QuestionsLoaded = false;
        let module2AllQuestionsLoaded = false;

        // ===== MODULE 1: TOGGLE PANEL FUNCTION =====
        async function toggleModule1Panel() {
            const content = document.getElementById('module1Content');
            const arrow = document.getElementById('module1Arrow');
            
            if (!content || !arrow) return;
            
            module1IsExpanded = !module1IsExpanded;
            
            if (module1IsExpanded) {
                // Show panel
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
                
                // Load questions on first expansion
                if (!module1QuestionsLoaded) {
                    console.log('ğŸ“¥ First time expanding - loading questions...');
                    await loadModule1Questions('all', 0);
                    module1QuestionsLoaded = true;
                }
            } else {
                // Hide panel
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // ===== MODULE 1: NEW APPROACH - CALLS SUPABASE RPC =====
        async function loadModule1Questions(category = 'all', offset = 0) {
            try {
                console.log('ğŸ“¥ Loading Module 1 from Supabase RPC:', category, offset);
                
                // ONE CALL TO SUPABASE RPC FUNCTION!
                const { data, error } = await supabaseClient.rpc('module1_get_complete', {
                    p_category: category,
                    p_offset: offset
                });
                
                if (error) throw error;
                
                console.log('âœ… Module 1 data received from Supabase:', data);
                displayModule1Questions(data);
                
                module1CurrentCategory = category;
                module1CurrentOffset = offset;
                
                return data;
            } catch (error) {
                console.error('âŒ Error loading Module 1:', error);
                alert('×©×’×™××” ×‘×˜×¢×™× ×ª ×©××œ×•×ª: ' + error.message);
                return null;
            }
        }
        
        // Display Module 1 questions
        function displayModule1Questions(data) {
            const container = document.getElementById('quickQuestions');
            if (!container) {
                console.error('âŒ Container #quickQuestions not found!');
                return;
            }
            
            container.innerHTML = ''; // Clear
            
            if (data.mode === 'all_categories') {
                // Show 3 from each category
                let totalShown = 0;
                data.questions.forEach(catData => {
                    if (catData.questions) {
                        catData.questions.forEach(q => {
                            const div = createModule1QuestionDiv(q.question_hebrew, catData.category_hebrew);
                            container.appendChild(div);
                            totalShown++;
                        });
                    }
                });
                console.log(`âœ… Showing ${totalShown} questions from ${data.total_categories} categories`);
                
            } else {
                // Show 3 from one category
                if (data.questions && data.questions.length > 0) {
                    data.questions.forEach(q => {
                        const div = createModule1QuestionDiv(q.question_hebrew, data.category);
                        container.appendChild(div);
                    });
                    
                    // Add "Load More" button if needed
                    if (data.has_more) {
                        const loadMore = document.createElement('div');
                        loadMore.style.cssText = 'background: #dbeafe; color: #1e40af; padding: 10px; margin: 10px 0; text-align: center; cursor: pointer; border-radius: 8px; font-weight: bold; border: 2px dashed #60a5fa;';
                        loadMore.innerHTML = 'ğŸ“¥ ×˜×¢×Ÿ ×¢×•×“ 3 ×©××œ×•×ª';
                        loadMore.onclick = () => loadModule1Questions(data.category, module1CurrentOffset + 3);
                        container.appendChild(loadMore);
                    }
                    
                    console.log(`âœ… Showing ${data.questions.length} questions from "${data.category}"`);
                } else {
                    container.innerHTML = '<div style="text-align:center;padding:20px;color:#6b7280;">××™×Ÿ ×©××œ×•×ª ×‘×§×˜×’×•×¨×™×” ×–×•</div>';
                }
            }
        }
        
        // Create question element for Module 1
        function createModule1QuestionDiv(questionText, category) {
            const div = document.createElement('div');
            div.className = 'quick-question';
            div.style.cssText = 'background: white; border: 2px solid #e5e7eb; border-radius: 8px; padding: 10px; margin: 8px 0; cursor: pointer; transition: all 0.2s;';
            
            div.innerHTML = `
                <div style="font-weight: 600; font-size: 13px; color: #1f2937; margin-bottom: 4px;">${questionText}</div>
                <div style="font-size: 11px; color: #6b7280; background: #f3f4f6; display: inline-block; padding: 2px 8px; border-radius: 4px;">${category}</div>
            `;
            
            // Click to paste!
            div.onclick = function() {
                pasteModule1ToQueryBox(questionText);
            };
            
            div.onmouseover = function() {
                this.style.background = '#e0f2fe';
                this.style.borderColor = '#0ea5e9';
            };
            
            div.onmouseout = function() {
                this.style.background = 'white';
                this.style.borderColor = '#e5e7eb';
            };
            
            return div;
        }
        
        // Paste Module 1 question into query box
        function pasteModule1ToQueryBox(text) {
            console.log('ğŸ“ Pasting Module 1 question:', text);
            
            const boxes = ['searchInput1', 'searchInput2', 'searchInput3', 'searchInput4'];
            
            // FIX #1: Check for duplicates first
            for (let boxId of boxes) {
                const input = document.getElementById(boxId);
                if (input && input.value.trim() === text.trim()) {
                    alert('âŒ ×©××œ×” ×–×• ×›×‘×¨ ×§×™×™××ª ×‘×ª×™×‘×ª ×—×™×¤×•×©!\n×× × ×‘×—×¨ ×©××œ×” ××—×¨×ª.');
                    console.log('âš ï¸ Duplicate prevented:', text);
                    return; // Prevent duplicate
                }
            }
            
            // Find first empty box
            for (let i = 0; i < boxes.length; i++) {
                const input = document.getElementById(boxes[i]);
                
                if (input && !input.value.trim()) {
                    input.value = text;
                    
                    if (typeof updateQueryBox === 'function') {
                        updateQueryBox(i + 1);
                    }
                    
                    const box = document.getElementById('queryBox' + (i + 1));
                    if (box) {
                        box.style.background = '#dbeafe';
                        setTimeout(() => { box.style.background = ''; }, 500);
                    }
                    
                    console.log(`âœ… Module 1 question pasted into Box ${i + 1}`);
                    return;
                }
            }
            
            alert('×›×œ ×ª×™×‘×•×ª ×”×©××œ×•×ª ××œ××•×ª!');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ¤ VOICE SEARCH + KEYWORDS + ALPHABET NAVIGATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // OLD VOICE SEARCH CODE - COMMENTED OUT (NOW IN voice-search-fixed.js)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        /*
        // VOICE SEARCH VARIABLES (NOW DECLARED IN voice-search.js)
        // let voiceRecognition = null;
        // let isVoiceListening = false;
        
        // Initialize voice recognition
        function initVoiceSearch() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                voiceRecognition = new SpeechRecognition();
                voiceRecognition.lang = 'he-IL'; // Hebrew
                voiceRecognition.continuous = false;
                voiceRecognition.interimResults = false;
                
                voiceRecognition.onstart = function() {
                    isVoiceListening = true;
                    const btn = document.getElementById('voiceSearchBtn');
                    const input = document.getElementById('smartSearchInput');
                    const status = document.getElementById('voiceStatus');
                    
                    if (btn) btn.classList.add('listening');
                    if (input) input.classList.add('listening');
                    if (status) status.textContent = 'ğŸ¤ ××§×©×™×‘...';
                    
                    console.log('ğŸ¤ Voice recognition started');
                };
                
                voiceRecognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    const input = document.getElementById('smartSearchInput');
                    const status = document.getElementById('voiceStatus');
                    
                    if (input) input.value = transcript;
                    if (status) status.textContent = `âœ… ×”×‘× ×ª×™: "${transcript}"`;
                    
                    console.log('ğŸ¤ Transcribed:', transcript);
                    
                    // Automatically search after 500ms
                    setTimeout(() => {
                        searchSmartInput();
                    }, 500);
                };
                
                voiceRecognition.onerror = function(event) {
                    console.error('âŒ Voice recognition error:', event.error);
                    const status = document.getElementById('voiceStatus');
                    if (status) {
                        if (event.error === 'not-allowed') {
                            status.textContent = 'âŒ × × ×œ××¤×©×¨ ×’×™×©×” ×œ××™×§×¨×•×¤×•×Ÿ';
                        } else {
                            status.textContent = 'âŒ ×©×’×™××” - × ×¡×” ×©×•×‘';
                        }
                    }
                };
                
                voiceRecognition.onend = function() {
                    isVoiceListening = false;
                    const btn = document.getElementById('voiceSearchBtn');
                    const input = document.getElementById('smartSearchInput');
                    
                    if (btn) btn.classList.remove('listening');
                    if (input) input.classList.remove('listening');
                    
                    console.log('ğŸ¤ Voice recognition ended');
                };
                
                console.log('âœ… Voice search initialized');
            } else {
                console.log('âŒ Voice recognition not supported in this browser');
                const status = document.getElementById('voiceStatus');
                if (status) status.textContent = '×–××™×Ÿ ×¨×§ ×‘-Chrome';
            }
        }
        // Make globally accessible
        window.initVoiceSearch = initVoiceSearch;
        
        // Toggle voice search on/off
        function toggleVoiceSearch() {
            if (!voiceRecognition) {
                initVoiceSearch();
            }
            
            if (!voiceRecognition) {
                alert('×—×™×¤×•×© ×§×•×œ×™ ×–××™×Ÿ ×¨×§ ×‘×“×¤×“×¤×Ÿ Chrome');
                return;
            }
            
            if (isVoiceListening) {
                voiceRecognition.stop();
            } else {
                try {
                    voiceRecognition.start();
                } catch (error) {
                    console.error('Error starting voice:', error);
                    const status = document.getElementById('voiceStatus');
                    if (status) status.textContent = 'âŒ ×œ× × ×™×ª×Ÿ ×œ×”×¤×¢×™×œ ××™×§×¨×•×¤×•×Ÿ';
                }
            }
        }
        
        // Search from smart input (voice or typed)
        async function searchSmartInput() {
            const input = document.getElementById('smartSearchInput');
            if (!input) return;
            
            const query = input.value.trim();
            if (!query) {
                alert('× × ×œ×”×–×™×Ÿ ×©××™×œ×ª×”');
                return;
            }
            
            console.log('ğŸ” Smart search:', query);
            
            // Paste query into first available query box
            const boxes = ['searchInput1', 'searchInput2', 'searchInput3', 'searchInput4'];
            
            for (let i = 0; i < boxes.length; i++) {
                const box = document.getElementById(boxes[i]);
                if (box && !box.value.trim()) {
                    box.value = query;
                    
                    // Update box styling
                    if (typeof updateQueryBox === 'function') {
                        updateQueryBox(i + 1);
                    }
                    
                    // Flash effect
                    const boxDiv = document.getElementById('queryBox' + (i + 1));
                    if (boxDiv) {
                        boxDiv.style.background = '#dbeafe';
                        setTimeout(() => { boxDiv.style.background = ''; }, 500);
                    }
                    
                    console.log(`âœ… Pasted into Box ${i + 1}`);
                    
                    // Clear voice status after pasting
                    const status = document.getElementById('voiceStatus');
                    if (status) {
                        setTimeout(() => {
                            status.textContent = '';
                        }, 2000);
                    }
                    
                    return;
                }
            }
            
            alert('×›×œ ×ª×™×‘×•×ª ×”×©××œ×•×ª ××œ××•×ª! × ×§×” ×ª×™×‘×” ××• ×”×¤×¢×œ ×—×™×¤×•×©.');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MODULE 2: TOP VOICE KEYWORDS (NOW IN voice-search.js)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // const module2VoiceKeywords = [
        //     '× ×§×•×“×•×ª', '×›××‘×™', '×©×™× ×”', '×¢×™×™×¤×•×ª', '×—×¨×“×”', '×“×™×›××•×Ÿ', '×× ×¨×’×™×”',
        //     '×“×•×¤×§', '×¦××—×™', '×ª××™×›×”', '×˜×™×¤×•×œ', '×× ×™×¢×”', '×ª×–×•× ×”', '×¢×•×¨',
        //     '×¡×™××¤×˜×•××™×', '×”×©×¤×¢×”', '×™×ª×¨×•× ×•×ª', '×“×™×§×•×¨', '××©×ª×œ×‘',
        //     '×××–× ×™×', '×××œ×™×¦×™×', '××ª××™××™×', '×¡×™× ×™', '×•×™×˜××™×Ÿ', '××¨×¤×',
        //     '×›×¨×•× ×™×ª', '×¡×™×× ×™', '×›×¨×•× ×™', '×ª×•×¤×¢×•×ª', '×œ×•×•××™', '×ª×›×•× ×•×ª',
        //     '× ×™×§×•×™', '××–×•×Ÿ', '×¡×™×× ×™×', '×¢×™× ×™×™×', '××–×”×¨×”', '×§×•×©×™',
        //     '××–×•× ×•×ª', '××—×©×‘×•×ª', '×¢×¦××™×ª', '×¦×•×•××¨', '×˜×•×•×—', '× ×“×•×“×™',
        //     '××•×¤×¨×¢×ª', '×’×‘×•×”×”', '×ª×¢×œ×•×ª', '×›×•×¨×›×•×', '×¢×•××¡', '×–×™×›×¨×•×Ÿ',
        //     '×ª×™×¨×•××™×“', '×“×™×‘×•×¨', '×× ×–×™×', '×“×•×¤××™×Ÿ'
        // ];
        
        // FIX #2: Search by keyword (clicking popular keywords)
        // Now searches for questions CONTAINING the keyword, not just pasting word
        async function searchKeyword(keyword) {
            console.log('ğŸ”‘ Searching for questions containing:', keyword);
            
            try {
                // Search Module 1 (411 questions) for questions containing keyword
                const { data, error } = await supabaseClient
                    .from('411_hebrew_quick_questions_20260131')
                    .select('question_hebrew, category_hebrew')
                    .ilike('question_hebrew', `%${keyword}%`)
                    .order('question_hebrew', { ascending: true })
                    .limit(20);
                
                if (error) {
                    console.error('âŒ Keyword search error details:', error);
                    throw error;
                }
                
                if (data && data.length > 0) {
                    console.log(`âœ… Found ${data.length} questions containing "${keyword}"`);
                    
                    // Display filtered questions in Module 1 area
                    displayModule1Questions({
                        questions: data,
                        category: `×ª×•×¦××•×ª ×—×™×¤×•×©: "${keyword}"`,
                        has_more: false,
                        total_count: data.length
                    });
                    
                    // Expand Module 1 if collapsed
                    const content = document.getElementById('module1Content');
                    const arrow = document.getElementById('module1Arrow');
                    if (content && content.style.display === 'none') {
                        content.style.display = 'block';
                        if (arrow) arrow.style.transform = 'rotate(180deg)';
                        module1IsExpanded = true;
                    }
                    
                    // Scroll to Module 1
                    const module1Header = document.querySelector('[onclick="toggleModule1Panel()"]');
                    if (module1Header) {
                        module1Header.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    
                } else {
                    alert(`×œ× × ××¦××• ×©××œ×•×ª ×”××›×™×œ×•×ª: "${keyword}"\n× ×¡×” ××™×œ×ª ×—×™×¤×•×© ××—×¨×ª.`);
                }
                
            } catch (error) {
                console.error('âŒ Keyword search error:', error);
                console.error('Error details:', JSON.stringify(error));
                alert(`×©×’×™××” ×‘×—×™×¤×•×© ××™×œ×ª ××¤×ª×—: ${error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”'}`);
            }
        }
        
        // FIX #2: Search by alphabet letter
        // Searches for questions STARTING with the letter
        async function searchByLetter(letter) {
            console.log('ğŸ”¤ Searching for questions starting with:', letter);
            
            try {
                // Search Module 1 for questions starting with letter
                const { data, error } = await supabaseClient
                    .from('411_hebrew_quick_questions_20260131')
                    .select('question_hebrew, category_hebrew')
                    .ilike('question_hebrew', `${letter}%`)
                    .order('question_hebrew', { ascending: true })
                    .limit(20);
                
                if (error) {
                    console.error('âŒ Alphabet search error details:', error);
                    console.error('Error message:', error.message);
                    console.error('Error code:', error.code);
                    throw error;
                }
                
                if (data && data.length > 0) {
                    console.log(`âœ… Found ${data.length} questions starting with "${letter}"`);
                    
                    // Display filtered questions
                    displayModule1Questions({
                        questions: data,
                        category: `×ª×•×¦××•×ª ×—×™×¤×•×©: ××•×ª "${letter}"`,
                        has_more: false,
                        total_count: data.length
                    });
                    
                    // Expand Module 1
                    const content = document.getElementById('module1Content');
                    const arrow = document.getElementById('module1Arrow');
                    if (content && content.style.display === 'none') {
                        content.style.display = 'block';
                        if (arrow) arrow.style.transform = 'rotate(180deg)';
                        module1IsExpanded = true;
                    }
                    
                    // Scroll to Module 1
                    const module1Header = document.querySelector('[onclick="toggleModule1Panel()"]');
                    if (module1Header) {
                        module1Header.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    
                } else {
                    alert(`×œ× × ××¦××• ×©××œ×•×ª ×”××ª×—×™×œ×•×ª ×‘××•×ª: "${letter}"`);
                }
                
            } catch (error) {
                console.error('âŒ Alphabet search error:', error);
                console.error('Error details:', JSON.stringify(error));
                alert(`×©×’×™××” ×‘×—×™×¤×•×© ×œ×¤×™ ××•×ª: ${error.message || '×©×’×™××” ×œ× ×™×“×•×¢×”'}\n\n×‘×“×•×§ ××ª ×”×§×•× ×¡×•×œ ×œ×¤×¨×˜×™× × ×•×¡×¤×™×.`);
            }
        }
        
        // Initialize alphabet navigation buttons
        function initAlphabetNav() {
            const hebrewAlphabet = ['×', '×‘', '×’', '×“', '×”', '×•', '×–', '×—', '×˜', '×™', '×›', '×œ', '×', '× ', '×¡', '×¢', '×¤', '×¦', '×§', '×¨', '×©', '×ª'];
            const container = document.getElementById('alphabetNav');
            
            if (container) {
                hebrewAlphabet.forEach(letter => {
                    const btn = document.createElement('button');
                    btn.textContent = letter;
                    btn.className = 'w-8 h-8 bg-white border-2 border-purple-300 text-purple-700 rounded-lg text-sm font-bold hover:bg-purple-100 hover:border-purple-500 transition-all cursor-pointer';
                    btn.onclick = () => searchByLetter(letter);
                    btn.title = `×—×™×¤×•×© ×œ×¤×™ ×”××•×ª ${letter}`;
                    container.appendChild(btn);
                });
                console.log('âœ… Alphabet navigation initialized (22 letters)');
            }
        }
        // END OF OLD VOICE SEARCH CODE
        */

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MODULE 2: 2,665 CLINICAL QUESTIONS - NEW IMPLEMENTATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // FIX #4: Module 2 toggle function (same pattern as Module 1)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TOGGLE MODULE 2 PANEL FUNCTION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function toggleModule2Panel() {
            const content = document.getElementById('module2Content');
            const arrow = document.getElementById('module2Arrow');
            
            if (!content || !arrow) return;
            
            module2IsExpanded = !module2IsExpanded;
            
            if (module2IsExpanded) {
                // Show panel
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
                
                // Load questions on first expansion
                if (!module2QuestionsLoaded) {
                    console.log('ğŸ“¥ First time expanding Module 2 - loading questions...');
                    await loadModule2QuestionsNew();
                    module2QuestionsLoaded = true;
                }
            } else {
                // Hide panel
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            }
        }
        // Make globally accessible
        window.toggleModule2Panel = toggleModule2Panel;
        
        // Load Module 2 questions from database
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // MODULE 2: CATEGORY TRANSLATION MAPPING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // EXACT Hebrew translations for Module 2 categories (from database)
        const module2CategoryTranslation = {
            "adolescent": "××ª×‘×’×¨×™× (13-18)",
            "adult": "××‘×•×’×¨×™× (18-70)",
            "allergies": "××œ×¨×’×™×•×ª",
            "alternative_trends": "×˜×¨× ×“×™× ××œ×˜×¨× ×˜×™×‘×™×™×",
            "antidepressant_weightloss_overuse": "×©×™××•×© ×™×ª×¨ - ×ª×¨×•×¤×•×ª",
            "anxiety": "×—×¨×“×”",
            "anxiety_intake_therapist": "×—×¨×“×” - ×¦×¨×™×›×” ×˜×™×¤×•×œ×™×ª",
            "astrology": "××¡×˜×¨×•×œ×•×’×™×”",
            "breastfeeding": "×”× ×§×”",
            "cardiology": "×§×¨×“×™×•×œ×•×’×™×”",
            "eastern": "×¨×¤×•××” ××–×¨×—×™×ª",
            "elderly": "×§×©×™×©×™×",
            "elderly_neuro": "×§×©×™×©×™× - × ×•×™×¨×•×œ×•×’×™×”",
            "extreme": "××§×¨×™× ×§×™×¦×•× ×™×™×",
            "first": "×¢×–×¨×” ×¨××©×•× ×”",
            "general": "×›×œ×œ×™",
            "herbs": "×¢×©×‘×™ ××¨×¤×",
            "high_energy_states": "××¦×‘×™ ×× ×¨×’×™×” ×’×‘×•×”×”",
            "natural": "×˜×‘×¢×™",
            "nutrition": "×ª×–×•× ×”",
            "oncology": "××•× ×§×•×œ×•×’×™×”",
            "pediatrics": "×™×œ×“×™×",
            "pregnancy": "×”×¨×™×•×Ÿ",
            "retreat_recommendations": "×”××œ×¦×•×ª ×¨×™×˜×¨×™×˜",
            "skin": "×¢×•×¨",
            "social_media_overuse": "×©×™××•×© ×™×ª×¨ - ×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª",
            "sports": "×¡×¤×•×¨×˜",
            "state": "××¦×‘×™× ×§×œ×™× ×™×™×",
            "tcm_cognitive_overload": "×¢×•××¡ ×§×•×’× ×™×˜×™×‘×™ - TCM",
            "tcm_supplements": "×ª×•×¡×¤×™ TCM",
            "university": "××•× ×™×‘×¨×¡×™×˜×”",
            "western_diets": "×“×™××˜×•×ª ××¢×¨×‘×™×•×ª"
        };
        
        // Function to translate category to Hebrew
        function translateCategoryToHebrew(englishCategory) {
            return module2CategoryTranslation[englishCategory] || englishCategory;
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš ï¸ MODULE 2 FUNCTIONS SECTION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ALL FUNCTIONS BELOW (until next section) ARE NOW LOADED FROM:
        // questions-589.js module in Supabase Storage
        // 
        // Functions that moved to questions-589.js:
        // - loadModule2QuestionsNew()
        // - filterModule2Questions()
        // - displayModule2Questions()
        // - handleModule2Scroll()
        // - pasteModule2ToQueryBox()
        //
        // RESTORED: These functions needed in main file for proper initialization
        
        async function loadModule2QuestionsNew() {
            try {
                console.log('ğŸ“¥ Loading Module 2 questions from database...');
                
                // Get unique categories (in English from database)
                const { data: categories, error: catError } = await supabaseClient
                    .from('csv_32_589_hebrew_questions_20260201')
                    .select('category')
                    .order('category', { ascending: true });
                
                if (catError) throw catError;
                
                // Get unique categories
                const uniqueCategories = [...new Set(categories.map(c => c.category))];
                console.log(`âœ… Found ${uniqueCategories.length} Module 2 categories`);
                
                // Sort categories alphabetically by HEBREW translation
                uniqueCategories.sort((a, b) => {
                    const hebrewA = translateCategoryToHebrew(a);
                    const hebrewB = translateCategoryToHebrew(b);
                    return hebrewA.localeCompare(hebrewB, 'he');
                });
                
                // Populate category dropdown with HEBREW translations (alphabetically sorted)
                const select = document.getElementById('module2CategoryFilter');
                if (select) {
                    select.innerHTML = `<option value="all">×›×œ ×”×§×˜×’×•×¨×™×•×ª (589 ×©××œ×•×ª)</option>`;
                    uniqueCategories.forEach(catEnglish => {
                        const option = document.createElement('option');
                        option.value = catEnglish; // Keep English as value for database query
                        option.textContent = translateCategoryToHebrew(catEnglish); // Show Hebrew to user
                        select.appendChild(option);
                    });
                }
                
                // Load first 3 questions
                await filterModule2Questions();
                
            } catch (error) {
                console.error('âŒ Error loading Module 2:', error);
                alert('×©×’×™××” ×‘×˜×¢×™× ×ª ××•×“×•×œ 2');
            }
        }
        
        // Filter Module 2 questions by category (with offset for infinite scroll)
        async function filterModule2Questions(offset = 0) {
            const select = document.getElementById('module2CategoryFilter');
            const category = select ? select.value : 'all';
            
            // Reset if new category selected
            if (category !== module2CurrentCategory) {
                module2CurrentCategory = category;
                module2CurrentOffset = 0;
                module2AllQuestionsLoaded = false;
                offset = 0;
            }
            
            try {
                console.log('ğŸ” Filtering Module 2 by category:', category, 'offset:', offset);
                
                let query = supabaseClient
                    .from('csv_32_589_hebrew_questions_20260201')
                    .select('question_hebrew, category, answer_hebrew')
                    .order('question_hebrew', { ascending: true })
                    .range(offset, offset + 2); // Load 3 questions (0-2, 3-5, etc.)
                
                if (category !== 'all') {
                    query = query.eq('category', category);
                }
                
                const { data, error } = await query;
                
                if (error) {
                    console.error('âŒ Error details:', error);
                    throw error;
                }
                
                console.log(`âœ… Found ${data.length} Module 2 questions at offset ${offset}`);
                
                // Check if we reached the end
                if (data.length < 3) {
                    module2AllQuestionsLoaded = true;
                }
                
                // Update offset for next load
                module2CurrentOffset = offset + data.length;
                
                // Display questions (append if offset > 0, replace if offset = 0)
                displayModule2Questions(data, offset > 0);
                
            } catch (error) {
                console.error('âŒ Error filtering Module 2:', error);
                alert(`×©×’×™××”: ${error.message || '×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ×©××œ×•×ª'}`);
            }
        }
        
        // Display Module 2 questions (with append mode for infinite scroll)
        function displayModule2Questions(questions, append = false) {
            const container = document.getElementById('module2Questions');
            if (!container) return;
            
            if (!questions || questions.length === 0) {
                if (!append) {
                    container.innerHTML = '<p class="text-center text-gray-500 text-sm p-4">××™×Ÿ ×©××œ×•×ª ×–××™× ×•×ª</p>';
                }
                return;
            }
            
            // Clear container if not appending
            if (!append) {
                container.innerHTML = '';
                // Remove old scroll listener
                container.removeEventListener('scroll', handleModule2Scroll);
                // Add scroll listener for infinite scroll
                container.addEventListener('scroll', handleModule2Scroll);
            }
            
            questions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'p-3 bg-white border-2 border-purple-200 rounded-lg hover:border-purple-400 hover:shadow-md cursor-pointer transition-all text-right';
                
                // Translate category to Hebrew for display
                const categoryHebrew = translateCategoryToHebrew(q.category);
                
                // Add answer preview as tooltip (first 100 chars)
                const answerPreview = q.answer_hebrew ? q.answer_hebrew.substring(0, 100) + '...' : '';
                questionDiv.title = answerPreview;
                
                questionDiv.innerHTML = `
                    <div class="font-medium text-sm text-gray-800">${q.question_hebrew || '×œ×œ× ×©××œ×”'}</div>
                    <div class="text-xs text-purple-600 mt-1">${categoryHebrew || ''}</div>
                `;
                
                questionDiv.onclick = () => {
                    pasteModule2ToQueryBox(q.question_hebrew);
                };
                
                container.appendChild(questionDiv);
            });
        }
        
        // Handle infinite scroll for Module 2
        function handleModule2Scroll() {
            const container = document.getElementById('module2Questions');
            if (!container) return;
            
            // Check if scrolled to bottom (with 20px threshold)
            const scrolledToBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 20;
            
            if (scrolledToBottom && !module2AllQuestionsLoaded) {
                console.log('ğŸ“¥ Loading more Module 2 questions...');
                filterModule2Questions(module2CurrentOffset);
            }
        }
        
        // FIX #1: Paste Module 2 question with duplicate prevention
        function pasteModule2ToQueryBox(text) {
            console.log('ğŸ“ Pasting Module 2 question:', text);
            
            const boxes = ['searchInput1', 'searchInput2', 'searchInput3', 'searchInput4'];
            
            // FIX #1: Check for duplicates first
            for (let boxId of boxes) {
                const input = document.getElementById(boxId);
                if (input && input.value.trim() === text.trim()) {
                    alert('âŒ ×©××œ×” ×–×• ×›×‘×¨ ×§×™×™××ª ×‘×ª×™×‘×ª ×—×™×¤×•×©!\n×× × ×‘×—×¨ ×©××œ×” ××—×¨×ª.');
                    console.log('âš ï¸ Duplicate prevented:', text);
                    return; // Prevent duplicate
                }
            }
            
            // Find first empty box
            for (let i = 0; i < boxes.length; i++) {
                const input = document.getElementById(boxes[i]);
                
                if (input && !input.value.trim()) {
                    input.value = text;
                    
                    if (typeof updateQueryBox === 'function') {
                        updateQueryBox(i + 1);
                    }
                    
                    const box = document.getElementById('queryBox' + (i + 1));
                    if (box) {
                        box.style.background = '#fae8ff'; // Light purple for Module 2
                        setTimeout(() => { box.style.background = ''; }, 500);
                    }
                    
                    console.log(`âœ… Module 2 question pasted into Box ${i + 1}`);
                    return;
                }
            }
            
            alert('×›×œ ×ª×™×‘×•×ª ×”×©××œ×•×ª ××œ××•×ª!');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âœ… END OF MODULE 2 FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function togglePause() {
            const pauseBtn = document.getElementById('pauseButton');
            
            if (isPaused) {
                isPaused = false;
                pauseBtn.textContent = 'â¸ï¸ ×”×©×”×”';
                pauseBtn.classList.remove('paused-state');
                updateStatus('âœ… ×××©×™×š ×‘×—×™×¤×•×©...');
            } else {
                isPaused = true;
                pauseBtn.textContent = 'â–¶ï¸ ×”××©×š';
                pauseBtn.classList.add('paused-state');
                updateStatus('â¸ï¸ ××•×©×”×” - ×œ×—×¥ ×”××©×š ×›×“×™ ×œ×”××©×™×š');
                
                if (searchAbortController) {
                    searchAbortController.abort();
                    searchAbortController = null;
                }
            }
        }
        
        function pauseSearch() {
            if (!isSearching) return;
            
            isPaused = true;
            updateStatus('â¸ï¸ ×—×™×¤×•×© ××•×©×”×”');
            
            document.getElementById('pauseSearchBtn').classList.add('hidden');
            document.getElementById('continueSearchBtn').classList.remove('hidden');
            
            if (queryTimerInterval) {
                clearInterval(queryTimerInterval);
                queryTimerInterval = null;
            }
            
        }
        
        function continueSearch() {
            if (!isSearching) return;
            
            isPaused = false;
            updateStatus('âœ… ×××©×™×š ×‘×—×™×¤×•×©...');
            
            document.getElementById('pauseSearchBtn').classList.remove('hidden');
            document.getElementById('continueSearchBtn').classList.add('hidden');
            
            startQueryTimer();
            
        }
        
        function stopSearch() {
            if (!isSearching) return;
            
            isSearching = false;
            isPaused = false;
            
            if (queryTimerInterval) {
                clearInterval(queryTimerInterval);
                queryTimerInterval = null;
            }
            
            document.getElementById('pauseSearchBtn').classList.add('hidden');
            document.getElementById('continueSearchBtn').classList.add('hidden');
            document.getElementById('stopSearchBtn').classList.add('hidden');
            
            if (searchAbortController) {
                searchAbortController.abort();
                searchAbortController = null;
            }
            
            updateStatus('ğŸ”´ ×—×™×¤×•×© ×”×•×¤×¡×§ ×¢×œ ×™×“×™ ×”××©×ª××©');
            document.getElementById('searchResults').innerHTML = `
                <div class="text-center p-8 text-red-600">
                    <h3 class="text-2xl font-bold">ğŸ”´ ×—×™×¤×•×© ×”×•×¤×¡×§</h3>
                    <p class="mt-2">×”×—×™×¤×•×© ×”×•×¤×¡×§ ×¢×œ ×™×“×™ ×”××©×ª××©</p>
                </div>
            `;
            
            queryEndTime = Date.now();
            const totalTime = ((queryEndTime - queryStartTime) / 1000).toFixed(2);
            document.getElementById('queryTimer').textContent = `${totalTime}s (×”×•×¤×¡×§)`;
            
        }
        
        function startQueryTimer() {
            const queryTimerEl = document.getElementById('queryTimer');
            if (!queryTimerEl) {
                console.warn('queryTimer element not found');
                return;
            }
            
            queryStartTime = Date.now();
            queryTimerEl.textContent = '0.00s';
            
            if (queryTimerInterval) {
                clearInterval(queryTimerInterval);
            }
            
            queryTimerInterval = setInterval(() => {
                if (!isPaused) {
                    const elapsed = ((Date.now() - queryStartTime) / 1000).toFixed(2);
                    const el = document.getElementById('queryTimer');
                    if (el) {
                        el.textContent = `${elapsed}s`;
                    }
                }
            }, 100); // Update every 100ms for smooth counting
        }
        
        function stopQueryTimer() {
            if (queryTimerInterval) {
                clearInterval(queryTimerInterval);
                queryTimerInterval = null;
            }
            
            const queryTimerEl = document.getElementById('queryTimer');
            if (!queryTimerEl) {
                console.warn('queryTimer element not found');
                return;
            }
            
            queryEndTime = Date.now();
            const totalTime = ((queryEndTime - queryStartTime) / 1000).toFixed(2);
            queryTimerEl.textContent = `${totalTime}s`;
            
        }
        
        function resetQueryTimer() {
            if (queryTimerInterval) {
                clearInterval(queryTimerInterval);
                queryTimerInterval = null;
            }
            
            const queryTimerEl = document.getElementById('queryTimer');
            if (queryTimerEl) {
                queryTimerEl.textContent = '0.00s';
            }
        }

        function startSessionTimer() {
            function updateClock() {
                const sessionTimerEl = document.getElementById('sessionTimer');
                if (!sessionTimerEl) {
                    console.warn('sessionTimer element not found');
                    return;
                }
                
                const now = new Date();
                const timeStr = now.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                const dateStr = now.toLocaleDateString('he-IL', { day: '2-digit', month: '2-digit', year: 'numeric' });
                sessionTimerEl.textContent = `${timeStr} â€¢ ${dateStr}`;
            }
            updateClock(); // Update immediately
            timerInterval = setInterval(updateClock, 1000); // Update every second
        }

        function calculateCost(inputTokens, outputTokens) {
            const inputCost = inputTokens * INPUT_TOKEN_COST;
            const outputCost = outputTokens * OUTPUT_TOKEN_COST;
            return inputCost + outputCost;
        }

        function updateMetrics(newInputTokens = 0, newOutputTokens = 0) {
            totalInputTokens += newInputTokens;
            totalOutputTokens += newOutputTokens;
            totalCost = calculateCost(totalInputTokens, totalOutputTokens);
            
            const totalTokens = totalInputTokens + totalOutputTokens;
            
            const tokenCountEl = document.getElementById('tokenCount');
            if (tokenCountEl) {
                tokenCountEl.textContent = totalTokens.toLocaleString();
            }
            
            const totalCostEl = document.getElementById('totalCost');
            if (totalCostEl) {
                totalCostEl.textContent = `$${totalCost.toFixed(4)}`;
            }
            
            const assetsEl = document.getElementById('assetsSearched');
            if (assetsEl) {
                assetsEl.textContent = totalAssets;
            }
            
            const successRateEl = document.getElementById('successRate');
            if (successRateEl) {
                const successRate = totalQueries > 0 ? Math.round((successfulQueries / totalQueries) * 100) : 0;
                successRateEl.textContent = `${successRate}%`;
            }
        }

        function resetSession() {
            if (confirm('×œ×”×ª×—×™×œ ×¡×©×Ÿ ×—×“×©? ×–×” ×™× ×§×” ××ª ×›×œ ×”×©××œ×•×ª ×•×”×ª×•×¦××•×ª.')) {
                sessionStartTime = Date.now();
                totalInputTokens = 0;
                totalOutputTokens = 0;
                totalCost = 0;
                totalAssets = 0;
                successfulQueries = 0;
                totalQueries = 0;
                currentQueries = [];
                usedCSVs.clear();
                
                isSearching = false;
                isPaused = false;
                resetQueryTimer();
                
                clearAllQueries();
                document.getElementById('searchResults').innerHTML = '';
                document.getElementById('activeQueries').innerHTML = '';
                document.getElementById('shareButtons').classList.add('hidden');
                document.getElementById('reportOptions').classList.add('hidden');
                document.getElementById('fallbackBrowser').classList.add('hidden');
                
                document.getElementById('pauseSearchBtn').classList.add('hidden');
                document.getElementById('continueSearchBtn').classList.add('hidden');
                document.getElementById('stopSearchBtn').classList.add('hidden');
                
                resetCSVIndicators();
                updateMetrics();
            }
        }

        async function createCSVIndicators() {
            const container = document.getElementById('csvIndicatorsLeft');
            if (!container) {
                return;
            }
            
            try {
                const { data: searchConfig, error } = await supabaseClient
                    .from('system_search_config_20260129')
                    .select('table_name, priority, description')
                    .eq('enabled', true)
                    .order('priority');
                
                if (error) {
                    console.error('Error loading CSV indicators:', error);
                    container.innerHTML = '<div class="text-white text-xs text-center">×©×’×™××” ×‘×˜×¢×™× ×”</div>';
                    return;
                }
                
                if (!searchConfig || searchConfig.length === 0) {
                    container.innerHTML = '<div class="text-white text-xs text-center">××™×Ÿ ××§×•×¨×•×ª ×–××™× ×™×</div>';
                    return;
                }
                
                container.innerHTML = searchConfig.map(config => {
                    const isDrRoni = config.table_name.toLowerCase().includes('dr_roni') || 
                                     config.table_name.toLowerCase().includes('bible');
                    const isZangfu = config.table_name === 'bible_rag_zangfu_syndromes_20260129';
                    const displayName = config.description || config.table_name;
                    const shortName = displayName.length > 30 ? displayName.substring(0, 30) + '...' : displayName;
                    
                    return `
                        <div class="csv-box ${isDrRoni || isZangfu ? 'bible' : ''}" 
                             data-csv="${config.table_name}" 
                             title="${displayName} (Priority ${config.priority})">
                            <div class="text-xs font-semibold">${isDrRoni ? 'â­ ' : ''}${shortName}</div>
                            <div class="text-[10px] opacity-75">Priority ${config.priority}</div>
                        </div>
                    `;
                }).join('');
                
                console.log(`âœ… Loaded ${searchConfig.length} table indicators`);
                
            } catch (err) {
                console.error('Exception creating CSV indicators:', err);
                container.innerHTML = '<div class="text-white text-xs text-center">×©×’×™××”</div>';
            }
        }

        function highlightUsedCSVs(tableNames) {
            resetCSVIndicators();
            tableNames.forEach(tableName => {
                const box = document.querySelector(`[data-csv="${tableName}"]`);
                if (box) box.classList.add('active');
            });
        }

        function resetCSVIndicators() {
            document.querySelectorAll('.csv-box').forEach(box => box.classList.remove('active'));
        }

        function createQuickQuestions() {
            filterQuestions();
        }

        function filterQuestions() {
            const categoryEl = document.getElementById('categoryFilter');
            if (!categoryEl) return;
            
            const category = categoryEl.value;
            loadModule1Questions(category, 0);
        }
        
        function displayQuestions(questions, isAllCategories) {
            const container = document.getElementById('quickQuestions');
            if (!container) return;
            
            container.innerHTML = questions.map((q, i) => `
                <div class="quick-question" onclick="applyQuickQuestion('${q.category}', ${i}, ${isAllCategories})">
                    ${q.text}
                </div>
            `).join('');
        }
        
        function addLoadMoreButton(allQuestions) {
            const container = document.getElementById('quickQuestions');
            if (!container) return;
            
            const loadMoreBtn = document.createElement('div');
            loadMoreBtn.className = 'quick-question';
            loadMoreBtn.style.cssText = 'background: #e0f2fe; color: #0369a1; font-weight: bold; text-align: center; cursor: pointer; border: 2px dashed #0ea5e9;';
            loadMoreBtn.innerHTML = `ğŸ“¥ ×˜×¢×Ÿ ×¢×•×“ ×©××œ×•×ª (${allQuestions.length - questionsPerCategory} × ×•×¡×¤×•×ª)`;
            loadMoreBtn.onclick = () => loadMoreQuestions(allQuestions);
            container.appendChild(loadMoreBtn);
        }
        
        function loadMoreQuestions(allQuestions) {
            currentOffset += questionsPerCategory;
            const nextBatch = allQuestions.slice(currentOffset, currentOffset + questionsPerCategory);
            
            if (nextBatch.length > 0) {
                const container = document.getElementById('quickQuestions');
                if (!container) return;
                
                // Remove "load more" button
                const loadMoreBtn = container.querySelector('[style*="dashed"]');
                if (loadMoreBtn) loadMoreBtn.remove();
                
                // Add next batch
                nextBatch.forEach((q, i) => {
                    const div = document.createElement('div');
                    div.className = 'quick-question';
                    div.innerHTML = q.text;
                    div.onclick = () => applyQuickQuestion(q.category, currentOffset + i, false);
                    container.appendChild(div);
                });
                
                // Add "load more" button again if there are more questions
                if (currentOffset + questionsPerCategory < allQuestions.length) {
                    addLoadMoreButton(allQuestions);
                }
            }
        }

        function applyQuickQuestion(category, index, isAllCategories) {
            let question;
            
            if (isAllCategories) {
                // Find the question in the displayed list
                const displayedQuestions = [];
                const categoryCounts = {};
                
                hebrewQuestions.forEach(q => {
                    if (!categoryCounts[q.category]) {
                        categoryCounts[q.category] = 0;
                    }
                    if (categoryCounts[q.category] < questionsPerCategory) {
                        displayedQuestions.push(q);
                        categoryCounts[q.category]++;
                    }
                });
                
                question = displayedQuestions[index];
            } else {
                const filtered = hebrewQuestions.filter(q => q.category === category);
                question = filtered[index];
            }
            
            if (!question) return;
            
            let targetBox = 1;
            for (let i = 1; i <= 4; i++) {
                if (!document.getElementById(`searchInput${i}`).value.trim()) {
                    targetBox = i;
                    break;
                }
            }
            
            document.getElementById(`searchInput${targetBox}`).value = question.text;
            updateQueryBox(targetBox);
            
            const runButton = document.querySelector('.run-query-button');
            if (runButton) {
                runButton.classList.add('pulse-attention');
                setTimeout(() => runButton.classList.remove('pulse-attention'), 2000);
            }
        }

        function updateQueryBox(queryNum) {
            const input = document.getElementById(`searchInput${queryNum}`);
            const box = document.getElementById(`queryBox${queryNum}`);
            
            if (input.value.trim()) {
                box.classList.add('filled');
            } else {
                box.classList.remove('filled');
            }
        }

        function startVoiceInput(boxNumber) {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert('×”×“×¤×“×¤×Ÿ ×©×œ×š ××™× ×• ×ª×•××š ×‘×–×™×”×•×™ ×§×•×œ×™. × ×¡×” ×œ×”×©×ª××© ×‘-Chrome.');
                return;
            }
            
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            
            recognition.lang = 'he-IL'; // Hebrew
            recognition.continuous = false;
            recognition.interimResults = false;
            
            const inputEl = document.getElementById(`searchInput${boxNumber}`);
            const button = event.target;
            
            button.textContent = 'ğŸ™ï¸';
            button.classList.add('bg-red-600');
            
            recognition.onstart = function() {
            };
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                inputEl.value = transcript;
                updateQueryBox(boxNumber);
            };
            
            recognition.onerror = function(event) {
                console.error('ğŸ¤ Voice recognition error:', event.error);
                alert('×©×’×™××” ×‘×–×™×”×•×™ ×§×•×œ×™: ' + event.error);
            };
            
            recognition.onend = function() {
                button.textContent = 'ğŸ¤';
                button.classList.remove('bg-red-600');
            };
            
            recognition.start();
        }

        function clearAllQueries() {
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`searchInput${i}`).value = '';
                document.getElementById(`queryBox${i}`).classList.remove('filled');
            }
            currentQueries = [];
            document.getElementById('activeQueries').innerHTML = '';
        }

        async function performMultiQuery() {
            if (isPaused) {
                alert('×”×—×™×¤×•×© ××•×©×”×”. ×œ×—×¥ "×”××©×š" ×›×“×™ ×œ×”××©×™×š.');
                return;
            }
            
            currentQueries = [];
            for (let i = 1; i <= 4; i++) {
                const val = document.getElementById(`searchInput${i}`).value.trim();
                if (val) currentQueries.push(val);
            }

            if (currentQueries.length === 0) {
                alert('× × ×œ×”×–×™×Ÿ ×œ×¤×—×•×ª ×©××œ×” ××—×ª');
                return;
            }

            totalQueries++;
            
            isSearching = true;
            startQueryTimer();
            
            document.getElementById('pauseSearchBtn').classList.remove('hidden');
            document.getElementById('stopSearchBtn').classList.remove('hidden');
            document.getElementById('continueSearchBtn').classList.add('hidden');
            
            document.getElementById('tokenCount').style.animation = 'pulse 1s infinite';
            
            document.getElementById('pauseButton').classList.remove('hidden');
            isPaused = false;

            document.getElementById('activeQueries').innerHTML = `
                <div class="p-4 bg-blue-50 border-2 border-blue-300 rounded-xl">
                    <h4 class="font-bold text-blue-800 mb-2 text-right">ğŸ” ×©××œ×•×ª ×¤×¢×™×œ×•×ª:</h4>
                    <ul class="list-disc list-inside space-y-1 text-right">
                        ${currentQueries.map(q => `<li class="text-blue-700">${q}</li>`).join('')}
                    </ul>
                </div>
            `;

            const results = document.getElementById('searchResults');
            results.innerHTML = '<div class="text-center p-8"><div class="animate-spin text-6xl">ğŸ”„</div><p class="mt-4 text-lg">××—×¤×© ×‘×××’×¨ RAG...</p></div>';

            try {
                searchAbortController = new AbortController();
                
                const allResults = await searchMultipleQueries(currentQueries);
                
                if (isPaused) {
                    results.innerHTML = '<div class="text-center p-8 text-orange-600"><h3 class="text-2xl font-bold">â¸ï¸ ×—×™×¤×•×© ××•×©×”×”</h3><p>×œ×—×¥ "×”××©×š" ×›×“×™ ×œ×”××©×™×š</p></div>';
                    return;
                }
                
                const hasResults = (allResults.totalResults && allResults.totalResults > 0) || 
                                   (allResults.formulas && allResults.formulas.length > 0) || 
                                   (allResults.acupoints && allResults.acupoints.length > 0);
                
                if (hasResults) {
                    successfulQueries++;
                    
                    if (allResults.totalResults > 0 && allResults.allResults) {
                        const uniqueTables = [...new Set(allResults.allResults.map(r => r._source_table))];
                        
                        highlightUsedCSVs(uniqueTables);
                        
                        const successMsg = document.createElement('div');
                        successMsg.className = 'bg-green-50 p-4 rounded-lg border-2 border-green-200 mb-4 text-right';
                        successMsg.innerHTML = `
                            <p class="text-green-800 font-bold text-lg" dir="rtl">
                                âœ… × ××¦××• ${allResults.totalResults} ×ª×•×¦××•×ª ×-${uniqueTables.length} ×˜×‘×œ××•×ª!
                            </p>
                            <p class="text-green-600 text-sm mt-1" dir="rtl">
                                ×˜×‘×œ××•×ª: ${uniqueTables.join(', ')}
                            </p>
                        `;
                        results.appendChild(successMsg);
                    }
                    
                    await displaySearchResults(allResults);
                    document.getElementById('shareButtons').classList.remove('hidden');
                    document.getElementById('reportOptions').classList.remove('hidden');
                    document.getElementById('fallbackBrowser').classList.add('hidden');
                } else {
                    await triggerFallbackSearch(currentQueries);
                }

                document.getElementById('tokenCount').style.animation = '';
                document.getElementById('pauseButton').classList.add('hidden');
                
                isSearching = false;
                stopQueryTimer();
                document.getElementById('pauseSearchBtn').classList.add('hidden');
                document.getElementById('continueSearchBtn').classList.add('hidden');
                document.getElementById('stopSearchBtn').classList.add('hidden');

            } catch (error) {
                console.error('Search error:', error);
                
                if (error.name === 'AbortError') {
                    results.innerHTML = '<div class="text-center p-8 text-orange-600"><h3 class="text-2xl font-bold">â¸ï¸ ×—×™×¤×•×© ××•×©×”×”</h3></div>';
                } else {
                    results.innerHTML = `
                        <div class="bg-red-50 p-6 rounded-xl border-2 border-red-200 text-right">
                            <h4 class="text-xl font-bold text-red-800 mb-2">âš ï¸ ×©×’×™××ª ×—×™×¤×•×©</h4>
                            <p class="text-red-600">${error.message}</p>
                        </div>
                    `;
                }
                
                document.getElementById('tokenCount').style.animation = '';
                document.getElementById('pauseButton').classList.add('hidden');
                
                isSearching = false;
                stopQueryTimer();
                document.getElementById('pauseSearchBtn').classList.add('hidden');
                document.getElementById('continueSearchBtn').classList.add('hidden');
                document.getElementById('stopSearchBtn').classList.add('hidden');
            }
        }


        // ========================================
        // ========================================

        // SEARCH CONFIG CACHE (NOW DECLARED IN search-engine.js)
        // let searchConfigCache = null;

        /**
         * Load search configuration from database
         */
        async function loadSearchConfig() {
            if (searchConfigCache) {
                return searchConfigCache;
            }
            
            try {
                const { data, error } = await supabaseClient
                    .from('system_search_config_20260129')
                    .select('*')
                    .eq('enabled', true)
                    .order('priority');
                
                if (error) {
                    console.error('âŒ Error loading search config:', error);
                    return [];
                }
                
                console.log(`âœ… Loaded ${data.length} searchable tables from search_config`);
                searchConfigCache = data;
                return data;
            } catch (err) {
                console.error('âŒ Failed to load search config:', err);
                return [];
            }
        }

        /**
         * NEW SEARCH FUNCTION - Searches all configured tables
         */
        async function searchMultipleQueries(queries) {
            
            const searchConfig = await loadSearchConfig();
            
            if (!searchConfig || searchConfig.length === 0) {
                console.error('âŒ No search configuration found!');
                return { formulas: [], acupoints: [], images: [] };
            }
            
            
            const allResults = [];
            let totalResults = 0;
            
            for (const tableConfig of searchConfig) {
                if (isPaused) {
                    break;
                }
                
                for (const query of queries) {
                    try {
                        let searchFields = tableConfig.search_fields;
                        
                        if (typeof searchFields === 'string') {
                            try {
                                searchFields = JSON.parse(searchFields);
                            } catch (e) {
                                searchFields = searchFields.split(',').map(f => f.trim());
                            }
                        }
                        
                        if (!Array.isArray(searchFields)) {
                            console.warn(`  âš ï¸ Invalid search_fields for ${tableConfig.table_name}:`, searchFields);
                            continue;
                        }
                        
                        if (searchFields.length === 0) {
                            console.warn(`  âš ï¸ No search fields configured for ${tableConfig.table_name}`);
                            continue;
                        }
                        
                        
                        let tableResults = [];
                        
                        for (const field of searchFields) {
                            try {
                                const { data, error } = await supabaseClient
                                    .from(tableConfig.table_name)
                                    .select('*')
                                    .ilike(field, `%${query}%`)
                                    .limit(20);
                                
                                if (error) {
                                    console.warn(`    âš ï¸ Field "${field}" search failed:`, error.message);
                                    continue; // Skip this field, try next one
                                }
                                
                                if (data && data.length > 0) {
                                    console.log(`    âœ… Found ${data.length} in field "${field}"`);
                                    tableResults.push(...data);
                                }
                            } catch (fieldError) {
                                console.warn(`    âš ï¸ Exception searching field "${field}":`, fieldError.message);
                                continue;
                            }
                        }
                        
                        const uniqueResults = Array.from(
                            new Map(tableResults.map(item => [item.id, item])).values()
                        );
                        
                        if (uniqueResults.length > 0) {
                            console.log(`  âœ… Total ${uniqueResults.length} unique results in ${tableConfig.table_name}`);
                            
                            const resultsWithMeta = uniqueResults.map(row => ({
                                ...row,
                                _source_table: tableConfig.table_name,
                                _source_description: tableConfig.description,
                                _search_query: query
                            }));
                            
                            allResults.push(...resultsWithMeta);
                            totalResults += uniqueResults.length;
                        } else {
                        }
                        
                    } catch (err) {
                        console.error(`  âŒ Exception searching ${tableConfig.table_name}:`, err);
                    }
                }
            }
            
            const seen = new Set();
            const uniqueResults = allResults.filter(result => {
                const key = `${result._source_table}_${result.id}`;
                if (seen.has(key)) return false;
                seen.add(key);
                return true;
            });
            
            console.log(`\nâœ… SEARCH COMPLETE! Total: ${uniqueResults.length} unique results`);
            
            // Extract acupoints first
            const acupoints = uniqueResults
                .filter(r => r._source_table && r._source_table.includes('acupuncture') && r._source_table !== 'reference_rag_body_images_20260129')
                .map(point => ({
                    code: point.point_code || point.point_number || point.code || 'N/A',
                    english_name: point.english_name || point.point_name_eng || point.name_en || 'N/A',
                    body_part: point.body_part || point.location || 'N/A',
                    meridian: point.meridian || point.channel || 'N/A'
                }));
            
            // ğŸ¯ SMART IMAGE FETCHING: Match by acupoint codes, keywords, AND medical terms
            let bodyImages = [];
            try {
                // Medical term to body part keyword mapping
                const medicalToBodyPart = {
                    // Organs â†’ Body regions
                    '×˜×—×•×œ': ['×‘×˜×Ÿ', '×§×“××™'],
                    '×›×‘×“': ['×‘×˜×Ÿ', '×¦×“'],
                    '×›×œ×™×•×ª': ['×’×‘', '××•×ª×Ÿ'],
                    '×œ×‘': ['×—×–×”', '×§×“××™'],
                    '×¨×™××•×ª': ['×—×–×”', '×’×‘'],
                    '×§×™×‘×”': ['×‘×˜×Ÿ', '×§×“××™'],
                    '××¢×™×™×': ['×‘×˜×Ÿ'],
                    '×©×œ×¤×•×—×™×ª': ['×‘×˜×Ÿ', '×ª×—×ª×•×Ÿ'],
                    // Conditions â†’ Body regions
                    '×¢×™×›×•×œ': ['×‘×˜×Ÿ'],
                    '× ×©×™××”': ['×—×–×”'],
                    '×¨××©': ['×¨××©', '×¤× ×™×'],
                    '×›××‘ ×¨××©': ['×¨××©'],
                    '××™×’×¨× ×”': ['×¨××©'],
                    '×’×‘': ['×’×‘'],
                    '×¦×•×•××¨': ['×¦×•×•××¨'],
                    '×›×ª×£': ['×›×ª×£', '×–×¨×•×¢'],
                    '×‘×¨×š': ['×¨×’×œ', '×‘×¨×š'],
                    '×§×¨×¡×•×œ': ['×¨×’×œ', '×›×£ ×¨×’×œ'],
                    '×™×“': ['×™×“', '×–×¨×•×¢'],
                    '×¨×’×œ': ['×¨×’×œ'],
                    // TCM terms
                    '×™×× ×’': ['×’×‘', '×§×“××™'],
                    '×™×™×Ÿ': ['×‘×˜×Ÿ', '×§×“××™'],
                    '×¦\'×™': ['×‘×˜×Ÿ', '×—×–×”'],
                    '×“×': ['×‘×˜×Ÿ', '×—×–×”'],
                    'IBS': ['×‘×˜×Ÿ'],
                    '×¢×¦×™×¨×•×ª': ['×‘×˜×Ÿ'],
                    '×©×œ×©×•×œ': ['×‘×˜×Ÿ']
                };
                
                // Get all active body images
                const { data: allImages, error: imgError } = await supabaseClient
                    .from('reference_rag_body_images_20260129')
                    .select('*')
                    .eq('is_active', true);
                
                if (!imgError && allImages && allImages.length > 0) {
                    console.log(`ğŸ–¼ï¸ Loaded ${allImages.length} body images from database`);
                    
                    // Method 1: Match images by acupoint codes from results
                    const foundAcupointCodes = acupoints.map(p => p.code.toUpperCase()).filter(c => c !== 'N/A');
                    if (foundAcupointCodes.length > 0) {
                        console.log(`ğŸ¯ Found acupoint codes: ${foundAcupointCodes.join(', ')}`);
                        const matchedByCode = allImages.filter(img => {
                            if (!img.acupoint_codes || !Array.isArray(img.acupoint_codes)) return false;
                            return img.acupoint_codes.some(code => 
                                foundAcupointCodes.includes(code.toUpperCase())
                            );
                        });
                        if (matchedByCode.length > 0) {
                            console.log(`  âœ… Matched ${matchedByCode.length} images by acupoint codes`);
                            bodyImages.push(...matchedByCode);
                        }
                    }
                    
                    // Method 2: Match by medical terms in queries â†’ body parts
                    for (const query of queries) {
                        // Check medical term mapping
                        for (const [term, bodyParts] of Object.entries(medicalToBodyPart)) {
                            if (query.includes(term)) {
                                console.log(`  ğŸ” Query contains "${term}" â†’ searching for ${bodyParts.join(', ')}`);
                                for (const bodyPart of bodyParts) {
                                    const matchedByMedical = allImages.filter(img => {
                                        const searchIn = [
                                            img.body_part_hebrew,
                                            img.body_part,
                                            ...(img.search_keywords_hebrew || [])
                                        ].filter(Boolean).join(' ').toLowerCase();
                                        return searchIn.includes(bodyPart.toLowerCase());
                                    });
                                    if (matchedByMedical.length > 0) {
                                        console.log(`    âœ… Found ${matchedByMedical.length} images for "${bodyPart}"`);
                                        bodyImages.push(...matchedByMedical);
                                    }
                                }
                            }
                        }
                        
                        // Method 3: Direct keyword match in search_keywords_hebrew
                        const matchedByKeyword = allImages.filter(img => {
                            if (!img.search_keywords_hebrew || !Array.isArray(img.search_keywords_hebrew)) return false;
                            return img.search_keywords_hebrew.some(keyword => 
                                query.includes(keyword) || keyword.includes(query)
                            );
                        });
                        if (matchedByKeyword.length > 0) {
                            console.log(`  âœ… Matched ${matchedByKeyword.length} images by keyword in "${query}"`);
                            bodyImages.push(...matchedByKeyword);
                        }
                    }
                    
                    // Remove duplicates
                    bodyImages = Array.from(new Map(bodyImages.map(img => [img.id, img])).values());
                    console.log(`ğŸ–¼ï¸ Total unique body images matched: ${bodyImages.length}`);
                } else {
                    console.warn('âš ï¸ No body images loaded or error:', imgError);
                }
            } catch (imgError) {
                console.error('âŒ Error fetching body images:', imgError);
            }
            
            return {
                allResults: uniqueResults,
                totalResults: uniqueResults.length,
                formulas: uniqueResults.filter(r => r._source_table === 'tcm_formulas'),
                acupoints: acupoints,
                images: bodyImages.map(img => ({
                    id: img.id,
                    body_part: img.body_part_hebrew || img.body_part || '×ª××•× ×ª ×’×•×£',
                    body_part_en: img.body_part,
                    storage_url: img.image_url,
                    filename: img.body_part,
                    acupoint_codes: img.acupoint_codes || []
                }))
            };
        }


        async function displaySearchResults(results) {
            // ============================================================================
            // ============================================================================
            const cachedResponse = getCachedResponse(currentQueries);
            
            if (cachedResponse) {
                const resultsDiv = document.getElementById('searchResults');
                resultsDiv.innerHTML = `
                    <div class="bg-yellow-50 p-3 rounded-lg border-2 border-yellow-300 mb-4 text-right" dir="rtl">
                        <span class="text-xl">ğŸ’¾</span>
                        <strong>×ª×©×•×‘×” ×©××•×¨×”</strong> - ×©××œ×” ×–×• ×›×‘×¨ × ×¢× ×ª×” ×‘×¢×‘×¨ (×—×¡×›×•×Ÿ ×‘×¢×œ×•×ª!)
                        <span class="text-xs text-gray-600">× ×©××œ×” ${cachedResponse.hits} ×¤×¢××™× × ×•×¡×¤×•×ª</span>
                    </div>
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border-2 border-blue-200 mb-6">
                        <h4 class="text-xl font-bold mb-4 flex items-center justify-end">
                            <span class="mr-3">×ª×©×•×‘×ª AI (××•×¤×¢×œ ×¢×œ ×™×“×™ RAG)</span>
                            <span class="text-3xl">ğŸ¤–</span>
                        </h4>
                        <div class="prose max-w-none whitespace-pre-wrap text-right" dir="rtl">${cachedResponse}</div>
                    </div>
                `;
                
                lastSearchResults = cachedResponse;
                
                addToAuditLog({
                    type: 'cached_response',
                    queries: currentQueries,
                    cacheHit: true,
                    costSaved: 0.002
                });
                
                return; // Done - no API call needed!
            }
            
            // ============================================================================
            // ============================================================================
            const reportDetail = document.querySelector('input[name="reportDetail"]:checked').value;
            const context = buildAIContext(results, reportDetail);
            
            
            // ğŸ”’ SECURE: Call Edge Function (API key stored in Supabase Secrets)
            const response = await fetch(EDGE_FUNCTION_URL, {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    prompt: context,
                    max_tokens: reportDetail === 'full' ? 3000 : 1500
                })
            });

            const data = await response.json();
            
            // Handle Edge Function response
            if (data.error) {
                throw new Error(data.error);
            }
            
            const aiResponse = data.content || data.text || '×œ× ×”×ª×§×‘×œ×” ×ª×©×•×‘×” ××”×©×¨×ª';
            
            const inputTokens = data.usage?.input_tokens || Math.ceil(context.length / 4);
            const outputTokens = data.usage?.output_tokens || Math.ceil(aiResponse.length / 4);
            
            updateMetrics(inputTokens, outputTokens);
            lastSearchResults = aiResponse;
            
            // ============================================================================
            // ============================================================================
            cacheResponse(currentQueries, aiResponse, results);
            
            // ============================================================================
            // ============================================================================
            addToAuditLog({
                type: 'new_query',
                queries: currentQueries,
                resultCount: results.allResults ? results.allResults.length : 0,
                warningsFound: results.allResults ? results.allResults.filter(r => r._source_table === 'acupuncture_point_warnings').length : 0,
                inputTokens: inputTokens,
                outputTokens: outputTokens,
                cost: (inputTokens * INPUT_TOKEN_COST) + (outputTokens * OUTPUT_TOKEN_COST),
                cacheHit: false
            });

            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = `
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border-2 border-blue-200 mb-6">
                    <h4 class="text-xl font-bold mb-4 flex items-center justify-end">
                        <span class="mr-3">×ª×©×•×‘×ª AI (××•×¤×¢×œ ×¢×œ ×™×“×™ RAG)</span>
                        <span class="text-3xl">ğŸ¤–</span>
                    </h4>
                    <div class="prose max-w-none whitespace-pre-wrap text-right" dir="rtl">${aiResponse}</div>
                </div>
                
                ${results.acupoints && results.acupoints.length > 0 ? `
                    <div class="bg-green-50 p-6 rounded-xl border-2 border-green-300 mb-6">
                        <h4 class="text-xl font-bold mb-4 text-right">ğŸ¯ × ×§×•×“×•×ª ×“×™×§×•×¨ ××ª××™××•×ª (${results.acupoints.length}):</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            ${results.acupoints.map(point => `
                                <div class="bg-white p-3 rounded-lg shadow text-right">
                                    <div class="font-bold text-red-600">${point.code}</div>
                                    <div class="text-sm text-gray-700">${point.english_name || 'N/A'}</div>
                                    <div class="text-xs text-gray-500">${point.body_part} Â· ${point.meridian}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
                
                ${results.images && results.images.length > 0 ? `
                    <div class="bg-purple-50 p-6 rounded-xl border-2 border-purple-300">
                        <h4 class="text-xl font-bold mb-4 text-right">ğŸ–¼ï¸ ×“×™××’×¨××•×ª ×’×•×£ ×¨×œ×•×•× ×˜×™×•×ª (${results.images.length}):</h4>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            ${results.images.map(img => `
                                <div class="cursor-pointer hover:scale-105 transition" onclick="showImageFullscreen('${img.storage_url}', '${img.filename}')">
                                    <img src="${img.storage_url}" 
                                         alt="${img.body_part}" 
                                         class="w-full h-48 object-contain bg-white rounded-lg shadow-md"
                                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                    <div style="display:none;" class="w-full h-48 flex items-center justify-center bg-gray-100 rounded-lg">
                                        <span class="text-gray-500 text-sm">×ª××•× ×” ×œ× ×–××™× ×”</span>
                                    </div>
                                    <p class="text-center text-sm font-semibold mt-2">${img.body_part}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function buildAIContext(results, reportDetail) {
            const queries = currentQueries.join(', ');
            
            if (results.allResults && results.allResults.length > 0) {
                // ============================================================================
                // ============================================================================
                
                const categories = categorizeResults(results.allResults);
                const conflicts = detectConflicts(categories);
                
                
                let contextParts = [];
                
                // ============================================================================
                // PRIORITY 1: WARNINGS (Show first, cannot be skipped!)
                // ============================================================================
                if (categories.warnings.length > 0) {
                    const warningText = categories.warnings.map(w => {
                        return `âš ï¸ ××–×”×¨×”: ${w.warning_he || w.explanation || w.point_number_hebrew || '××–×”×¨×ª ×‘×˜×™×—×•×ª'} - ×¨××ª ×—×•××¨×”: ${w.warning_level || w.severity || '×’×‘×•×”×”'}`;
                    }).join('\n');
                    
                    contextParts.push(`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ ××–×”×¨×•×ª ×‘×˜×™×—×•×ª ×§×¨×™×˜×™×•×ª - ×—×•×‘×” ×œ×§×¨×•× ×œ×¤× ×™ ×˜×™×¤×•×œ! âš ï¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${warningText}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
                }
                
                // ============================================================================
                // ============================================================================
                if (conflicts.length > 0) {
                    const conflictText = conflicts.map(c => {
                        return `ğŸš¨ ×¡×ª×™×¨×” ×§×¨×™×˜×™×ª: ${c.message}
   ×˜×™×¤×•×œ ××•×¦×¢: ${JSON.stringify(c.treatment).substring(0, 100)}
   ××–×”×¨×”: ${JSON.stringify(c.warning).substring(0, 100)}
   ×”××œ×¦×”: ××œ ×ª×©×ª××© ×‘× ×§×•×“×•×ª ${c.points.join(', ')} - ×§×™×™××ª ××–×”×¨×ª ×‘×˜×™×—×•×ª!`;
                    }).join('\n\n');
                    
                    contextParts.push(`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš¨ ×–×•×”×• ×¡×ª×™×¨×•×ª ×‘×™×Ÿ ×˜×™×¤×•×œ ××•×¦×¢ ×œ××–×”×¨×•×ª ×‘×˜×™×—×•×ª! ğŸš¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
${conflictText}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`);
                }
                
                const groupedByTable = {};
                results.allResults.forEach(r => {
                    const table = r._source_table;
                    if (!groupedByTable[table]) groupedByTable[table] = [];
                    groupedByTable[table].push(r);
                });
                
                if (groupedByTable['diagnostic_rag_pulse_patterns_20260129']) {
                    const pulses = groupedByTable['diagnostic_rag_pulse_patterns_20260129'].slice(0, 5);
                    contextParts.push(`×××¦××™ ×“×•×¤×§: ${pulses.map(p => 
                        `${p.pulse_name_he} (${p.pulse_name_en}) - ${p.clinical_significance}`
                    ).join('; ')}`);
                }
                
                if (groupedByTable['diagnostic_rag_tongue_findings_20260129']) {
                    const tongues = groupedByTable['diagnostic_rag_tongue_findings_20260129'].slice(0, 5);
                    contextParts.push(`×××¦××™ ×œ×©×•×Ÿ: ${tongues.map(t => 
                        `${t.finding_he} (${t.finding_en}) - ${t.clinical_significance}`
                    ).join('; ')}`);
                }
                
                if (groupedByTable['dr_roni_acupuncture_points']) {
                    const points = groupedByTable['dr_roni_acupuncture_points'].slice(0, 10);
                    const safePoints = conflicts.length > 0 
                        ? points.filter(p => {
                            const pointCodes = extractPointCodes(p);
                            return !conflicts.some(c => c.points.some(cp => pointCodes.includes(cp)));
                        })
                        : points;
                    
                    if (safePoints.length > 0) {
                        contextParts.push(`× ×§×•×“×•×ª ×“×™×§×•×¨ ×©×œ ×“"×¨ ×¨×•× ×™: ${safePoints.map(p => 
                            `${p.chinese_name} (${p.english_name}) - ${p.description || ''}`
                        ).join('; ')}`);
                    }
                }
                
                if (groupedByTable['bible_rag_zangfu_syndromes_20260129']) {
                    const syndromes = groupedByTable['bible_rag_zangfu_syndromes_20260129'].slice(0, 5);
                    contextParts.push(`×ª×¡××•× ×•×ª: ${syndromes.map(s => 
                        `${s.name_he} - ${s.symptoms_he || ''}`
                    ).join('; ')}`);
                }
                
                if (groupedByTable['qa_knowledge_base']) {
                    const qaItems = groupedByTable['qa_knowledge_base'].slice(0, 3);
                    contextParts.push(`××™×“×¢ ×—×™× ×•×›×™: ${qaItems.map(q => 
                        `×©××œ×”: ${q.question_hebrew} | ×ª×©×•×‘×”: ${(q.answer_hebrew || '').substring(0, 150)}...`
                    ).join('\n')}`);
                }
                
                const detailInstruction = reportDetail === 'full'
                    ? '×¡×¤×§ ×“×•×— ××§×™×£ ×•××¤×•×¨×˜ ×‘×¢×‘×¨×™×ª ×¢× ×¤×¨×•×˜×•×§×•×œ×™ ×˜×™×¤×•×œ, ×ª×•×š ×©×™×œ×•×‘ ×©×œ ×›×œ ×”×××¦××™× ×”××‘×—× ×ª×™×™×.'
                    : '×¡×¤×§ ×¡×™×›×•× ×ª××¦×™×ª×™ ×‘×¢×‘×¨×™×ª ×¢× × ×§×•×“×•×ª ××¤×ª×— ×‘×œ×‘×“.';
                
                // ============================================================================
                // ============================================================================
                return `××ª×” ×¢×•×–×¨ ×§×œ×™× ×™ ××•××—×” ×‘×¨×¤×•××” ×¡×™× ×™×ª. ×—×•×‘×” ×œ×¢×§×•×‘ ××—×¨ ×—×•×§×™× ××œ×” ×‘×§×¤×“× ×•×ª:

ğŸš¨ ×—×•×§×™ ×‘×˜×™×—×•×ª ×§×¨×™×˜×™×™× (×œ× × ×™×ª×Ÿ ×œ×”×ª×¢×œ×!):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. ×× ×™×© ××–×”×¨×•×ª ×‘×˜×™×—×•×ª - ×”×¦×’ ××•×ª×Ÿ ×ª×—×™×œ×” ×‘Ö¾3 ×©×•×¨×•×ª ×”×¨××©×•× ×•×ª ×‘××¡×’×¨×ª ××“×•××”
2. ×× ×–×•×”×• ×¡×ª×™×¨×•×ª ×‘×™×Ÿ ×˜×™×¤×•×œ ×œ××–×”×¨×” - ××¡×•×¨ ×œ×›×œ×•×œ ××ª ×”×˜×™×¤×•×œ ×”×¡×•×ª×¨!
3. ×× ××§×•×¨×•×ª ×¡×•×ª×¨×™× ×–×” ××ª ×–×” - ×”×¦×’ ×©×ª×™ ××•×¤×¦×™×•×ª ×•××¤×©×¨ ×œ××˜×¤×œ ×œ×‘×—×•×¨
4. ×¦×™×™×Ÿ ×ª××™×“ ××§×•×¨ ×œ××™×“×¢ (×××™×–×• ×˜×‘×œ×”)
5. ×”×•×¡×£ ×ª××™×“ ×›×ª×‘ ×•×™×ª×•×¨ ××©×¤×˜×™ ×‘×¡×•×£

×©××™×œ×ª×•×ª: "${queries}"

${contextParts.join('\n\n')}

${detailInstruction}

×¤×•×¨××˜ ×”×—×•×‘×” ×œ×ª×©×•×‘×”:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
×× ×™×© ××–×”×¨×•×ª:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ××–×”×¨×•×ª ×‘×˜×™×—×•×ª ×§×¨×™×˜×™×•×ª - ×§×¨× ×œ×¤× ×™ ×˜×™×¤×•×œ! âš ï¸                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [×¨×©×•× ×›××Ÿ ××ª ×›×œ ×”××–×”×¨×•×ª]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ ×˜×™×¤×•×œ ××•××œ×¥:
[×¨×©×•× ×›××Ÿ ××ª ×”×˜×™×¤×•×œ, ×ª×•×š ×”×•×¦××ª × ×§×•×“×•×ª ×¢× ××–×”×¨×•×ª]

ğŸ”„ ×—×œ×•×¤×•×ª (×× ××§×•×¨×•×ª ×—×œ×•×§×™×):
[×¨×©×•× ××•×¤×¦×™×•×ª ×©×•× ×•×ª ×× ×™×©]

ğŸ“š ××§×•×¨×•×ª:
[×¦×™×™×Ÿ ×××™×–×• ×˜×‘×œ×” ×›×œ ××™×“×¢]

×× ×–×•×”×• ×¡×ª×™×¨×•×ª:
ğŸš¨ ×©×™× ×œ×‘: ××¦×× ×• ××™×“×¢ ×¡×•×ª×¨
   [×”×¡×‘×¨ ××ª ×”×¡×ª×™×¨×”]
   [×”××œ×¦×”: ×‘×—×¨ ××ª ×”××•×¤×¦×™×” ×”×‘×˜×•×—×” ×™×•×ª×¨]

âš–ï¸ ×›×ª×‘ ×•×™×ª×•×¨ ××©×¤×˜×™:
×”××¢×¨×›×ª ××¡×¤×§×ª ××™×“×¢ ×¢×–×¨ ×‘×œ×‘×“. ××™× ×” ××”×•×•×” ×ª×—×œ×™×£ ×œ×©×™×§×•×œ ×§×œ×™× ×™ ××§×¦×•×¢×™.
×”××˜×¤×œ ××—×¨××™ ×‘××•×¤×Ÿ ×‘×œ×¢×“×™: ×œ××™××•×ª ×”×ª×•×•×™×ª × ×’×“, ×œ××™×©×•×¨ ×‘×˜×™×—×•×ª ×”× ×§×•×“×•×ª, 
×œ×§×‘×œ×ª ×”×¡×›××” ××“×¢×ª, ×•×œ××™×œ×•×™ ××—×¨ ×›×œ ×”×¨×’×•×œ×¦×™×•×ª ×”××§×•××™×•×ª.
×©×™××•×© ×‘××¢×¨×›×ª ××”×•×•×” ×”×¡×›××” ×©××ª×” ××˜×¤×œ ××•×¡××š ×‘×¨×¤×•××” ×¡×™× ×™×ª ×•×©××ª×” ×ª×××ª 
××ª ×›×œ ×”×”××œ×¦×•×ª ×œ×¤× ×™ ×™×™×©×•×.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

×¢× ×” ×‘×¢×‘×¨×™×ª (××™××™×Ÿ ×œ×©×××œ) ×¢× × ×™×ª×•×— ×¨×¤×•××” ×¡×™× ×™×ª ××©×•×œ×‘.`;
            }
            
            const formulaContext = results.formulas && results.formulas.length > 0
                ? `Relevant formulas: ${JSON.stringify(results.formulas.slice(0, 10))}`
                : 'No formulas found';
            const acupointContext = results.acupoints && results.acupoints.length > 0
                ? `Relevant acupoints: ${results.acupoints.map(p => `${p.code} (${p.english_name})`).join(', ')}`
                : '';
            const detailInstruction = reportDetail === 'full'
                ? 'Provide COMPREHENSIVE and DETAILED Hebrew report with treatment protocols.'
                : 'Provide CONCISE Hebrew summary with key points only.';

            return `You are a TCM expert. Answer in HEBREW (right-to-left). Queries: "${queries}"

${formulaContext}
${acupointContext}

${detailInstruction}

Respond in Hebrew with TCM analysis.`;
        }

        async function triggerFallbackSearch(queries) {
            document.getElementById('fallbackBrowser').classList.remove('hidden');
            const resultsDiv = document.getElementById('fallbackResults');
            resultsDiv.innerHTML = '<div class="text-center p-4"><div class="animate-spin text-2xl">ğŸ”„</div></div>';

            const prompt = `Search for Hebrew/CM medical info: ${queries.join(', ')}. Respond in HEBREW.`;

            try {
                // ğŸ”’ SECURE: Call Edge Function (API key stored in Supabase Secrets)
                const response = await fetch(EDGE_FUNCTION_URL, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        max_tokens: 1000
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                const aiResponse = data.content || data.text || '×œ× ×”×ª×§×‘×œ×” ×ª×©×•×‘×” ××”×©×¨×ª';
                resultsDiv.innerHTML = `<div class="prose max-w-none text-right" dir="rtl">${aiResponse}</div>`;
                
                const outputTokens = data.usage?.output_tokens || Math.ceil(aiResponse.length / 4);
                updateMetrics(250, outputTokens);
            } catch (error) {
                resultsDiv.innerHTML = `<div class="text-red-600 text-right">×©×’×™××”: ${error.message}</div>`;
            }
        }

        function toggleReportDetail() {
            if (currentQueries.length > 0 && confirm('×œ×™×¦×•×¨ ××—×“×© ×ª×•×¦××•×ª ×¢× ×¨××ª ×¤×™×¨×•×˜ ×—×“×©×”?')) {
                performMultiQuery();
            }
        }

        function printReport() { window.print(); }
        function shareWhatsApp() {
            const text = `×“×•×— ×¢×•×–×¨ ×§×œ×™× ×™ CM\n\n×©××œ×•×ª: ${currentQueries.join(', ')}\n\n${lastSearchResults}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }
        function emailReport() {
            const subject = '×“×•×— ×¢×•×–×¨ ×§×œ×™× ×™ CM';
            const body = `×©××œ×•×ª: ${currentQueries.join(', ')}\n\n${lastSearchResults}`;
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }
        function downloadPDF() {
            window.print();
            alert('×”×©×ª××© ×‘××¤×©×¨×•×ª "×©××•×¨ ×›-PDF" ×‘×ª×™×‘×ª ×”×“×•-×©×™×— ×œ×”×“×¤×¡×”.');
        }

        function showImageFullscreen(url, filename) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50';
            modal.onclick = () => modal.remove();
            modal.innerHTML = `
                <div class="max-w-4xl max-h-screen p-4">
                    <img src="${url}" alt="${filename}" class="max-w-full max-h-screen object-contain">
                    <p class="text-white text-center mt-4">${filename}</p>
                </div>
            `;
            document.body.appendChild(modal);
        }

        async function init() {
            updateStatus('××ª×—×‘×¨ ×œ-Supabase...');
            startSessionTimer();
            
            try {
                await loadRAGData();
                // Don't auto-load questions - they load when user expands Module 1 panel
                // await loadModule1Questions('all', 0);
                // await loadModule2Questions(); // â† COMMENTED OUT: Function now loads from external module questions-589.js
                updateStatus('âœ… ×”××¢×¨×›×ª ××•×›× ×”! ×œ×—×¥ ×¢×œ "411 ×©××œ×•×ª" ×œ×”×¦×’×ª ×©××œ×•×ª');
            } catch (error) {
                console.error('Database connection error:', error);
                updateStatus('âš ï¸ ×¢×•×‘×“ ×‘××¦×‘ ×œ× ××§×•×•×Ÿ - ×©××œ×•×Ÿ ×™×™×Ÿ-×™×× ×’ ×–××™×Ÿ');
            }
            
            try {
                await createCSVIndicators();  // Load table indicators from database
                createQuickQuestions();
                updateMetrics();
            } catch (error) {
                console.error('UI initialization error:', error);
            }

            
            // Load modular components
            try {
                const componentLoader = new ComponentLoader(supabaseClient);
                await componentLoader.loadPanelComponents('left-panel', 'dynamicComponents');
            } catch (error) {
                console.error('Component loading error:', error);
            }

        }

        async function loadRAGData() {
            // NOTE: csv_priorities table removed - now using search_config in createCSVIndicators()
            
            const { data: acupoints } = await supabaseClient.from('treatment_rag_acupoints_gallery_20260129').select('*');
            if (acupoints) acupointsData = acupoints;
            
            const { data: images } = await supabaseClient.from('reference_rag_body_images_20260129').select('*');
            if (images) imagesData = images;
        }

        function updateStatus(message) {
            const statusElement = document.getElementById('statusText');
            if (statusElement) {
                statusElement.textContent = message;
            } else {
                console.log('Status:', message);
            }
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>

<div id="yinyang-module" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:white;z-index:99999;overflow-y:auto;">
    <div style="padding:20px;">
        <button onclick="hideYinYang()" style="background:#ef4444;color:white;padding:10px 20px;border-radius:8px;font-weight:bold;border:none;cursor:pointer;margin-bottom:20px;">
            â† ×—×–×•×¨
        </button>
        
    <!-- Header -->
    <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 shadow-lg no-print">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-4xl font-bold mb-2 text-right">â˜¯ï¸ ×”×¢×¨×›×ª ××™×–×•×Ÿ ×™×™×Ÿ-×™×× ×’</h1>
            <p class="text-purple-100 text-right text-lg">×©××œ×•×Ÿ ××§×™×£ ×œ×–×™×”×•×™ ×“×¤×•×¡×™ ×™×™×Ÿ-×™×× ×’ ×‘×¨×¤×•××” ×”×¡×™× ×™×ª</p>
            <p class="text-sm text-purple-200 text-right mt-2">TCM Clinical Assistant - Tel Aviv | ×’×¨×¡×” 1.0.0</p>
        </div>
    </div>

    <div class="max-w-6xl mx-auto p-6">
        <!-- Progress Bar -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6 no-print">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold text-gray-600">×”×ª×§×“××•×ª ×”×©××œ×•×Ÿ</span>
                <span class="text-sm font-semibold text-purple-600" id="progress-text">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-4">
                <div class="progress-bar h-4 rounded-full" id="progress-bar" style="width: 0%"></div>
            </div>
            <p class="text-xs text-gray-500 mt-2 text-right" id="questions-answered">0 ××ª×•×š 11 ×©××œ×•×ª × ×¢× ×•</p>
            <div id="miss-alert" style="display:none;background:#fef3c7;border:2px solid #f59e0b;border-radius:12px;padding:16px;margin-top:12px;">
                <div style="display:flex;gap:12px;">
                    <div style="flex:1;text-align:right;">
                        <p style="font-weight:bold;margin-bottom:4px;">× ×•×ª×¨×• ×©××œ×•×ª:</p>
                        <p id="miss-list" style="font-size:14px;"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Scores Display -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6" id="live-scores" style="display: none;">
            <h3 class="text-xl font-bold text-gray-800 mb-4 text-right flex items-center justify-end gap-2">
                <span>× ×™×§×•×“ ×‘×–××Ÿ ×××ª</span>
                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
            </h3>
            <div class="space-y-4">
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">×—×¡×¨ ×™×™×Ÿ (Yin Deficiency)</span>
                        <span class="text-lg font-bold text-blue-900" id="score-yin-def">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill yin-color" id="bar-yin-def" style="width: 0%">
                            <span id="bar-text-yin-def"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">×—×¡×¨ ×™×× ×’ (Yang Deficiency)</span>
                        <span class="text-lg font-bold text-red-700" id="score-yang-def">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill yang-color" id="bar-yang-def" style="width: 0%">
                            <span id="bar-text-yang-def"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">××™×–×•×Ÿ ×™×™×Ÿ (Yin Balance)</span>
                        <span class="text-lg font-bold text-green-700" id="score-yin-bal">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill qi-color" id="bar-yin-bal" style="width: 0%">
                            <span id="bar-text-yin-bal"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">××™×–×•×Ÿ ×™×× ×’ (Yang Balance)</span>
                        <span class="text-lg font-bold text-green-700" id="score-yang-bal">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill qi-color" id="bar-yang-bal" style="width: 0%">
                            <span id="bar-text-yang-bal"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">×¢×•×“×£ ×™×× ×’ (Yang Excess)</span>
                        <span class="text-lg font-bold text-orange-600" id="score-yang-excess">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill heat-color" id="bar-yang-excess" style="width: 0%">
                            <span id="bar-text-yang-excess"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">×—×¡×¨ ×¦'×™ (Qi Deficiency)</span>
                        <span class="text-lg font-bold text-emerald-700" id="score-qi-def">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill qi-color" id="bar-qi-def" style="width: 0%">
                            <span id="bar-text-qi-def"></span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700">×—×•× (Heat)</span>
                        <span class="text-lg font-bold text-orange-700" id="score-heat">0</span>
                    </div>
                    <div class="dimension-bar">
                        <div class="dimension-fill heat-color" id="bar-heat" style="width: 0%">
                            <span id="bar-text-heat"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
        <div id="submit-section" style="display:none;text-align:center;margin:40px 0;padding:30px;background:white;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.1);">
            <button onclick="showResults()" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px 60px;border-radius:16px;font-size:24px;font-weight:bold;border:none;cursor:pointer;box-shadow:0 8px 20px rgba(102,126,234,0.4);">
                âœ¨ ×”×¦×’ ×ª×•×¦××•×ª ××œ××•×ª âœ¨
            </button>
            <p style="margin-top:16px;color:#666;font-size:18px;font-weight:600;">ğŸ‰ ×›×œ ×”×©××œ×•×ª × ×¢× ×•!</p>
        </div>
<!-- Questionnaire Sections -->
        <div id="questionnaire">
            <!-- Section 1: General State -->
            <div class="section-card bg-white rounded-lg shadow-md p-6 mb-6 active" data-section="general">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-right border-b-2 border-purple-200 pb-3">
                    ××¦×‘ ×›×œ×œ×™
                </h2>
                
                <!-- Question 1: Energy Level -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 1/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-energy_level">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-energy_level">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-energy_level">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×›×™×¦×“ ×”×× ×¨×’×™×” ×”×›×œ×œ×™×ª ×©×œ×š ×‘××”×œ×š ×”×™×•×?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="energy_level" data-option="very_low">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">× ××•×›×” ×××•×“, ××•×ª×©/×ª</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="energy_level" data-option="low">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">× ××•×›×” ×œ××“×™</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="energy_level" data-option="balanced">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×™×¦×™×‘×”, ×××•×–× ×ª</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="energy_level" data-option="high_agitated">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×’×‘×•×”×” ×¢× ×—×•×¡×¨ ×× ×•×—×” ××• ×ª×¡×™×¡×”</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 2: Temperature Preference -->
                <div class="mb-6">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 2/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-temperature_preference">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-temperature_preference">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-temperature_preference">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×”×× ××ª/×” ×‘×“×¨×š ×›×œ×œ ××¨×’×™×©/×” ×™×•×ª×¨ ×§×¨ ××• ×—× ×‘×”×©×•×•××” ×œ×× ×©×™× ××—×¨×™×?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="temperature_preference" data-option="very_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×¢×ª×™× ×§×¨×•×‘×•×ª ××¨×’×™×©/×” ×§×¨, ×œ× ××•×”×‘/×ª ×§×•×¨</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="temperature_preference" data-option="slightly_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">××¢×˜ ×™×•×ª×¨ ×§×¨ ×××—×¨×™×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="temperature_preference" data-option="neutral">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×‘×¢×¨×š ×›××• ××—×¨×™×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="temperature_preference" data-option="hot">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×¢×ª×™× ×§×¨×•×‘×•×ª ××¨×’×™×©/×” ×—×, ×œ× ××•×”×‘/×ª ×—×•×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="temperature_preference" data-option="evening_hot">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×™×•×ª×¨ ×—×•× ×‘×¢×¨×‘ ××• ×‘×œ×™×œ×”</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Heat, Cold & Sweat -->
            <div class="section-card bg-white rounded-lg shadow-md p-6 mb-6" data-section="heat_cold_sweat">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-right border-b-2 border-purple-200 pb-3">
                    ×—×•×, ×§×•×¨ ×•×”×–×¢×”
                </h2>
                
                <!-- Question 3: Cold Sensitivity -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 3/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-cold_sensitivity">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-cold_sensitivity">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-cold_sensitivity">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×”×× ×™×© ×œ×š ×™×“×™×™×/×¨×’×œ×™×™× ×§×¨×•×ª ××• ×”×¨×’×©×ª ×§×•×¨ ×‘×’×‘ ×”×ª×—×ª×•×Ÿ/×‘×˜×Ÿ?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="cold_sensitivity" data-option="none">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="cold_sensitivity" data-option="mild">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×¤×¢××™×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="cold_sensitivity" data-option="marked">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×¢×ª×™× ×§×¨×•×‘×•×ª ×•×‘××•×¤×Ÿ ×‘×¨×•×¨</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 4: Heat Sensation -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 4/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-heat_sensation">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-heat_sensation">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-heat_sensation">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×”×× ××ª/×” ×—×•×•×” ×ª×—×•×©×•×ª ×©×œ ×—×•× (×›×¤×•×ª ×™×“×™×™×, ×›×¤×•×ª ×¨×’×œ×™×™×, ×—×–×”, ×¤× ×™×)?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="heat_sensation" data-option="none">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="heat_sensation" data-option="pm_heat">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×™×•×ª×¨ ××—×¨ ×”×¦×”×¨×™×™×/×¢×¨×‘</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="heat_sensation" data-option="all_day_heat">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×›×œ ×”×™×•× ××• ××ª×—××/×ª ×‘×§×œ×•×ª</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="heat_sensation" data-option="night_sweats">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×”×–×¢×•×ª ×œ×™×œ×” ×¢× ×—×•×</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 5: Sweating -->
                <div class="mb-6">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 5/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-sweating">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-sweating">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-sweating">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ××™×š ×”×”×–×¢×” ×©×œ×š?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="sweating" data-option="normal">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¨×’×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sweating" data-option="spontaneous">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×”×–×¢×” ×¡×¤×•× ×˜× ×™×ª ×¢× ××¢×˜ ××××¥</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sweating" data-option="night">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×”×–×¢×•×ª ×œ×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sweating" data-option="no_sweat_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×œ×œ× ×”×–×¢×”, ×’×•×£ ×§×¨</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Thirst, Fluids, Sleep -->
            <div class="section-card bg-white rounded-lg shadow-md p-6 mb-6" data-section="fluids_sleep">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-right border-b-2 border-purple-200 pb-3">
                    ×¦××, × ×•×–×œ×™× ×•×©×™× ×”
                </h2>
                
                <!-- Question 6: Thirst -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 6/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-thirst">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-thirst">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-thirst">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×ª××¨/×™ ××ª ×”×¦×× ×•×¦×¨×™×›×ª ×”× ×•×–×œ×™× ×©×œ×š
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="thirst" data-option="low_thirst">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">××¢×˜ ×¦××, ××¢×“×™×£/×” ××©×§××•×ª ×—××™×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="thirst" data-option="normal">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¦×× ×¨×’×™×œ</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="thirst" data-option="high_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¦×× ×—×–×§, ××¢×“×™×£/×” ××©×§××•×ª ×§×¨×™×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="thirst" data-option="dry_mouth_little_drink">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¤×” ×™×‘×© ××š ×¨×§ ×œ×’×™××•×ª ×§×˜× ×•×ª</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 7: Sleep -->
                <div class="mb-6">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 7/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-sleep">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-sleep">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-sleep">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ××™×š ×”×©×™× ×” ×©×œ×š?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="sleep" data-option="good">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×™×©×Ÿ/×” ×˜×•×‘ ×œ××•×¨×š ×”×œ×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sleep" data-option="difficulty_falling">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×§×©×” ×œ×”×™×¨×“×, ××•×— ×¢×¡×•×§</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sleep" data-option="waking_night">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">××ª×¢×•×¨×¨/×ª ×œ×¢×ª×™× ×§×¨×•×‘×•×ª, ×—×•×, ×”×–×¢×•×ª ×œ×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="sleep" data-option="excessive_sleep">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¦×¨×™×š/×” ×”×¨×‘×” ×©×™× ×”, ×¢×“×™×™×Ÿ ×¢×™×™×£/×”</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Stool & Urine -->
            <div class="section-card bg-white rounded-lg shadow-md p-6 mb-6" data-section="bowel_urine">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-right border-b-2 border-purple-200 pb-3">
                    ×¦×•××” ×•×©×ª×Ÿ
                </h2>
                
                <!-- Question 8: Stool -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 8/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-stool">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-stool">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-stool">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ××™×š ×ª× ×•×¢×•×ª ×”××¢×™×™× ×©×œ×š?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="stool" data-option="normal">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¨×’×™×œ×•×ª, ××¢×•×¦×‘×•×ª</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="stool" data-option="loose_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¨×•×¤×¤×•×ª, ×‘××™×•×—×“ ×¢× ×§×•×¨ ××• ×‘×‘×•×§×¨</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="stool" data-option="dry_constipation">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¦×•××” ×™×‘×©×”, ×§×©×” ××• ×¢×¦×™×¨×•×ª</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 9: Urine -->
                <div class="mb-6">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 9/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-urine">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-urine">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-urine">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ××™×š ×”×”×˜×œ×” ×©×œ×š?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="urine" data-option="normal">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¨×’×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="urine" data-option="frequent_clear">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×ª×›×•×¤×”, ×‘×”×™×¨×”, ×‘××™×•×—×“ ×‘×œ×™×œ×”</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="urine" data-option="dark_scanty">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×›×”×”, ××•×¢×˜×”</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Body Form & Sensations -->
            <div class="section-card bg-white rounded-lg shadow-md p-6 mb-6" data-section="body_form">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-right border-b-2 border-purple-200 pb-3">
                    ××‘× ×” ×’×•×£ ×•×ª×—×•×©×•×ª
                </h2>
                
                <!-- Question 10: Body Build -->
                <div class="mb-8">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 10/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-body_build">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-body_build">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-body_build">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ××™×š ×”×™×™×ª ××ª××¨/×ª ××ª ××‘× ×” ×”×’×•×£ ×•×”×ª×—×•×©×” ×©×œ×š?
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="body_build" data-option="thin_dry">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¨×–×”, ×™×‘×©, × ×˜×™×™×” ×œ×™×•×‘×©</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="body_build" data-option="puffy_cold">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">× ×¤×•×—, ××¨×’×™×©/×” ×§×¨, ×›×‘×“</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="body_build" data-option="robust_red_face">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×—×¡×•×Ÿ ×¢× × ×˜×™×™×” ×œ×¤× ×™× ××“×•××•×ª ××• ×§×•×œ ×—×–×§</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="body_build" data-option="balanced">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded-full border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×¤×¨×•×¤×•×¨×¦×™×•× ×œ×™, ×××•×–×Ÿ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 11: Pain (Multi-choice) -->
                <div class="mb-6">
                <div style="display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px;background:#f9fafb;border-radius:8px;">
                    <span style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;font-weight:bold;padding:5px 12px;border-radius:16px;font-size:13px;"># ×©××œ×” 11/11</span>
                    <div style="display:flex;gap:6px;align-items:center;" id="st-pain">
                        <span style="color:#ef4444;font-weight:600;font-size:13px;" id="tx-pain">×œ× × ×¢× ×ª×”</span>
                        <span style="width:18px;height:18px;border-radius:50%;background:#fee2e2;color:#ef4444;font-size:11px;display:flex;align-items:center;justify-content:center;" id="ck-pain">âœ—</span>
                    </div>
                </div>
                <label class="block text-lg font-semibold text-gray-700 mb-4 text-right" dir="rtl">
                        ×›××‘×™× ×§×‘×•×¢×™× ×›×œ×©×”× (××¤×¨×§×™×, ×’×‘, ×’×¤×™×™×)? <span class="text-sm text-gray-500">(× ×™×ª×Ÿ ×œ×‘×—×•×¨ ×™×•×ª×¨ ×××—×“)</span>
                    </label>
                    <div class="space-y-3">
                        <div class="option-card p-4 rounded-lg" data-question="pain" data-option="cold_pain_better_warm" data-multi="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×›××‘ ×§×¨, ×˜×•×‘ ×™×•×ª×¨ ×¢× ×—×•×/×œ×—×¥</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="pain" data-option="burning_pain" data-multi="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">×ª×—×•×©×ª ×©×¨×™×¤×” ××• ×›××‘ ×—×•×</span>
                            </div>
                        </div>
                        <div class="option-card p-4 rounded-lg" data-question="pain" data-option="none" data-multi="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-5 h-5 rounded border-2 border-gray-300"></div>
                                </div>
                                <span class="text-gray-700" dir="rtl">××™×Ÿ ×›××‘ ××©××¢×•×ª×™</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" style="display: none;">
            <div class="result-card bg-white rounded-lg shadow-lg p-8 mb-6">
                <div class="text-center mb-8">
                    <div style="font-size:150px;line-height:1;margin-bottom:20px;animation:rotate-yin-yang 20s linear infinite;display:inline-block;">â˜¯</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">×ª×•×¦××•×ª ×”×”×¢×¨×›×”</h2>
                    <p class="text-gray-600">× ×™×ª×•×— ××§×™×£ ×©×œ ××™×–×•×Ÿ ×”×™×™×Ÿ-×™×× ×’ ×©×œ×š</p>
                </div>

                <!-- Primary Pattern -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 text-right">×“×¤×•×¡ ×¨××©×™:</h3>
                    <div class="text-center mb-4">
                        <span id="primary-pattern-badge" class="pattern-badge text-xl"></span>
                    </div>
                    <div class="bg-blue-50 border-r-4 border-blue-500 p-6 rounded-lg">
                        <h4 class="font-bold text-lg text-gray-800 mb-3 text-right">×”×¡×‘×¨ ×œ××˜×•×¤×œ:</h4>
                        <p id="patient-explanation" class="text-gray-700 text-right leading-relaxed text-lg"></p>
                    </div>
                </div>

                <!-- Typical Signs -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-right">×¡×™×× ×™× ××•×¤×™×™× ×™×™×:</h3>
                    <ul id="typical-signs" class="space-y-2 text-right"></ul>
                </div>

                <!-- TCM Notes -->
                <div class="mb-8 bg-purple-50 border-r-4 border-purple-500 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-3 text-right">×”×¢×¨×•×ª TCM ×œ××˜×¤×œ:</h3>
                    <p id="tcm-notes" class="text-gray-700 text-right leading-relaxed"></p>
                </div>

                <!-- Safety Flags -->
                <div id="safety-flags-section" style="display: none;" class="mb-8">
                    <h3 class="text-xl font-bold text-red-700 mb-4 text-right flex items-center justify-end gap-2">
                        <span>×“×’×œ×™ ×‘×˜×™×—×•×ª - × ×“×¨×© ×ª×©×•××ª ×œ×‘:</span>
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                    </h3>
                    <ul id="safety-flags" class="space-y-2 text-right"></ul>
                </div>

                <!-- Follow-up Questions -->
                <div id="followup-section" class="mb-8 bg-green-50 border-r-4 border-green-500 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-right">×©××œ×•×ª ×”××©×š ××•××œ×¦×•×ª:</h3>
                    <ul id="followup-questions" class="space-y-2 text-right"></ul>
                </div>

                <!-- Lifestyle Prompts -->
                <div id="lifestyle-section" class="mb-8 bg-yellow-50 border-r-4 border-yellow-500 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-right">×©××œ×•×ª ××•×¨×— ×—×™×™×:</h3>
                    <ul id="lifestyle-prompts" class="space-y-2 text-right"></ul>
                </div>

                <!-- Pulse Diagnosis Section -->
                <div id="pulse-diagnosis-section" class="mb-8 bg-red-50 border-r-4 border-red-500 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-right flex items-center justify-end gap-2">
                        <span>×“×¤×•×¡×™ ×“×•×¤×§ ××•×¤×™×™× ×™×™×:</span>
                        <span>ğŸ’—</span>
                    </h3>
                    <div id="pulse-findings" class="space-y-3 text-right">
                        <div class="text-gray-500 text-center py-3">×˜×•×¢×Ÿ ×“×¤×•×¡×™ ×“×•×¤×§...</div>
                    </div>
                </div>

                <!-- Tongue Diagnosis Section -->
                <div id="tongue-diagnosis-section" class="mb-8 bg-pink-50 border-r-4 border-pink-500 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-right flex items-center justify-end gap-2">
                        <span>×××¦××™ ×œ×©×•×Ÿ ××•×¤×™×™× ×™×™×:</span>
                        <span>ğŸ‘…</span>
                    </h3>
                    <div id="tongue-findings" class="space-y-3 text-right">
                        <div class="text-gray-500 text-center py-3">×˜×•×¢×Ÿ ×××¦××™ ×œ×©×•×Ÿ...</div>
                    </div>
                    <!-- Tongue Body Image -->
                    <div class="mt-4 text-center">
                        <button onclick="BodyImages.showTongue();" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition">
                            ğŸ“· ×¦×¤×” ×‘×ª××•× ×ª ×œ×©×•×Ÿ
                        </button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4 justify-center mt-8 no-print">
                    <button onclick="ExportModule.show({title: &#39;×™×™×¦×•× ×ª×•×¦××•×ª ×”×¢×¨×›×”&#39;, subject: &#39;×ª×•×¦××•×ª ×”×¢×¨×›×ª ×™×™×Ÿ-×™×× ×’&#39;})" class="print-button text-white px-8 py-3 rounded-lg font-semibold hover:opacity-90 transition" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        ğŸ“¤ ×™×™×¦×•× / ×”×“×¤×¡×”
                    </button>
                    <button onclick="resetAssessment()" class="bg-gray-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-700 transition">
                        ğŸ”„ ×”×ª×—×œ ××—×“×©
                    </button>
                </div>

                <!-- Print-only Timestamp -->
                <div class="print-only mt-8 text-center text-sm text-gray-600">
                    <p>×ª××¨×™×š ×”×”×¢×¨×›×”: <span id="assessment-date"></span></p>
                    <p>TCM Clinical Assistant - Tel Aviv</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questionData = {
            energy_level: {
                very_low: { yang_def: 2 },
                low: { yang_def: 1 },
                balanced: { yin_bal: 1, yang_bal: 1 },
                high_agitated: { yang_excess: 2 }
            },
            temperature_preference: {
                very_cold: { yang_def: 2 },
                slightly_cold: { yang_def: 1 },
                neutral: { yin_bal: 1, yang_bal: 1 },
                hot: { yin_def: 2, yang_excess: 1 },
                evening_hot: { yin_def: 2 }
            },
            cold_sensitivity: {
                none: {},
                mild: { yang_def: 1 },
                marked: { yang_def: 2 }
            },
            heat_sensation: {
                none: {},
                pm_heat: { yin_def: 2 },
                all_day_heat: { yang_excess: 2 },
                night_sweats: { yin_def: 3 }
            },
            sweating: {
                normal: {},
                spontaneous: { qi_def: 1, yang_def: 1 },
                night: { yin_def: 2 },
                no_sweat_cold: { yang_def: 2 }
            },
            thirst: {
                low_thirst: { yang_def: 1 },
                normal: {},
                high_cold: { yang_excess: 1, heat: 1 },
                dry_mouth_little_drink: { yin_def: 2 }
            },
            sleep: {
                good: { yin_bal: 1, yang_bal: 1 },
                difficulty_falling: { yang_excess: 1, yin_def: 1 },
                waking_night: { yin_def: 2 },
                excessive_sleep: { yang_def: 2 }
            },
            stool: {
                normal: {},
                loose_cold: { yang_def: 2 },
                dry_constipation: { yin_def: 2, heat: 1 }
            },
            urine: {
                normal: {},
                frequent_clear: { yang_def: 2 },
                dark_scanty: { yin_def: 1, heat: 1 }
            },
            body_build: {
                thin_dry: { yin_def: 2 },
                puffy_cold: { yang_def: 2 },
                robust_red_face: { yang_excess: 2 },
                balanced: { yin_bal: 1, yang_bal: 1 }
            },
            pain: {
                cold_pain_better_warm: { yang_def: 1 },
                burning_pain: { yin_def: 1, yang_excess: 1 },
                none: {}
            }
        };

     // ================================================================
// ================================================================

let patternDefinitions = {};

// Fallback pattern definitions if database fails
const fallbackPatterns = {
    'yin_deficiency': {
        name: '×—×¡×¨ ×™×™×Ÿ',
        name_cn: 'é˜´è™š',
        badge_class: 'bg-red-100 text-red-800',
        patient_friendly: '×’×•×¤×š ××¨××” ×¡×™×× ×™× ×©×œ ×—×¡×¨ ×™×™×Ÿ - ×—×•× ×¤× ×™××™, ×™×•×‘×©, ×•××™ ×©×§×˜.',
        typical_signs: ['×—×•× ×‘×›×¤×•×ª ×”×™×“×™×™× ×•×”×¨×’×œ×™×™×', '×”×–×¢×•×ª ×œ×™×œ×”', '×™×•×‘×© ×‘×¤×”', '××™ ×©×§×˜'],
        tcm_notes: '×™×© ×œ×–×™×Ÿ ××ª ×”×™×™×Ÿ ×•×œ×¦× ×Ÿ ×—×•× ×¨×™×§',
        safety_flags: []
    },
    'yang_deficiency': {
        name: '×—×¡×¨ ×™×× ×’',
        name_cn: 'é˜³è™š',
        badge_class: 'bg-blue-100 text-blue-800',
        patient_friendly: '×’×•×¤×š ××¨××” ×¡×™×× ×™× ×©×œ ×—×¡×¨ ×™×× ×’ - ×§×•×¨, ×¢×™×™×¤×•×ª, ×•×—×•×œ×©×”.',
        typical_signs: ['×ª×—×•×©×ª ×§×•×¨', '×¢×™×™×¤×•×ª', '×’×¤×™×™× ×§×¨×•×ª', '×©×ª×Ÿ ×‘×”×™×¨ ×•××¨×•×‘×”'],
        tcm_notes: '×™×© ×œ×—×× ×•×œ×—×–×§ ××ª ×”×™×× ×’',
        safety_flags: []
    },
    'yin_yang_balance': {
        name: '××™×–×•×Ÿ ×™×™×Ÿ-×™×× ×’',
        name_cn: 'é˜´é˜³å¹³è¡¡',
        badge_class: 'bg-green-100 text-green-800',
        patient_friendly: '×’×•×¤×š ××¨××” ××™×–×•×Ÿ ×˜×•×‘ ×‘×™×Ÿ ×™×™×Ÿ ×•×™×× ×’.',
        typical_signs: ['×× ×¨×’×™×” ×™×¦×™×‘×”', '×©×™× ×” ×˜×•×‘×”', '×¢×™×›×•×œ ×ª×§×™×Ÿ', '××¦×‘ ×¨×•×— ×××•×–×Ÿ'],
        tcm_notes: '×©××™×¨×” ×¢×œ ×”××™×–×•×Ÿ ×”×§×™×™×',
        safety_flags: []
    },
    'yin_def_yang_excess': {
        name: '×—×¡×¨ ×™×™×Ÿ ×¢× ×¢×•×“×£ ×™×× ×’',
        name_cn: 'é˜´è™šé˜³äº¢',
        badge_class: 'bg-orange-100 text-orange-800',
        patient_friendly: '×’×•×¤×š ××¨××” ×—×¡×¨ ×™×™×Ÿ ×¢× ×¢×œ×™×™×ª ×™×× ×’ - ×—×•×, ××™ ×©×§×˜, ×•×œ×—×¥.',
        typical_signs: ['×›××‘×™ ×¨××©', '×¡×—×¨×—×•×¨×ª', '×¤× ×™× ××“×•××•×ª', '×¢×¦×‘× ×•×ª'],
        tcm_notes: '×™×© ×œ×–×™×Ÿ ×™×™×Ÿ ×•×œ×”×¨×’×™×¢ ×™×× ×’ ×¢×•×œ×”',
        safety_flags: ['×œ×—×¥ ×“× ×’×‘×•×” ××¤×©×¨×™']
    },
    'yang_def_yin_excess': {
        name: '×—×¡×¨ ×™×× ×’ ×¢× ×¢×•×“×£ ×™×™×Ÿ',
        name_cn: 'é˜³è™šé˜´ç››',
        badge_class: 'bg-purple-100 text-purple-800',
        patient_friendly: '×’×•×¤×š ××¨××” ×—×¡×¨ ×™×× ×’ ×¢× ×”×¦×˜×‘×¨×•×ª ×™×™×Ÿ - ×§×•×¨, ×›×‘×“×•×ª, ×•× ×¤×™×—×•×ª.',
        typical_signs: ['× ×¤×™×—×•×ª', '×›×‘×“×•×ª ×‘×’×•×£', '×§×•×¨ ×—×–×§', '×œ×™×—×”'],
        tcm_notes: '×™×© ×œ×—×× ×™×× ×’ ×•×œ×™×™×‘×© ×œ×—×•×ª',
        safety_flags: []
    },
    'mixed_or_undefined': {
        name: '×“×¤×•×¡ ××¢×•×¨×‘',
        name_cn: 'æ··åˆ',
        badge_class: 'bg-gray-100 text-gray-800',
        patient_friendly: '×’×•×¤×š ××¨××” ×“×¤×•×¡ ××¢×•×¨×‘ ×©×“×•×¨×© ××‘×—×•×Ÿ ××¢××™×§ ×™×•×ª×¨.',
        typical_signs: ['×ª×¡××™× ×™× ××©×ª× ×™×', '×ª××•× ×” ×œ× ×‘×¨×•×¨×”'],
        tcm_notes: '××•××œ×¥ ××‘×—×•×Ÿ ××§×™×£ × ×•×¡×£',
        safety_flags: []
    }
};

async function loadYinYangPatterns() {
    try {
        
        const { data, error } = await supabaseClient
            .from('yin_yang_pattern_definitions')
            .select('*');
        
        if (error) throw error;
        
        if (!data || data.length === 0) {
            console.log('âš ï¸ No yin-yang patterns in DB, using fallback patterns');
            patternDefinitions = fallbackPatterns;
            return true;
        }
        
        patternDefinitions = {};
        
        data.forEach(pattern => {
            patternDefinitions[pattern.pattern_id] = {
                name: pattern.name_he,
                name_en: pattern.name_en,
                name_cn: pattern.name_cn,
                badge_class: pattern.badge_class,
                patient_friendly: pattern.patient_friendly_he,
                typical_signs: pattern.typical_signs || [],
                tcm_notes: pattern.tcm_notes,
                safety_flags: pattern.safety_flags || []
            };
        });
        
        console.log(`âœ… Loaded ${data.length} yin-yang patterns from database`);
        
        return true;
        
    } catch (error) {
        console.error('âš ï¸ Error loading yin-yang patterns, using fallback:', error.message);
        patternDefinitions = fallbackPatterns;
        return true; // Return true so module still works
    }
}

// Fetch pulse and tongue findings based on pattern
async function fetchDiagnosticData(pattern) {
    try {
        // Map pattern to search terms (multiple variations)
        const patternMap = {
            'yin_deficiency': ['yin', 'deficiency', '×—×¡×¨', '×™×™×Ÿ', 'xu', 'heat', '×—×•×', 'dry', '×™×•×‘×©'],
            'yang_deficiency': ['yang', 'deficiency', '×—×¡×¨', '×™×× ×’', 'xu', 'cold', '×§×•×¨', 'weak', '×—×•×œ×©×”'],
            'yin_yang_balance': ['balance', 'normal', '××™×–×•×Ÿ', '×ª×§×™×Ÿ'],
            'yin_def_yang_excess': ['yin', 'deficiency', 'yang', 'excess', 'rising', '×¢×•×œ×”', 'heat'],
            'yang_def_yin_excess': ['yang', 'deficiency', 'cold', 'damp', '×œ×—×•×ª', '×§×•×¨'],
            'mixed_or_undefined': ['mixed', '××¢×•×¨×‘', 'complex']
        };
        
        const searchTerms = patternMap[pattern] || ['general'];
        
        // Fetch ALL pulse patterns (usually ~23 total)
        const { data: pulseData, error: pulseError } = await supabaseClient
            .from('diagnostic_rag_pulse_patterns_20260129')
            .select('pulse_name_he, pulse_name_cn, characteristics, clinical_significance, indicates_pattern, category')
            .order('category');
        
        if (pulseError) console.error('Pulse fetch error:', pulseError);
        
        // Filter pulse data by pattern match - check indicates_pattern, characteristics, and clinical_significance
        let matchingPulses = (pulseData || []).filter(p => {
            const searchText = JSON.stringify(p.indicates_pattern || {}).toLowerCase() + ' ' +
                               (p.characteristics || '').toLowerCase() + ' ' +
                               (p.clinical_significance || '').toLowerCase();
            return searchTerms.some(term => searchText.includes(term.toLowerCase()));
        }).slice(0, 4);
        
        // If no matches, show first few pulses as general reference
        if (matchingPulses.length === 0 && pulseData && pulseData.length > 0) {
            console.log('âš ï¸ No specific pulse matches, showing general pulses');
            matchingPulses = pulseData.slice(0, 3);
        }
        
        // Fetch ALL tongue findings (usually ~20 total)
        const { data: tongueData, error: tongueError } = await supabaseClient
            .from('diagnostic_rag_tongue_findings_20260129')
            .select('finding_he, finding_cn, aspect, characteristics, clinical_significance, indicates_pattern')
            .order('aspect');
        
        if (tongueError) console.error('Tongue fetch error:', tongueError);
        
        // Filter tongue data by pattern match
        let matchingTongue = (tongueData || []).filter(t => {
            const searchText = JSON.stringify(t.indicates_pattern || {}).toLowerCase() + ' ' +
                               (t.characteristics || '').toLowerCase() + ' ' +
                               (t.clinical_significance || '').toLowerCase();
            return searchTerms.some(term => searchText.includes(term.toLowerCase()));
        }).slice(0, 4);
        
        // If no matches, show first few tongue findings as general reference
        if (matchingTongue.length === 0 && tongueData && tongueData.length > 0) {
            console.log('âš ï¸ No specific tongue matches, showing general findings');
            matchingTongue = tongueData.slice(0, 3);
        }
        
        // Display pulse findings
        const pulseContainer = document.getElementById('pulse-findings');
        if (pulseContainer) {
            if (matchingPulses.length > 0) {
                pulseContainer.innerHTML = matchingPulses.map(p => `
                    <div class="bg-white p-3 rounded-lg shadow-sm border border-red-200">
                        <div class="font-bold text-red-700">${p.pulse_name_he} ${p.pulse_name_cn || ''}</div>
                        <div class="text-sm text-gray-600 mt-1">${p.characteristics || ''}</div>
                        <div class="text-xs text-gray-500 mt-1">${p.clinical_significance || ''}</div>
                    </div>
                `).join('');
            } else {
                pulseContainer.innerHTML = '<div class="text-gray-500 text-center">×œ× × ××¦××• ×“×¤×•×¡×™ ×“×•×¤×§ ×¡×¤×¦×™×¤×™×™× ×œ×“×¤×•×¡ ×–×”</div>';
            }
        }
        
        // Display tongue findings
        const tongueContainer = document.getElementById('tongue-findings');
        if (tongueContainer) {
            if (matchingTongue.length > 0) {
                tongueContainer.innerHTML = matchingTongue.map(t => `
                    <div class="bg-white p-3 rounded-lg shadow-sm border border-pink-200">
                        <div class="font-bold text-pink-700">${t.finding_he} ${t.finding_cn || ''}</div>
                        <div class="text-xs text-pink-500 mb-1">${t.aspect || ''}</div>
                        <div class="text-sm text-gray-600">${t.characteristics || ''}</div>
                        <div class="text-xs text-gray-500 mt-1">${t.clinical_significance || ''}</div>
                    </div>
                `).join('');
            } else {
                tongueContainer.innerHTML = '<div class="text-gray-500 text-center">×œ× × ××¦××• ×××¦××™ ×œ×©×•×Ÿ ×¡×¤×¦×™×¤×™×™× ×œ×“×¤×•×¡ ×–×”</div>';
            }
        }
        
        console.log(`âœ… Loaded ${matchingPulses.length} pulse + ${matchingTongue.length} tongue findings for pattern: ${pattern}`);
        
    } catch (error) {
        console.error('âŒ Error fetching diagnostic data:', error);
        const pulseContainer = document.getElementById('pulse-findings');
        const tongueContainer = document.getElementById('tongue-findings');
        if (pulseContainer) pulseContainer.innerHTML = '<div class="text-red-500">×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×</div>';
        if (tongueContainer) tongueContainer.innerHTML = '<div class="text-red-500">×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×</div>';
    }
}

async function initYinYangModule() {
    const loaded = await loadYinYangPatterns();
    
    if (!loaded) {
        console.error('âŒ Yin-yang module cannot function without pattern data');
        return;
    }
    
    console.log('âœ… Yin-yang module initialized with database patterns');
    
}

// ================================================================
// ================================================================

// ================================================================
// ================================================================

// ================================================================
// NOTE: The only change needed is to call initYinYangModule()
// ================================================================
   


        const followUpQuestions = {
            yin_deficiency: [
                "×××– ××ª×™ ××ª/×” ××¨×’×™×©/×” ×”×–×¢×•×ª ×œ×™×œ×” ××• ×—×•× ×‘×¢×¨×‘?",
                "×”×× ××ª/×” ××¨×’×™×©/×” ×™×•×ª×¨ ×™×•×‘×© ×‘×¢×•×¨, ×‘×¢×™× ×™×™×, ×‘×’×¨×•×Ÿ ××• ×‘×¦×•××”?",
                "××™×š ×”××¦×‘ ×”×¨×’×©×™ ×©×œ×š ×›×©×™×© ×œ×š ×§×•×©×™ ×œ×”×™×¨×“×?"
            ],
            yang_deficiency: [
                "×‘××™×œ×• ×©×¢×•×ª ×‘×™×•× ××ª/×” ×”×›×™ ×§×¨/×” ××• ×¢×™×™×£/×”?",
                "×”×× ×™×© ×©×™× ×•×™×™× ×‘×ª×“×™×¨×•×ª ××• ×‘× ×¤×— ×”×”×©×ª× ×”?",
                "×”×× ××ª/×” ××¨×’×™×©/×” ×›×‘×“×•×ª ×‘××™×‘×¨×™× ××• × ×¤×™×—×•×ª?"
            ],
            yin_yang_balance: [
                "××” ×¢×•×–×¨ ×œ×š ×œ×©××•×¨ ×¢×œ ×”××™×–×•×Ÿ ×”× ×•×›×—×™?",
                "×”×× ×™×© ×ª×—×•××™× ×¡×¤×¦×™×¤×™×™× ×©×ª×¨×¦×” ×œ×©×¤×¨?"
            ],
            yin_def_yang_excess: [
                "××” ××—××™×¨ ××ª ×ª×—×•×©×•×ª ×”×—×•× ×•×”×ª×¡×™×¡×”?",
                "××™×š ×”×©×™× ×” ×©×œ×š ××•×©×¤×¢×ª ××”×¡×˜×¨×¡?",
                "×”×× ×™×© ×“×¤×•×¡×™× ×©×œ ×™×•×‘×© ×‘×’×•×£?"
            ],
            yang_def_yin_excess: [
                "×”×× ××ª/×” ×—×©/×” ×›×‘×“×•×ª ××• × ×¤×™×—×•×ª ×‘××”×œ×š ×”×™×•×?",
                "××” ×”×§×©×¨ ×‘×™×Ÿ ×§×•×¨ ×œ××–×•×Ÿ ×©××ª/×” ××•×›×œ/×ª?",
                "××™×š ×”×¢×™×›×•×œ ×©×œ×š ×‘×‘×•×§×¨?"
            ],
            mixed_or_undefined: [
                "××™×œ×• ×¡×™××¤×˜×•××™× ×”×›×™ ××˜×¨×™×“×™× ××•×ª×š?",
                "×”×× ×™×© ×“×¤×•×¡×™× ×©×œ ×©×™× ×•×™ ×‘××”×œ×š ×”×™×•×?"
            ]
        };

        const lifestylePrompts = {
            yin_deficiency: [
                "×©××œ ×¢×œ ×œ×™×œ×•×ª ×××•×—×¨×™×, ×¢×‘×•×“×ª ×™×ª×¨ ×›×¨×•× ×™×ª ×•×œ×—×¥ ××¨×•×š ×˜×•×•×—",
                "×©××œ ×¢×œ ××–×•× ×•×ª ×—×¨×™×¤×™×, ××˜×•×’× ×™×, ××œ×›×•×”×•×œ ××• ×××•×“ ×—××™× ×‘××•×¤×™×™×"
            ],
            yang_deficiency: [
                "×©××œ ×¢×œ ×—×©×™×¤×” ×œ×§×•×¨, ××–×•× ×•×ª ×’×•×œ××™×™× ××• ×—×•×œ×©×” ×¢×™×›×•×œ×™×ª ×›×¨×•× ×™×ª",
                "×©××œ ×¢×œ ××××¥ ×¤×™×–×™ ××• ×¨×’×©×™ ××¨×•×š ×˜×•×•×—"
            ],
            yin_yang_balance: [
                "×”××©×š ×¢× ×”×¨×’×œ×™ ××•×¨×— ×—×™×™× × ×•×›×—×™×™×",
                "×©×§×•×œ ×ª×–×•× ×” ×××•×–× ×ª ×•×¤×¢×™×œ×•×ª ×’×•×¤× ×™×ª ×¡×“×™×¨×”"
            ],
            yin_def_yang_excess: [
                "×©××œ ×¢×œ ×œ×—×¥, ×’×™×¨×•×™×™× ×™×ª×¨ ×•×“×¤×•×¡×™ ×©×™× ×”",
                "×‘×“×•×§ ×¦×¨×™×›×ª ×§×¤××™×Ÿ, ××œ×›×•×”×•×œ ×•××–×•× ×•×ª ××—×××™×"
            ],
            yang_def_yin_excess: [
                "×©××œ ×¢×œ ×¦×¨×™×›×ª ××–×•× ×•×ª ×§×¨×™× ××• ×’×•×œ××™×™×",
                "×‘×“×•×§ ×—×©×™×¤×” ×œ×¡×‘×™×‘×•×ª ×§×¨×•×ª ×•×œ×—×•×ª"
            ],
            mixed_or_undefined: [
                "×‘×¦×¢ ×”×¢×¨×›×” ××§×™×¤×” ×©×œ ××•×¨×— ×—×™×™×",
                "×©×§×•×œ ×œ×”×ª×™×™×¢×¥ ×¢× ××˜×¤×œ TCM ×× ×•×¡×”"
            ]
        };

        let answers = {};
        let scores = {
            yin_def: 0,
            yang_def: 0,
            yin_bal: 0,
            yang_bal: 0,
            yang_excess: 0,
            qi_def: 0,
            heat: 0
        };

        const totalQuestions = 11;

        document.addEventListener('DOMContentLoaded', async function() {
            await initYinYangModule();
            setupEventListeners();
        });

        function setupEventListeners() {
            const options = document.querySelectorAll('.option-card');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.dataset.question;
                    const selectedOption = this.dataset.option;
                    const isMulti = this.dataset.multi === 'true';
                    
                    if (isMulti) {
                        handleMultiChoice(question, selectedOption, this);
                    } else {
                        handleSingleChoice(question, selectedOption, this);
                    }
                    
                    updateScores();
                    updateProgress();
                    updateSectionStatus();
                });
            });
        }

        function handleSingleChoice(question, option, element) {
            const allOptions = document.querySelectorAll(`[data-question="${question}"]`);
            allOptions.forEach(opt => {
                opt.classList.remove('selected');
                const circle = opt.querySelector('.w-5');
                circle.style.background = 'white';
            });
            
            element.classList.add('selected');
            const circle = element.querySelector('.w-5');
            circle.style.background = '#667eea';
            
            answers[question] = option;
            markAnswered(question);
        }

        function handleMultiChoice(question, option, element) {
            if (!answers[question]) {
                answers[question] = [];
            }
            
            const index = answers[question].indexOf(option);
            const checkbox = element.querySelector('.w-5');
            
            if (index > -1) {
                answers[question].splice(index, 1);
                element.classList.remove('selected');
                checkbox.style.background = 'white';
            } else {
                answers[question].push(option);
                element.classList.add('selected');
                checkbox.style.background = '#667eea';
            }
            
            if (answers[question].length === 0) {
                delete answers[question];
            }
        }

        function updateScores() {
            scores = {
                yin_def: 0,
                yang_def: 0,
                yin_bal: 0,
                yang_bal: 0,
                yang_excess: 0,
                qi_def: 0,
                heat: 0
            };
            
            for (const [question, answer] of Object.entries(answers)) {
                if (Array.isArray(answer)) {
                    answer.forEach(opt => {
                        const weights = questionData[question][opt];
                        for (const [dimension, weight] of Object.entries(weights)) {
                            scores[dimension] += weight;
                        }
                    });
                } else {
                    const weights = questionData[question][answer];
                    for (const [dimension, weight] of Object.entries(weights)) {
                        scores[dimension] += weight;
                    }
                }
            }
            
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            const answeredCount = Object.keys(answers).length;
            
            if (answeredCount >= 6) {
                document.getElementById('live-scores').style.display = 'block';
            }
            
            const maxScore = Math.max(...Object.values(scores));
            
            for (const [dimension, score] of Object.entries(scores)) {
                const scoreEl = document.getElementById(`score-${dimension.replace('_', '-')}`);
                const barEl = document.getElementById(`bar-${dimension.replace('_', '-')}`);
                const textEl = document.getElementById(`bar-text-${dimension.replace('_', '-')}`);
                
                if (scoreEl && barEl) {
                    scoreEl.textContent = score;
                    const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
                    barEl.style.width = percentage + '%';
                    if (textEl && score > 0) {
                        textEl.textContent = score;
                    }
                }
            }
        }

        
        
        function markAnswered(qid) {
            const ck = document.getElementById('ck-' + qid);
            const tx = document.getElementById('tx-' + qid);
            if (ck) {
                ck.textContent = 'âœ“';
                ck.style.background = '#10b981';
                ck.style.color = 'white';
            }
            if (tx) {
                tx.textContent = '× ×¢× ×ª×”';
                tx.style.color = '#10b981';
            }
        }
        
function updateProgress() {
            const answered = Object.keys(answers).length;
            const percentage = Math.round((answered / totalQuestions) * 100);
            
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = percentage + '%';
            document.getElementById('questions-answered').textContent = answered + ' ××ª×•×š ' + totalQuestions + ' ×©××œ×•×ª × ×¢× ×•';
            
            const allQuestions = ['energy_level','temperature_preference','cold_sensitivity','heat_sensation','sweating','thirst','sleep','stool','urine','body_build','pain'];
            const questionNames = {
                energy_level: '1. ×× ×¨×’×™×”',
                temperature_preference: '2. ×˜××¤×¨×˜×•×¨×”',
                cold_sensitivity: '3. ×§×•×¨',
                heat_sensation: '4. ×—×•×',
                sweating: '5. ×”×–×¢×”',
                thirst: '6. ×¦××',
                sleep: '7. ×©×™× ×”',
                stool: '8. ×¦×•××”',
                urine: '9. ×”×©×ª× ×”',
                body_build: '10. ××‘× ×” ×’×•×£',
                pain: '11. ×›××‘'
            };
            
            const missing = allQuestions.filter(q => !answers[q]);
            const missAlert = document.getElementById('miss-alert');
            const missList = document.getElementById('miss-list');
            
            if (missing.length > 0 && answered > 0) {
                if (missAlert) missAlert.style.display = 'block';
                if (missList) missList.textContent = missing.map(q => questionNames[q]).join(' â€¢ ');
            } else {
                if (missAlert) missAlert.style.display = 'none';
            }
            
            const submitSection = document.getElementById('submit-section');
            if (answered === totalQuestions) {
                if (submitSection) {
                    submitSection.style.display = 'block';
                    setTimeout(() => {
                        submitSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                }
                if (missAlert) missAlert.style.display = 'none';
            } else {
                if (submitSection) submitSection.style.display = 'none';
            }
        }

        function updateSectionStatus() {
            const sections = ['general', 'heat_cold_sweat', 'fluids_sleep', 'bowel_urine', 'body_form'];
            const questionsPerSection = {
                general: ['energy_level', 'temperature_preference'],
                heat_cold_sweat: ['cold_sensitivity', 'heat_sensation', 'sweating'],
                fluids_sleep: ['thirst', 'sleep'],
                bowel_urine: ['stool', 'urine'],
                body_form: ['body_build', 'pain']
            };
            
            sections.forEach(section => {
                const sectionEl = document.querySelector(`[data-section="${section}"]`);
                const questions = questionsPerSection[section];
                const allAnswered = questions.every(q => answers[q]);
                
                if (allAnswered) {
                    sectionEl.classList.remove('active');
                    sectionEl.classList.add('completed');
                } else {
                    sectionEl.classList.add('active');
                }
            });
        }

        function classifyPattern() {
            const s = scores;
            
            if (s.yin_def >= 4 && s.yin_def >= s.yang_def) {
                return 'yin_deficiency';
            } else if (s.yang_def >= 4 && s.yang_def > s.yin_def) {
                return 'yang_deficiency';
            } else if (s.yin_bal >= 2 && s.yang_bal >= 2 && s.yin_def <= 2 && s.yang_def <= 2 && s.yang_excess <= 2) {
                return 'yin_yang_balance';
            } else if (s.yin_def >= 4 && s.yang_excess >= 2) {
                return 'yin_def_yang_excess';
            } else if (s.yang_def >= 4 && s.yin_def <= 2) {
                return 'yang_def_yin_excess';
            } else {
                return 'mixed_or_undefined';
            }
        }

        function showResults() {
            document.getElementById('questionnaire').style.display = 'none';
            document.getElementById('live-scores').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            const pattern = classifyPattern();
            // Use database patterns, fallback to local patterns if not loaded
            let patternInfo = patternDefinitions[pattern];
            if (!patternInfo) {
                console.log('âš ï¸ Pattern not in DB, using fallback for:', pattern);
                patternInfo = fallbackPatterns[pattern] || fallbackPatterns['mixed_or_undefined'];
            }
            
            // Fetch pulse and tongue diagnostic data for this pattern
            fetchDiagnosticData(pattern);
            
            const badge = document.getElementById('primary-pattern-badge');
            badge.innerHTML = `<span style="font-size:1.5em;margin-left:10px;">${patternInfo.name_cn || ''}</span> ${patternInfo.name}`;
            badge.className = 'pattern-badge text-xl ' + patternInfo.badge_class;
            
            document.getElementById('patient-explanation').textContent = patternInfo.patient_friendly;
            
            const signsList = document.getElementById('typical-signs');
            signsList.innerHTML = '';
            patternInfo.typical_signs.forEach(sign => {
                const li = document.createElement('li');
                li.className = 'flex items-center gap-3 text-gray-700';
                li.style.direction = 'rtl';
                li.innerHTML = `
                    <span>${sign}</span>
                    <svg class="w-5 h-5 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                `;
                signsList.appendChild(li);
            });
            
            document.getElementById('tcm-notes').textContent = patternInfo.tcm_notes;
            
            if (patternInfo.safety_flags && patternInfo.safety_flags.length > 0) {
                document.getElementById('safety-flags-section').style.display = 'block';
                const flagsList = document.getElementById('safety-flags');
                flagsList.innerHTML = '';
                patternInfo.safety_flags.forEach(flag => {
                    const li = document.createElement('li');
                    li.className = 'safety-flag';
                    li.style.direction = 'rtl';
                    li.innerHTML = `
                        <div class="flex items-center gap-3" style="flex-direction:row-reverse;">
                            <span class="font-semibold text-gray-800">${flag}</span>
                            <svg class="w-5 h-5 text-yellow-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                        </div>
                    `;
                    flagsList.appendChild(li);
                });
            } else {
                document.getElementById('safety-flags-section').style.display = 'none';
            }
            
            const followups = followUpQuestions[pattern] || [];
            const followupList = document.getElementById('followup-questions');
            followupList.innerHTML = '';
            followups.forEach(q => {
                const li = document.createElement('li');
                li.className = 'flex items-start gap-3 text-gray-700';
                li.style.direction = 'rtl';
                li.innerHTML = `
                    <span>${q}</span>
                    <svg class="w-5 h-5 text-blue-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                `;
                followupList.appendChild(li);
            });
            
            const lifestyles = lifestylePrompts[pattern] || [];
            const lifestyleList = document.getElementById('lifestyle-prompts');
            lifestyleList.innerHTML = '';
            lifestyles.forEach(prompt => {
                const li = document.createElement('li');
                li.className = 'flex items-start gap-3 text-gray-700';
                li.style.direction = 'rtl';
                li.innerHTML = `
                    <span>${prompt}</span>
                    <svg class="w-5 h-5 text-yellow-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                `;
                lifestyleList.appendChild(li);
            });
            
            document.getElementById('assessment-date').textContent = new Date().toLocaleString('he-IL');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetAssessment() {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×ª×—×™×œ ××—×“×©? ×›×œ ×”×ª×©×•×‘×•×ª ×™××‘×“×•.')) {
                answers = {};
                scores = {
                    yin_def: 0,
                    yang_def: 0,
                    yin_bal: 0,
                    yang_bal: 0,
                    yang_excess: 0,
                    qi_def: 0,
                    heat: 0
                };
                
                document.querySelectorAll('.option-card').forEach(card => {
                    card.classList.remove('selected');
                    const marker = card.querySelector('.w-5');
                    marker.style.background = 'white';
                });
                
                document.querySelectorAll('.section-card').forEach(section => {
                    section.classList.remove('completed', 'active');
                });
                
                document.querySelector('[data-section="general"]').classList.add('active');
                
                document.getElementById('questionnaire').style.display = 'block';
                document.getElementById('results').style.display = 'none';
                document.getElementById('live-scores').style.display = 'none';
                
                updateProgress();
                
                // Scroll the yinyang-module to top (not the window)
                const yinyangModule = document.getElementById('yinyang-module');
                if (yinyangModule) {
                    yinyangModule.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }
        }
    </script>

    </div>
</div>


<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PULSE & TONGUE GALLERY FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

async function showPulseGallery() {
    // Create modal
    let modal = document.getElementById('pulse-gallery-modal');
    if (modal) modal.remove();
    
    modal = document.createElement('div');
    modal.id = 'pulse-gallery-modal';
    modal.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:99999;overflow-y:auto;padding:20px;';
    modal.innerHTML = `
        <div style="max-width:900px;margin:0 auto;background:white;border-radius:16px;padding:20px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <button onclick="document.getElementById('pulse-gallery-modal').remove()" style="background:#ef4444;color:white;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;font-weight:bold;">âœ• ×¡×’×•×¨</button>
                <h2 style="font-size:24px;font-weight:bold;color:#dc2626;">ğŸ’— ×“×¤×•×¡×™ ×“×•×¤×§</h2>
            </div>
            <div id="pulse-gallery-content" style="text-align:center;padding:40px;">
                <div style="font-size:18px;color:#666;">×˜×•×¢×Ÿ ×“×¤×•×¡×™ ×“×•×¤×§...</div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    // Fetch data from Supabase
    try {
        const { data, error } = await supabaseClient
            .from('diagnostic_rag_pulse_patterns_20260129')
            .select('*')
            .order('category');
        
        if (error) throw error;
        
        const content = document.getElementById('pulse-gallery-content');
        if (data && data.length > 0) {
            content.innerHTML = `
                <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px;direction:rtl;">
                    ${data.map(p => `
                        <div style="background:linear-gradient(135deg,#fef2f2,#fee2e2);border:2px solid #fca5a5;border-radius:12px;padding:15px;text-align:right;">
                            <div style="font-size:18px;font-weight:bold;color:#dc2626;margin-bottom:5px;">${p.pulse_name_he}</div>
                            <div style="font-size:14px;color:#7f1d1d;margin-bottom:5px;">${p.pulse_name_cn || ''} ${p.pinyin || ''}</div>
                            <div style="font-size:12px;color:#666;margin-bottom:8px;"><strong>×§×˜×’×•×¨×™×”:</strong> ${p.category || ''}</div>
                            ${p.depth ? `<div style="font-size:11px;color:#888;"><strong>×¢×•××§:</strong> ${p.depth}</div>` : ''}
                            ${p.speed ? `<div style="font-size:11px;color:#888;"><strong>××”×™×¨×•×ª:</strong> ${p.speed}</div>` : ''}
                            ${p.characteristics ? `<div style="font-size:12px;color:#444;margin-top:8px;padding-top:8px;border-top:1px solid #fca5a5;">${p.characteristics}</div>` : ''}
                            ${p.clinical_significance ? `<div style="font-size:11px;color:#666;margin-top:5px;font-style:italic;">${p.clinical_significance}</div>` : ''}
                        </div>
                    `).join('')}
                </div>
                <div style="margin-top:20px;text-align:center;">
                    <p style="color:#666;font-size:14px;">×¡×”"×› ${data.length} ×“×¤×•×¡×™ ×“×•×¤×§</p>
                </div>
            `;
        } else {
            content.innerHTML = '<div style="color:#ef4444;">×œ× × ××¦××• ×“×¤×•×¡×™ ×“×•×¤×§</div>';
        }
    } catch (error) {
        console.error('Error loading pulse gallery:', error);
        document.getElementById('pulse-gallery-content').innerHTML = `<div style="color:#ef4444;">×©×’×™××”: ${error.message}</div>`;
    }
}

async function showTongueGallery() {
    // Create modal
    let modal = document.getElementById('tongue-gallery-modal');
    if (modal) modal.remove();
    
    modal = document.createElement('div');
    modal.id = 'tongue-gallery-modal';
    modal.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:99999;overflow-y:auto;padding:20px;';
    modal.innerHTML = `
        <div style="max-width:900px;margin:0 auto;background:white;border-radius:16px;padding:20px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <button onclick="document.getElementById('tongue-gallery-modal').remove()" style="background:#ef4444;color:white;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;font-weight:bold;">âœ• ×¡×’×•×¨</button>
                <h2 style="font-size:24px;font-weight:bold;color:#db2777;">ğŸ‘… ×××¦××™ ×œ×©×•×Ÿ</h2>
            </div>
            <div style="text-align:center;margin-bottom:15px;">
                <button onclick="BodyImages.showTongue();" style="background:#10b981;color:white;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;font-weight:bold;">ğŸ“· ×¦×¤×” ×‘×ª××•× ×ª ×œ×©×•×Ÿ</button>
            </div>
            <div id="tongue-gallery-content" style="text-align:center;padding:40px;">
                <div style="font-size:18px;color:#666;">×˜×•×¢×Ÿ ×××¦××™ ×œ×©×•×Ÿ...</div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    // Fetch data from Supabase
    try {
        const { data, error } = await supabaseClient
            .from('diagnostic_rag_tongue_findings_20260129')
            .select('*')
            .order('aspect');
        
        if (error) throw error;
        
        const content = document.getElementById('tongue-gallery-content');
        if (data && data.length > 0) {
            // Group by aspect
            const grouped = data.reduce((acc, t) => {
                const aspect = t.aspect || '×›×œ×œ×™';
                if (!acc[aspect]) acc[aspect] = [];
                acc[aspect].push(t);
                return acc;
            }, {});
            
            content.innerHTML = `
                <div style="direction:rtl;">
                    ${Object.entries(grouped).map(([aspect, items]) => `
                        <div style="margin-bottom:20px;">
                            <h3 style="font-size:18px;font-weight:bold;color:#db2777;margin-bottom:10px;padding:10px;background:#fdf2f8;border-radius:8px;">${aspect}</h3>
                            <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:10px;">
                                ${items.map(t => `
                                    <div style="background:linear-gradient(135deg,#fdf2f8,#fce7f3);border:2px solid #f9a8d4;border-radius:12px;padding:12px;text-align:right;">
                                        <div style="font-size:16px;font-weight:bold;color:#db2777;">${t.finding_he}</div>
                                        <div style="font-size:13px;color:#9d174d;margin-bottom:5px;">${t.finding_cn || ''}</div>
                                        ${t.characteristics ? `<div style="font-size:12px;color:#444;margin-top:5px;">${t.characteristics}</div>` : ''}
                                        ${t.clinical_significance ? `<div style="font-size:11px;color:#666;margin-top:5px;font-style:italic;">${t.clinical_significance}</div>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div style="margin-top:20px;text-align:center;">
                    <p style="color:#666;font-size:14px;">×¡×”"×› ${data.length} ×××¦××™ ×œ×©×•×Ÿ</p>
                </div>
            `;
        } else {
            content.innerHTML = '<div style="color:#ef4444;">×œ× × ××¦××• ×××¦××™ ×œ×©×•×Ÿ</div>';
        }
    } catch (error) {
        console.error('Error loading tongue gallery:', error);
        document.getElementById('tongue-gallery-content').innerHTML = `<div style="color:#ef4444;">×©×’×™××”: ${error.message}</div>`;
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// YIN-YANG MODULE FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function showYinYang() {
    document.getElementById('yinyang-module').style.display = 'block';
    document.body.style.overflow = 'hidden';
}
function hideYinYang() {
    document.getElementById('yinyang-module').style.display = 'none';
    document.body.style.overflow = 'auto';
}
function showYinYangResults() {
    // Open Yin-Yang module
    document.getElementById('yinyang-module').style.display = 'block';
    document.body.style.overflow = 'hidden';
    
    // Check if questionnaire was completed (scores exist and have values)
    const hasAnswers = typeof scores !== 'undefined' && 
                       (scores.yin > 0 || scores.yang > 0 || scores.deficiency > 0 || scores.excess > 0);
    
    if (hasAnswers) {
        // Show results
        const results = document.getElementById('results');
        if (results) {
            document.getElementById('questionnaire').style.display = 'none';
            document.getElementById('live-scores').style.display = 'none';
            results.style.display = 'block';
            showResults();
        }
    } else {
        // No answers yet - show alert
        alert('×œ× × ××¦××• ×ª×©×•×‘×•×ª! ×™×© ×œ××œ× ××ª ×©××œ×•×Ÿ ×”×¢×¨×›×ª ×™×™×Ÿ-×™×× ×’ (11 ×©××œ×•×ª) ×§×•×“×.');
        // Show questionnaire
        document.getElementById('questionnaire').style.display = 'block';
        document.getElementById('live-scores').style.display = 'block';
        document.getElementById('results').style.display = 'none';
    }
}

console.log('âœ… Voice Search loaded');

</script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ğŸš€ EXTERNAL MODULES LOADED FROM SUPABASE STORAGE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     These modules are now stored in Supabase and loaded dynamically.
     This keeps the index.html clean and makes updates easier!
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- Module 1: Blue Box - 411 Questions -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/questions-411.js"></script>

<!-- Module 2: Purple Box - 589 Questions -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/questions-589.js"></script>

<!-- Module 3: Hebrew Voice Search - FIXED! -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/voice-search.js"></script>

<!-- Module 4: Database Search Engine -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/search-engine.js"></script>

<!-- Module 5: AI Report Generator -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/ai-report.js"></script>

<!-- Module 6: Timer & Metrics -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/timer-metrics.js"></script>

<!-- Module 7: Clinical Modules -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/clinical-modules.js"></script>

<!-- Module 8: Training Syllabus -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/training-syllabus.js"></script>

<!-- Module 9: TCM Visualizations -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/tcm-visualizations.js"></script>

<!-- Module 10: Body Images Gallery -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/body-images.js"></script>

<!-- Module 10B: Body Image Integration -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/body-image-integration.js"></script>

<!-- Module 11: Export Module -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/export-module.js"></script>

<!-- Module 12: Smart Search FIXED - searches BOTH 411+589! ğŸ”¥ -->
<script src="https://iqfglrwjemogoycbzltt.supabase.co/storage/v1/object/public/modules/smart-search.js"></script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     âœ… ALL MODULES LOADED!
     Your app is now fully modular, clean, and professional! ğŸ‰
     Your app is now modular, clean, and professional! ğŸ‰
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->



</body></html>